(function(e){function t(t){for(var n,s,r=t[0],c=t[1],d=t[2],p=0,u=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(u.length)u.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,r=1;r<i.length;r++){var c=i[r];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},o={index:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var l=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("7502")},"00e8":function(e,t,i){"use strict";i("9f4c")},"0154":function(e,t,i){},"0161":function(e,t,i){},"0279":function(e,t,i){},"02ab":function(e,t,i){},"0436":function(e,t,i){"use strict";i("6253")},"04df":function(e,t,i){"use strict";i("8e14")},"04eb":function(e,t,i){},"0625":function(e,t,i){},"065b":function(e,t,i){"use strict";i("f502")},"077d":function(e,t,i){},"0783":function(e,t,i){"use strict";i("a041")},"084d":function(e,t,i){},"0b69":function(e,t,i){"use strict";i("15cc")},"0b7a":function(e,t,i){"use strict";i("14d9");var n=i("9ab4"),o=i("a72c"),a=i("1af0"),s=i("7314"),r=i("8376"),c=i("92ef"),d=i("8ff1"),l=i("3374"),p=i("6f49"),u=i("ee39"),f=i("6929"),b=i.n(f),g=i("edd5");let h=class{constructor(){this.id=Object(d["a"])("Variable"),this.name="变量",this.type="string",this.value="字符串"}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],h.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],h.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("type",String,!0),Object(n["b"])("design:type",String)],h.prototype,"type",void 0),Object(n["a"])([Object(o["c"])("code",null,!0),Object(n["b"])("design:type",Object)],h.prototype,"value",void 0),h=Object(n["a"])([Object(o["b"])("Variable")],h);var y=h;const m=(e,t)=>{const i=[];for(let n=0;n<12;n++)i.push(b()(e).mix(b()(t),n/11).rgb().toString());return i};let j=class{constructor(){this.id=Object(d["a"])("ApplicationConfig"),this.name="应用名称",this.pageConfigList=[new p["a"]],this.imageAssets=[],this.combinations=[],this.customWidgetDefinitions=[],this.dataSources=[],this.colorThemes=[new a["a"]("科技蓝",m("#85a5ff","#030852")),new a["a"]("酷炫绿",m("#2090a0","#00ff88")),new a["a"]("酷炫紫",m("#b37feb","#120338")),new a["a"]("活力橙",m("#ffc069","#612500"))],this.variables=[],this.interactionTriggers=[],this.userScripts=[]}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],j.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],j.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("pageConfigList",[p["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"pageConfigList",void 0),Object(n["a"])([Object(o["c"])("imageAssets",[l["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"imageAssets",void 0),Object(n["a"])([Object(o["c"])("combinations",[s["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"combinations",void 0),Object(n["a"])([Object(o["c"])("customWidgetDefinitions",[r["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"customWidgetDefinitions",void 0),Object(n["a"])([Object(o["c"])("dataSources",[c["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"dataSources",void 0),Object(n["a"])([Object(o["c"])("colorTheme",[a["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"colorThemes",void 0),Object(n["a"])([Object(o["c"])("variables",[y],!0),Object(n["b"])("design:type",Array)],j.prototype,"variables",void 0),Object(n["a"])([Object(o["c"])("interactionTriggers",[g["b"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"interactionTriggers",void 0),Object(n["a"])([Object(o["c"])("userScript",[u["a"]],!0),Object(n["b"])("design:type",Array)],j.prototype,"userScripts",void 0),j=Object(n["a"])([Object(o["b"])("ApplicationConfig")],j);t["a"]=j},"0c90":function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ImageTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["far","image"]}}),t("el-tooltip",{attrs:{placement:"right","open-delay":100,"hide-after":3100}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"image-asset"},[t("img",{attrs:{src:e.imageAsset.url,alt:""}})])]),t("span",[e._v(e._s(e.imageAsset.name))])])],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get imageAsset(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.imageAsset)}handleClick(){this.editor.previewNimObj(this.imageAsset)}handleDbClick(){this.editor.openNimObj(this.imageAsset)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个组合？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteImageAsset(this.imageAsset)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("c2d2"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"5c2bc5a6",null);t["default"]=g.exports},"0cfbb":function(e,t,i){"use strict";i("b052")},"0d49":function(e,t,i){},"0e37":function(e,t,i){},"0ef4":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("cd3f"),o=i.n(n),a=i("bc3a"),s=i.n(a),r=i("8bbf"),c=i.n(r),d=i("18df");class l{constructor(e,t,i){this.state=c.a.observable({data:null,error:null,loading:!1,getDataFn:null}),this.intervalHandler=-1,this.context=e,this.dataSourceConfig=o()(t),this.widgetWrapper=i,this.watcher=new c.a}get loading(){return this.state.loading}set loading(e){this.state.loading=e}get error(){return this.state.error}set error(e){this.state.error=e}get data(){return this.state.data}set data(e){this.state.data=e}async run(){this.watcher=new c.a,window.clearInterval(this.intervalHandler);const e=this.dataSourceConfig.interval;e>=1&&(this.intervalHandler=window.setInterval(()=>{this.run()},1e3*e));const t=this.dataSourceConfig,i=await Object(d["b"])(`\n      async function getData(context, axios, widgetWrapper) {\n        ${t.functionBody}\n      }\n    `,"getData");this.state.getDataFn=i,this.watcher.$watch(()=>{this.getData()},()=>{})}async getData(){const e=this.dataSourceConfig;this.state.loading=!0,this.error=null;try{if("static"===this.dataSourceConfig.type)this.data=JSON.parse(e.staticData);else if("function"===this.dataSourceConfig.type){const e=this.state.getDataFn||(()=>({}));this.data=await e(this.context,s.a,this.widgetWrapper)}}catch(t){this.data=null,this.error=t}return this.state.loading=!1,{}}stop(){window.clearInterval(this.intervalHandler),this.watcher.$destroy()}}},"0f10":function(e,t,i){"use strict";i("245e")},"0ff6":function(e,t,i){},1:function(e,t){},1126:function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PageConfigTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","tv"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名大屏",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get pageConfig(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.pageConfig)}handleClick(){this.editor.previewNimObj(this.pageConfig)}handleDbClick(){this.editor.openNimObj(this.pageConfig)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个页面？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deletePageConfig(this.pageConfig)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("4b41"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"c65a4064",null);t["default"]=g.exports},"15a7":function(e,t,i){},"15cc":function(e,t,i){},"164e":function(e,t){e.exports=echarts},"18df":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));var n=i("3e52"),o=i("3452"),a=i.n(o);async function s(e,t){return new Promise(i=>{const o=Object(n["transform"])(e,{presets:["env"]}).code,s=a.a.enc.Utf8.parse(`define(function () {\n      ${o}\n      return ${t}\n    })`),r=a.a.enc.Base64.stringify(s),c="data:text/plain;base64,"+r;window.require([c],(function(e){i(e)}))})}async function r(e){return new Promise((function(t){window.require([e],(function(e){t(e)}))}))}},"198e":function(e,t,i){"use strict";i("1e5e")},"1a20":function(e,t,i){"use strict";i("f704")},"1aa9":function(e,t,i){},"1af0":function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(e,t){this.id=Object(a["a"])("ColorTheme"),this.builtIn=!1,this.name="自定义主题",this.colors=["#00ffff"],e&&(this.name=e),t&&(this.colors=t)}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("builtIn",Boolean,!0),Object(n["b"])("design:type",Object)],s.prototype,"builtIn",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("colors",[String],!0),Object(n["b"])("design:type",Object)],s.prototype,"colors",void 0),s=Object(n["a"])([Object(o["b"])("ColorTheme"),Object(n["b"])("design:paramtypes",[String,Array])],s),t["a"]=s},"1b87":function(e,t,i){"use strict";i("cd8f")},"1c22":function(e,t,i){"use strict";i("3bc2")},"1cdf":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ApplicationContext",{ref:"applicationContext",staticClass:"NimAppEditor",attrs:{uploadFile:e.uploadFile,applicationConfig:e.applicationConfig}},[t("div",{staticClass:"header"},[t("NimAppEditorHeader",{on:{save:e.handleSave}})],1),t("div",{staticClass:"body"},[t("NimAppEditorSideBar",{staticClass:"side-bar"}),"none"!==e.secondarySidebarType?t("div",{staticClass:"secondary-sidebar"},[t("keep-alive",["object_tree"===e.secondarySidebarType?t("ObjectTreePanel"):e._e(),"widget-definition"===e.secondarySidebarType?t("WidgetDefinitionPanel"):e._e(),"theme"===e.secondarySidebarType?t("ThemePanel"):e._e(),"log"===e.secondarySidebarType?t("LogPanel"):e._e(),"image"===e.secondarySidebarType?t("ImageAssetPanel"):e._e()],1)],1):e._e(),t("ObjectEditorTab",{ref:"objectEditorTab",staticClass:"grow"})],1),t("AssetDialog",{ref:"assetDialog"}),e.contextmenu.opened?t("div",{staticClass:"contextmenu-mask",on:{click:e.closeContextmenu,contextmenu:e.closeContextmenu}},[t("div",{staticClass:"contextmenu",style:{top:e.contextmenu.y+"px",left:e.contextmenu.x+"px"},on:{click:function(e){e.stopPropagation()}}},[e._l(e.contextmenu.meunItems,(function(i,n){return["split-line"===i.name?t("div",{key:n,staticClass:"meun-split-line"}):i.disable?t("div",{key:n,staticClass:"meun-item-disable"},[e._v(e._s(i.name))]):t("div",{key:n,staticClass:"meun-item",class:{"split-line":"split-line"===i.name},on:{click:i.handler}},[e._v(e._s(i.name))])]}))],2)]):e._e()],1)},o=[],a=(i("14d9"),i("9ab4")),s=i("60a3"),r=i("a72c"),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"NimAppEditorHeader"},[e._m(0),e._m(1),t("span",{staticClass:"right"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.$emit("save")}}},[t("i",{staticClass:"el-icon-box"}),t("span",[e._v("保存")])]),t("el-button",{attrs:{type:"text",size:"mini"}},[t("i",{staticClass:"el-icon-switch-button"}),t("span",[e._v("关闭")])])],1)])},d=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"left"},[t("span",{staticClass:"logo"},[t("i",{staticClass:"el-icon-star-off"})]),t("span",{staticClass:"name"},[e._v("NIM-EDITOR-测试版")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"center"},[t("span",[e._v("Nim Application Editor")])])}];let l=class extends s["f"]{};l=Object(a["a"])([s["a"]],l);var p,u=l,f=u,b=(i("7e08"),i("2877")),g=Object(b["a"])(f,c,d,!1,null,"17309fc1",null),h=g.exports,y=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"NimAppEditorSideBar"},[t("div",{staticClass:"item",class:{active:"object_tree"===e.secondarySidebarType},attrs:{title:"对象"},on:{click:function(t){"object_tree"===e.secondarySidebarType?e.secondarySidebarType="none":e.secondarySidebarType="object_tree"}}},[t("font-awesome-icon",{attrs:{icon:["fas","list-ul"]}})],1),t("div",{staticClass:"item",class:{active:"image"===e.secondarySidebarType},attrs:{title:"图片"},on:{click:function(t){"image"===e.secondarySidebarType?e.secondarySidebarType="none":e.secondarySidebarType="image"}}},[t("font-awesome-icon",{attrs:{icon:["far","image"]}})],1),t("div",{staticClass:"item",class:{active:"theme"===e.secondarySidebarType},attrs:{title:"主题"},on:{click:function(t){"theme"===e.secondarySidebarType?e.secondarySidebarType="none":e.secondarySidebarType="theme"}}},[t("font-awesome-icon",{attrs:{icon:["fas","palette"]}})],1),t("div",{staticClass:"item",class:{active:"log"===e.secondarySidebarType},attrs:{title:"日志"},on:{click:function(t){"log"===e.secondarySidebarType?e.secondarySidebarType="none":e.secondarySidebarType="log"}}},[t("font-awesome-icon",{attrs:{icon:["far","file-alt"]}})],1),t("div",{staticClass:"item"},[t("font-awesome-icon",{attrs:{icon:["far","copy"]}})],1)])},m=[];let j=class extends s["f"]{get secondarySidebarType(){return this.editor.secondarySidebarType}set secondarySidebarType(e){this.editor.secondarySidebarType=e}};Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(p="undefined"!==typeof io&&io)?p:Object)],j.prototype,"editor",void 0),j=Object(a["a"])([s["a"]],j);var O,v,C=j,x=C,w=(i("198e"),Object(b["a"])(x,y,m,!1,null,"38c19cae",null)),S=w.exports,_=i("9e0a"),A=i("0b7a"),D=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"ObjectTreePanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("对象管理器")]),t("div",{staticClass:"body"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"对象",name:"obj"}},[t("el-tree",{ref:"tree",attrs:{"node-key":"id",draggable:"",data:e.treeData,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"render-content":e.renderContent,indent:10,"default-expanded-keys":e.expandedKeys},on:{"node-drag-over":e.handleNodeDragOver,"node-drag-start":e.handleNodeDragStart,"node-drop":e.handleNodeDrop,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse}})],1),t("el-collapse-item",{attrs:{title:e.pageEditor||e.combinationEditor?"图层":"图层（当前不存在图层）",name:"layer"}},[e.pageEditor||e.combinationEditor?t("LayersPanel",{attrs:{pageEditor:e.pageEditor||e.combinationEditor}}):e._e()],1),t("el-collapse-item",{attrs:{title:"组件",name:"widgetDefinition"}},[t("WidgetDefinitions")],1)],1)],1)])},W=[],E=i("3b9d"),k=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetDefinitions"},[t("div",{ref:"collapse"},[t("el-select",{staticClass:"group-select",attrs:{size:"mini"},model:{value:e.selectedGroupName,callback:function(t){e.selectedGroupName=t},expression:"selectedGroupName"}},[t("el-option",{attrs:{label:"全部",value:"_all"}}),t("el-option",{attrs:{label:"自定义",value:"_custom"}}),e._l(e.widgetDefinitionGroups,(function(e){return t("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})}))],2),t("el-input",{attrs:{placeholder:"请输入组件名称",size:"mini"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),t("el-collapse",{staticClass:"widget-collapse"},[e._l(e.widgetDefinitionGroups,(function(i){return t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"_all"===e.selectedGroupName||e.selectedGroupName===i.name,expression:"selectedGroupName === '_all' || selectedGroupName === widgetDefinitionGroup.name"}],key:i.name,attrs:{name:i.displayName,title:i.displayName+" ("+e.filterName(i.widgetDefinitions).length+")"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.filterName(i.widgetDefinitions),(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1)})),t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"_all"===e.selectedGroupName||"_custom"===e.selectedGroupName,expression:"selectedGroupName === '_all' || selectedGroupName === '_custom'"}],attrs:{name:"自定义组件",title:"自定义组件 ("+e.filterName(e.widgetDefinitionsOfCustomWidgetDefinitions).length+")"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.filterName(e.widgetDefinitionsOfCustomWidgetDefinitions),(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1),e.showCombination?t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"_all"===e.selectedGroupName||"_custom"===e.selectedGroupName,expression:"selectedGroupName === '_all' || selectedGroupName === '_custom'"}],attrs:{name:"自定义组合",title:"自定义组合 ("+e.filterName(e.widgetDefinitionsOfCombinations).length+")"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.filterName(e.widgetDefinitionsOfCombinations),(function(i){return t("el-col",{key:i.name,attrs:{span:24},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1):e._e()],2)],1)])},T=[];let I=class extends s["f"]{constructor(){super(...arguments),this.searchName="",this.selectedGroupName="_all"}get currentObjEditorInfo(){return this.editor.currentObjEditorInfo}get pageEditor(){var e;return"PageConfig"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.pageEditor:null}get combinationEditor(){var e;return"Combination"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.combinationEditor:null}get showCombination(){return!this.combinationEditor}get widgetDefinitionGroups(){return this.context.widgetDefinitionGroups}get widgetDefinitionsOfCustomWidgetDefinitions(){return this.context.widgetDefinitionsOfCustomWidgetDefinitions}get widgetDefinitionsOfCombinations(){return this.context.widgetDefinitionsOfCombinations}async addWidgetDefinitionToLayer(e){var t,i;const n=(null===(t=this.pageEditor)||void 0===t?void 0:t.pageConfig.widgets)||(null===(i=this.combinationEditor)||void 0===i?void 0:i.combination.widgets)||[],o=await this.context.generateWidgetConfig(e);this.combinationEditor&&(o.dataSource.functionBody="const combinationData = widgetWrapper.combinationData\n"+o.dataSource.functionBody),n.unshift(o)}handleWidgetDragStart(e,t){t.dataTransfer&&(t.dataTransfer.setData("widgetdefinitionid",e.id),t.dataTransfer.setData("isBaseWidgetdefinition","true"))}filterName(e){return e.filter(e=>-1!==e.displayName.indexOf(this.searchName))}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(O="undefined"!==typeof _["a"]&&_["a"])?O:Object)],I.prototype,"context",void 0),Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(v="undefined"!==typeof io&&io)?v:Object)],I.prototype,"editor",void 0),I=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],LayersPanel:()=>Promise.resolve().then(i.bind(null,"4a8a"))}})],I);var N,P,M=I,B=M,L=(i("cf22"),Object(b["a"])(B,k,T,!1,null,"061e2d1f",null)),R=L.exports;const F=i("f059"),$=e=>e.keys().map(e),z=$(F),G={folderSuffix:"FolderTreeNode",fileSuffix:"TreeNode"};let V=class extends s["f"]{constructor(){super(...arguments),this.activeNames=["obj","layer"],this.expandedKeys=[]}get pageEditor(){var e;return"PageConfig"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.pageEditor:null}get combinationEditor(){var e;return"Combination"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.combinationEditor:null}get treeData(){const e=this.context.applicationConfig,t=e.pageConfigList,i=e.customWidgetDefinitions,n=this.context.widgetDefinitionGroups,o=e.combinations,a=e.imageAssets,s=e.userScripts,r=e.dataSources,c=e.interactionTriggers,d={isFolder:!1,id:e.id,type:"ApplicationConfig",object:e},l={isFolder:!0,id:"PageConfigFolder",type:"PageConfig",children:t.map(e=>({isFolder:!1,id:e.id,type:"PageConfig",object:e}))},p=(n.map(e=>({isFolder:!0,id:e.id,type:"WidgetDefinitionGroup",object:e,children:e.widgetDefinitions.map(e=>({isFolder:!1,id:e.id,type:"WidgetDefinition",object:e}))})),{isFolder:!0,id:"CustomWidgetDefinitionFolder",type:"CustomWidgetDefinition",children:i.map(e=>({isFolder:!1,id:e.id,type:"CustomWidgetDefinition",object:e}))}),u={isFolder:!0,id:"CombinationFolder",type:"Combination",children:o.map(e=>({isFolder:!1,id:e.id,type:"Combination",object:e}))},f={isFolder:!0,id:"ImageAssetFolder",type:"ImageAsset",children:a.map(e=>({isFolder:!1,id:e.id,type:"ImageAsset",object:e}))},b={isFolder:!0,id:"DataSourceConfigFolder",type:"DataSourceConfig",children:r.map(e=>({isFolder:!1,id:e.id,type:"DataSourceConfig",object:e}))},g={isFolder:!0,id:"interactionTriggerFolderTreeNode",type:"InteractionTrigger",children:c.map(e=>({isFolder:!1,id:e.id,type:"InteractionTrigger",object:e}))},h={isFolder:!0,id:"UserScriptFolder",type:"UserScript",children:s.map(e=>({isFolder:!1,id:e.id,type:"UserScript",object:e}))},y={isFolder:!1,id:"VariableFolder",type:"Variable",object:e,children:[]};return[l,p,u,f,b,g,h,y,d]}get currentObjEditorInfo(){return this.editor.currentObjEditorInfo}allowDrag(e){const t=["PageConfig","WidgetDefinition","CustomWidgetDefinition","Combination"],{type:i,isFolder:n}=e.data;if(t.includes(i)&&!n)return!0}allowDrop(e,t,i){return"inner"!==i&&!t.data.isFolder&&("PageConfig"===e.data.type&&"PageConfig"===t.data.type)}renderContent(e,t){const{type:i,isFolder:n}=t.data,o=z.find(e=>{let t=G.folderSuffix;return n||(t=G.fileSuffix),e.default.name===i+t});return e(o.default,{props:{treeContext:t}})}handleNodeDragOver(e,t,i){i.dataTransfer&&e.data.type===t.data.type&&!t.data.isFolder&&(i.dataTransfer.dropEffect="move")}handleNodeDragStart(e,t){const i=e.data.type,n=e.data.isFolder;"WidgetDefinition"===i&&!n&&t.dataTransfer&&(t.dataTransfer.clearData(),t.dataTransfer.setData("widgetdefinitionid",e.data.id),t.dataTransfer.setData("isBaseWidgetdefinition","true")),"CustomWidgetDefinition"===i&&!n&&t.dataTransfer&&(t.dataTransfer.clearData(),t.dataTransfer.setData("widgetdefinitionid","WidgetDefinition|"+e.data.id),t.dataTransfer.setData("isBaseWidgetdefinition","true")),"Combination"===i&&!n&&t.dataTransfer&&(t.dataTransfer.clearData(),t.dataTransfer.setData("widgetdefinitionid","WidgetDefinition|"+e.data.id))}handleNodeDrop(e){const t=e.data.type;if("PageConfig"===t){var i;const e=this.context.applicationConfig;e.pageConfigList=(null===(i=this.treeData[0])||void 0===i||null===(i=i.children)||void 0===i?void 0:i.map((function(e){return e.object})))||[]}}handleNodeExpand(e){const t=this.expandedKeys;-1===t.indexOf(e.id)&&t.push(e.id)}handleNodeCollapse(e,t){const i=this.expandedKeys;function n(e){const t=i.indexOf(e.data.id);e.expanded=!1,-1!==t&&i.splice(t,1)}n(t),this.$nextTick(()=>{n(t)})}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(N="undefined"!==typeof _["a"]&&_["a"])?N:Object)],V.prototype,"context",void 0),Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(P="undefined"!==typeof io&&io)?P:Object)],V.prototype,"editor",void 0),V=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],WidgetDefinitions:R,LayersPanel:()=>Promise.resolve().then(i.bind(null,"4a8a"))}})],V);var q,J,U=V,X=U,Y=(i("8bd3"),Object(b["a"])(X,D,W,!1,null,"2cec0903",null)),H=Y.exports,Z=i("cb7e"),Q=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ObjectEditorTab"},[t("div",{ref:"tabs",staticClass:"tabs",on:{"&wheel":function(t){return e.handleWhell.apply(null,arguments)}}},[t("vue-drag",{model:{value:e.editorInfos,callback:function(t){e.editorInfos=t},expression:"editorInfos"}},e._l(e.editorInfos,(function(i){return t("div",{key:i.obj.id+i.subtype,ref:i.obj.id+i.subtype,refInFor:!0,staticClass:"tab",class:{active:e.isActive(i),preview:i.preview,[i.type]:!0},on:{click:function(t){return e.handleClick(i)},dragstart:function(t){return e.handleClick(i)},dblclick:function(t){return e.handleDbClick(i)}}},["ApplicationConfig"!==i.type||i.subtype?e._e():t("font-awesome-icon",{staticClass:"icon ApplicationConfig",attrs:{icon:["fas","th-large"]}}),"ApplicationConfig"===i.type&&"variable"===i.subtype?t("font-awesome-icon",{staticClass:"icon ApplicationConfig-subscript",attrs:{icon:["fas","subscript"]}}):e._e(),"PageConfig"===i.type?t("font-awesome-icon",{staticClass:"icon PageConfig",attrs:{icon:["fas","tv"]}}):e._e(),"CustomWidgetDefinition"===i.type?t("font-awesome-icon",{staticClass:"icon CustomWidgetDefinition",attrs:{icon:["fab","vuejs"]}}):e._e(),"Combination"===i.type?t("font-awesome-icon",{staticClass:"icon Combination",attrs:{icon:["fas","cubes"]}}):e._e(),"DataSourceConfig"===i.type?t("font-awesome-icon",{staticClass:"icon DataSourceConfig",attrs:{icon:["fas","database"]}}):e._e(),"InteractionTrigger"===i.type?t("font-awesome-icon",{staticClass:"icon InteractionTrigger",attrs:{icon:["fas","scroll"]}}):e._e(),"UserScript"===i.type?t("font-awesome-icon",{staticClass:"icon UserScript",attrs:{icon:["fas","code"]}}):e._e(),"ImageAsset"===i.type?t("font-awesome-icon",{staticClass:"icon ImageAsset",attrs:{icon:["far","image"]}}):e._e(),"ApplicationConfig"===i.type&&"variable"===i.subtype?t("span",[e._v("变量列表")]):t("span",[e._v(e._s(i.obj.name))]),t("font-awesome-icon",{staticClass:"close-icon",attrs:{title:"关闭（ALT + f4）",icon:["fas","times"]},on:{click:function(t){return t.stopPropagation(),e.handleCloseBtnClick(i)}}})],1)})),0)],1),e._l(e.editorInfos,(function(i){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentObjEditorInfo&&e.currentObjEditorInfo===i,expression:"\n      currentObjEditorInfo &&\n      currentObjEditorInfo === editorInfo\n    "}],key:i.obj.id+i.subtype,staticClass:"editor"},["PageConfig"===i.type?t("PageEditor",{ref:"pageEditor",refInFor:!0,attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"CustomWidgetDefinition"===i.type?t("CustomWidgetEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"Combination"===i.type?t("CombinationEditor",{ref:"combinationEditor",refInFor:!0,attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"ApplicationConfig"!==i.type||i.subtype?e._e():t("ApplicationConfigEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}),"ApplicationConfig"===i.type&&"variable"===i.subtype?t("ApplicationConfigVariableEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"DataSourceConfig"===i.type?t("DataSourceEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"InteractionTrigger"===i.type?t("InteractionTriggerEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"UserScript"===i.type?t("UserScriptEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e(),"ImageAsset"===i.type?t("ImageAssetEditor",{attrs:{active:e.currentObjEditorInfo===i,objEditorInfo:i}}):e._e()],1)}))],2)},K=[],ee=i("b76a"),te=i.n(ee),ie=i("67b0"),ne=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CustomWidgetEditor"},[t("div",{staticClass:"main"},[t("OperatingSpace",{ref:"operatingSpace",staticClass:"operating-space",attrs:{widgetConfigs:[],dragable:!0}},[t("Renderer",{ref:"renderer",staticClass:"renderer",attrs:{pageConfig:e.pageConfig}})],1)],1),t("CustomWidgetConfigPanel",{staticClass:"config-panel",attrs:{widgetConfig:e.widgetConfig,customWidgetDefinition:e.customWidgetDefinition,getScreenshot:e.getScreenshot}}),t("CommonPanel",{staticClass:"data-editor",scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v("默认数据")])]},proxy:!0}])},[t("MonacoEditor",{key:"static",staticClass:"monaco-editor",attrs:{language:"json"},model:{value:e.customWidgetDefinition.staticData,callback:function(t){e.$set(e.customWidgetDefinition,"staticData",t)},expression:"customWidgetDefinition.staticData"}})],1)],1)},oe=[],ae=i("f850"),se=i("b4dd"),re=i("566c"),ce=i("6f49"),de=i("7fe8"),le=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"CustomWidgetConfigPanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("定义")])]),t("div",{staticClass:"body"},[t("div",{staticClass:"base-info"},[t("el-form",{ref:"form",attrs:{model:e.customWidgetDefinition,"label-position":"left","label-width":"75px"}},[t("el-form-item",{attrs:{label:"组件名称"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.customWidgetDefinition.name,callback:function(t){e.$set(e.customWidgetDefinition,"name",t)},expression:"customWidgetDefinition.name"}})],1),t("el-form-item",{attrs:{label:"组件类型"}},[t("el-select",{attrs:{size:"mini"},model:{value:e.customWidgetDefinition.type,callback:function(t){e.$set(e.customWidgetDefinition,"type",t)},expression:"customWidgetDefinition.type"}},[t("el-option",{attrs:{label:"简单组件",value:"simple"}}),t("el-option",{attrs:{label:"Echarts组件",value:"echarts"}}),t("el-option",{attrs:{label:"D3组件",value:"d3"}})],1)],1),t("el-form-item",{attrs:{label:"默认宽度"}},[t("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:1200},model:{value:e.customWidgetDefinition.width,callback:function(t){e.$set(e.customWidgetDefinition,"width",t)},expression:"customWidgetDefinition.width"}})],1),t("el-form-item",{attrs:{label:"默认高度"}},[t("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:1200},model:{value:e.customWidgetDefinition.height,callback:function(t){e.$set(e.customWidgetDefinition,"height",t)},expression:"customWidgetDefinition.height"}})],1),"echarts"===e.customWidgetDefinition.type?t("el-form-item",{attrs:{label:"配置函数"}},[t("MonacoEditor",{key:"echartsOptionFn",staticClass:"monaco-editor",attrs:{language:"javascript"},model:{value:e.customWidgetDefinition.echartsOptionFn,callback:function(t){e.$set(e.customWidgetDefinition,"echartsOptionFn",t)},expression:"customWidgetDefinition.echartsOptionFn"}},[t("div",{staticClass:"code"},[t("span",{staticClass:"mark"},[e._v("function")]),e._v(" getEchartsOption(data, $attrs) {")]),t("div",{staticClass:"code",attrs:{slot:"after"},slot:"after"},[e._v("}")])])],1):"d3"===e.customWidgetDefinition.type?t("el-form-item",{attrs:{label:"D3函数"}},[t("MonacoEditor",{key:"d3UpateFn",staticClass:"monaco-editor",attrs:{language:"javascript"},model:{value:e.customWidgetDefinition.d3UpateFn,callback:function(t){e.$set(e.customWidgetDefinition,"d3UpateFn",t)},expression:"customWidgetDefinition.d3UpateFn"}},[t("div",{staticClass:"code"},[t("span",{staticClass:"mark"},[e._v("function")]),e._v(" d3Update(data, attrs, d3) {")]),t("div",{staticClass:"code",attrs:{slot:"after"},slot:"after"},[e._v("}")])])],1):t("el-form-item",{attrs:{label:"模板"}},[t("MonacoEditor",{key:"template",staticClass:"monaco-editor",attrs:{language:"html"},model:{value:e.customWidgetDefinition.template,callback:function(t){e.$set(e.customWidgetDefinition,"template",t)},expression:"customWidgetDefinition.template"}})],1),t("AttrItem",{staticClass:"from-item",attrs:{object:e.customWidgetDefinition,label:"缩略图",prop:"icon",type:"Screenshot",getScreenshot:e.getScreenshot}})],1)],1)])])},pe=[],ue=i("8376"),fe=i("5edc"),be=i("e58b");let ge=class extends s["f"]{handel(){this.widgetConfig.dataSource.staticData=this.customWidgetDefinition.staticData}};Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(q="undefined"!==typeof ue["a"]&&ue["a"])?q:Object)],ge.prototype,"customWidgetDefinition",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type","function"===typeof(J="undefined"!==typeof de["a"]&&de["a"])?J:Object)],ge.prototype,"widgetConfig",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type",Function)],ge.prototype,"getScreenshot",void 0),Object(a["a"])([Object(s["g"])("customWidgetDefinition.staticData",{immediate:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],ge.prototype,"handel",null),ge=Object(a["a"])([Object(s["a"])({components:{MonacoEditor:fe["a"],AttrItem:be["a"],CommonPanel:E["a"],VariableSizeZone:Z["a"]}})],ge);var he,ye,me,je=ge,Oe=je,ve=(i("408c"),Object(b["a"])(Oe,le,pe,!1,null,"c4431f04",null)),Ce=ve.exports;let xe=class extends s["f"]{get customWidgetDefinition(){return this.objEditorInfo.obj}get widgetDefinition(){return this.context.getWidgetDefinitionForCustomWidgetDefinition(this.customWidgetDefinition)}get widgetConfig(){if(this.widgetDefinition){const e=this.context.generateWidgetConfigSync(this.widgetDefinition);return e&&(e.dataSource.staticData=this.customWidgetDefinition.staticData),e||new de["a"]}return new de["a"]}get pageConfig(){const e=new ce["a"];return e.widgets.push(this.widgetConfig),e.bgColor="rgba(0,0,0,0)",e.width=this.customWidgetDefinition.width,e.height=this.customWidgetDefinition.height,e}getScreenshot(){return this.operatingSpace.getScreenshot()}get widgetConfigs(){return this.pageConfig.widgets}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(he="undefined"!==typeof _["a"]&&_["a"])?he:Object)],xe.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(ye="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?ye:Object)],xe.prototype,"objEditorInfo",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!0}),Object(a["b"])("design:type",Boolean)],xe.prototype,"active",void 0),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(me="undefined"!==typeof se["a"]&&se["a"])?me:Object)],xe.prototype,"operatingSpace",void 0),xe=Object(a["a"])([Object(s["a"])({components:{OperatingSpace:se["a"],Renderer:re["a"],CustomWidgetConfigPanel:Ce,CommonPanel:E["a"],MonacoEditor:fe["a"]}})],xe);var we,Se=xe,_e=Se,Ae=(i("0cfbb"),Object(b["a"])(_e,ne,oe,!1,null,"345f4bdb",null)),De=Ae.exports,We=i("271c"),Ee=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ApplicationConfigEditor"},[e.active?t("Director",{attrs:{applicationConfig:e.applicationConfig}}):e._e()],1)},ke=[],Te=i("a9a7");let Ie=class extends s["f"]{get applicationConfig(){return this.objEditorInfo.obj}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(we="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?we:Object)],Ie.prototype,"objEditorInfo",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1}),Object(a["b"])("design:type",Boolean)],Ie.prototype,"active",void 0),Ie=Object(a["a"])([Object(s["a"])({components:{Director:Te["a"]}})],Ie);var Ne,Pe=Ie,Me=Pe,Be=(i("b9e4"),Object(b["a"])(Me,Ee,ke,!1,null,"77625b4a",null)),Le=Be.exports,Re=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"UserScriptEditor"},[t("MonacoEditor",{key:"echartsOptionFn",staticClass:"monaco-editor",attrs:{language:"javascript",libSource:e.libSource},model:{value:e.userScript.code,callback:function(t){e.$set(e.userScript,"code",t)},expression:"userScript.code"}},[t("div",{staticClass:"code"},[t("span",{staticClass:"mark"},[e._v("async function")]),e._v(" userFn(context, director, axios) {")]),t("div",{staticClass:"code",attrs:{slot:"after"},slot:"after"},[e._v("}")])])],1)},Fe=[],$e=i("aa2e"),ze=i("47d1");let Ge=class extends s["f"]{get libSource(){return[$e["a"],ze["a"]].join("/n")}get userScript(){return this.objEditorInfo.obj}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(Ne="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?Ne:Object)],Ge.prototype,"objEditorInfo",void 0),Ge=Object(a["a"])([Object(s["a"])({components:{MonacoEditor:fe["a"]}})],Ge);var Ve,qe=Ge,Je=qe,Ue=(i("7f61"),Object(b["a"])(Je,Re,Fe,!1,null,"38302b45",null)),Xe=Ue.exports,Ye=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"DataSourceEditor"},[t("DataSourceConfigEditor",{attrs:{dataSourceConfig:e.dataSourceConfig}})],1)},He=[],Ze=i("794b");let Qe=class extends s["f"]{get dataSourceConfig(){return this.objEditorInfo.obj}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(Ve="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?Ve:Object)],Qe.prototype,"objEditorInfo",void 0),Qe=Object(a["a"])([Object(s["a"])({components:{DataSourceConfigEditor:Ze["a"]}})],Qe);var Ke,et=Qe,tt=et,it=(i("8ea5"),Object(b["a"])(tt,Ye,He,!1,null,"8197d28a",null)),nt=it.exports,ot=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"InteractionTriggerEditor"},[t("div",{class:!e.selectedNode||"event-node"!==e.selectedNode.type&&"action-node"!==e.selectedNode.type&&"parameter-node"!==e.selectedNode.type?"":"tree-panel"},[t("el-tree",{key:"tree",attrs:{draggable:"","auto-expand-parent":"","node-key":"id",data:e.treeData,"render-content":e.renderContent,"expand-on-click-node":!1,"default-expanded-keys":e.expandedKeys,"allow-drop":e.allowDrop},on:{"node-drag-start":e.handleNodeDragStart,"node-drop":e.handleNodeDrop,"node-contextmenu":e.handleNodeContextmenu,"node-click":e.handleNodeClick,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse}})],1),!e.selectedNode||"event-node"!==e.selectedNode.type&&"action-node"!==e.selectedNode.type&&"parameter-node"!==e.selectedNode.type?e._e():t("div",{staticClass:"config-panel"},["event-node"===e.selectedNode.type?t("EventTreeNodeConfigPanel",{key:e.interactionTrigger.id,attrs:{interactionTrigger:e.interactionTrigger,triggerOptions:e.triggerOptions,getEvents:e.getEvents}}):e._e(),"action-node"===e.selectedNode.type||"parameter-node"===e.selectedNode.type?t("ActionTreeNodeConfigPanel",{key:e.selectedNode.action.id,attrs:{interactionAction:e.selectedNode.action,executorOptions:e.executorOptions,getActions:e.getActions}}):e._e()],1)])},at=[],st=i("edd5"),rt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"EventTreeNode",class:{selected:e.selected}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","chess"]}}),t("span",{staticClass:"info",class:e.triggerName.status},[e._v(e._s(e.triggerName.value))]),t("span",{staticStyle:{margin:"0 5px"}},[e._v("的")]),t("span",{staticClass:"info",class:e.eventName.status},[e._v(e._s(e.eventName.value))]),t("span",{staticStyle:{margin:"0 5px"}},[e._v("事件")])],1)},ct=[];let dt=class extends s["f"]{get eventsMap(){const e={},t=this.getEvents(this.interactionTrigger.triggerId);return t.forEach(t=>{e[t.type]=t.displayName}),e}get triggerName(){const e=this.triggerOptionsMap[this.interactionTrigger.triggerId];return null===e||void 0===e?{status:"error",value:this.interactionTrigger.triggerId||"未设置"}:{status:"",value:e}}get eventName(){const e=this.eventsMap[this.interactionTrigger.eventType];return null===e||void 0===e?{status:"error",value:this.interactionTrigger.eventType||"未设置"}:{status:"",value:e}}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type","function"===typeof(Ke="undefined"!==typeof st["b"]&&st["b"])?Ke:Object)],dt.prototype,"interactionTrigger",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],dt.prototype,"triggerOptionsMap",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,default:!1}),Object(a["b"])("design:type",Boolean)],dt.prototype,"selected",void 0),Object(a["a"])([Object(s["c"])({type:Function,default:()=>[]}),Object(a["b"])("design:type",Function)],dt.prototype,"getEvents",void 0),dt=Object(a["a"])([s["a"]],dt);var lt,pt=dt,ut=pt,ft=(i("6d28"),Object(b["a"])(ut,rt,ct,!1,null,"3fd3e116",null)),bt=ft.exports,gt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"EventTreeNodeConfigPanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("事件")])]),t("el-form",{attrs:{"label-width":"73px"}},[t("el-form-item",{attrs:{label:"事件来源"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.interactionTrigger.triggerId,callback:function(t){e.$set(e.interactionTrigger,"triggerId",t)},expression:"interactionTrigger.triggerId"}},e._l(e.triggerOptions,(function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}},[t("span",[e._v(e._s(i.label))])])})),1)],1),t("el-form-item",{attrs:{label:"事件类型"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.interactionTrigger.eventType,callback:function(t){e.$set(e.interactionTrigger,"eventType",t)},expression:"interactionTrigger.eventType"}},e._l(e.eventOptions,(function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}},[t("span",[e._v(e._s(i.label))])])})),1)],1)],1)],1)},ht=[];let yt=class extends s["f"]{get events(){return this.getEvents(this.interactionTrigger.triggerId)}get eventOptions(){const e=this.events;return e.map(e=>({label:e.displayName,value:e.type}))}checkEventOptions(){const e=this.eventOptions.find(e=>e.value===this.interactionTrigger.eventType);e||(this.interactionTrigger.eventType="")}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type","function"===typeof(lt="undefined"!==typeof st["b"]&&st["b"])?lt:Object)],yt.prototype,"interactionTrigger",void 0),Object(a["a"])([Object(s["c"])({type:Array,default:[]}),Object(a["b"])("design:type",Object)],yt.prototype,"triggerOptions",void 0),Object(a["a"])([Object(s["c"])({type:Function,default:()=>[]}),Object(a["b"])("design:type",Function)],yt.prototype,"getEvents",void 0),Object(a["a"])([Object(s["g"])("interactionTrigger.triggerId"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],yt.prototype,"checkEventOptions",null),yt=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"]}})],yt);var mt,jt=yt,Ot=jt,vt=(i("ba22"),Object(b["a"])(Ot,gt,ht,!1,null,"449281a9",null)),Ct=vt.exports,xt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ActionTreeNode",class:{selected:e.selected}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["far","hand-rock"]}}),t("span",[e._v("执行者：")]),t("span",{staticClass:"info",class:e.executorName.status},[e._v(e._s(e.executorName.value))]),t("span",{staticStyle:{"margin-left":"5px"}},[e._v("执行")]),t("span",{staticStyle:{"margin-left":"5px"}},[e._v("动作：")]),t("span",{staticClass:"info",class:e.actionName.status},[e._v(e._s(e.actionName.value))]),t("span",{staticStyle:{"margin-left":"5px"}},[e._v("参数：")]),t("span",[e._v(e._s(e.parametersShowText))])],1)},wt=[];let St=class extends s["f"]{get actionTypeMap(){const e={},t=this.getActions(this.interactionAction.executorId);return t.forEach(t=>{e[t.type]=t.displayName}),e}get executorName(){const e=this.executorOptionsMap[this.interactionAction.executorId];return null===e||void 0===e?{status:"error",value:this.interactionAction.executorId||"未设置"}:{status:"",value:e}}get actionName(){const e=this.actionTypeMap[this.interactionAction.actionType];return null===e||void 0===e?{status:"error",value:this.interactionAction.actionType||"未设置"}:{status:"",value:e}}get parametersShowText(){return"["+this.interactionAction.parameters.map(e=>"object"===typeof e?"object":e).join(",")+"]"}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type","function"===typeof(mt="undefined"!==typeof st["a"]&&st["a"])?mt:Object)],St.prototype,"interactionAction",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],St.prototype,"executorOptionsMap",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,default:!1}),Object(a["b"])("design:type",Boolean)],St.prototype,"selected",void 0),Object(a["a"])([Object(s["c"])({type:Function,default:()=>[]}),Object(a["b"])("design:type",Function)],St.prototype,"getActions",void 0),St=Object(a["a"])([s["a"]],St);var _t,At,Dt=St,Wt=Dt,Et=(i("d872"),Object(b["a"])(Wt,xt,wt,!1,null,"678b5efd",null)),kt=Et.exports,Tt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"ActionTreeNodeConfigPanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("动作")])]),t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"动作执行者"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.interactionAction.executorId,callback:function(t){e.$set(e.interactionAction,"executorId",t)},expression:"interactionAction.executorId"}},e._l(e.executorOptions,(function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}},[t("span",[e._v(e._s(i.label))])])})),1)],1),t("el-form-item",{attrs:{label:"动作类型"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.interactionAction.actionType,callback:function(t){e.$set(e.interactionAction,"actionType",t)},expression:"interactionAction.actionType"}},e._l(e.actionOptions,(function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}},[t("span",[e._v(e._s(i.label))])])})),1)],1),e._l(e.actionTypeParameters,(function(i,n){return["actions"!==i.valueType?t("el-form-item",{key:e.interactionAction.actionType+"-"+n,attrs:{label:i.displayName+(i.unit?"("+i.unit+")":"")}},["number"===i.valueType?t("el-input-number",{staticClass:"input",attrs:{"controls-position":"right",size:"mini",min:i.min,max:i.max,step:i.step},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.interactionAction.parameters[n],callback:function(t){e.$set(e.interactionAction.parameters,n,t)},expression:"interactionAction.parameters[index]"}}):e._e(),"variable"===i.valueType?t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.interactionAction.parameters[n],callback:function(t){e.$set(e.interactionAction.parameters,n,t)},expression:"interactionAction.parameters[index]"}},e._l(e.variableOptions,(function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}},[t("span",[e._v(e._s(i.label))])])})),1):e._e(),"expression"===i.valueType?t("el-input",{attrs:{type:"textarea",rows:1,size:"mini",placeholder:"表达式"},model:{value:e.interactionAction.parameters[n],callback:function(t){e.$set(e.interactionAction.parameters,n,t)},expression:"interactionAction.parameters[index]"}}):e._e()],1):e._e()]}))],2)],1)},It=[],Nt=i("cd3f"),Pt=i.n(Nt);let Mt=class extends s["f"]{get actions(){return this.getActions(this.interactionAction.executorId)}get actionOptions(){const e=this.actions;return e.map(e=>({label:e.displayName,value:e.type}))}get actionType(){return this.actions.find(e=>e.type===this.interactionAction.actionType)}get actionTypeParameters(){var e;return(null===(e=this.actionType)||void 0===e?void 0:e.parameters)||[]}get variableOptions(){const e=this.context.variables;return Object.keys(e).map(e=>({label:e,value:e}))}checkEventOptions(){const e=this.actionOptions.find(e=>e.value===this.interactionAction.actionType);e||(this.interactionAction.actionType="")}checkActionType(){var e;this.actionType&&(this.interactionAction.parameters=(null===(e=this.actionType.parameters)||void 0===e?void 0:e.map(e=>Pt()(e.defaultValue)))||[])}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(_t="undefined"!==typeof _["a"]&&_["a"])?_t:Object)],Mt.prototype,"context",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type","function"===typeof(At="undefined"!==typeof st["a"]&&st["a"])?At:Object)],Mt.prototype,"interactionAction",void 0),Object(a["a"])([Object(s["c"])({type:Array,default:[]}),Object(a["b"])("design:type",Object)],Mt.prototype,"executorOptions",void 0),Object(a["a"])([Object(s["c"])({type:Function,default:()=>[]}),Object(a["b"])("design:type",Function)],Mt.prototype,"getActions",void 0),Object(a["a"])([Object(s["g"])("interactionAction.executorId"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],Mt.prototype,"checkEventOptions",null),Object(a["a"])([Object(s["g"])("interactionAction.actionType"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],Mt.prototype,"checkActionType",null),Mt=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"]}})],Mt);var Bt=Mt,Lt=Bt,Rt=(i("ee5a"),Object(b["a"])(Lt,Tt,It,!1,null,"499af11b",null)),Ft=Rt.exports,$t=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ParameterTreeNode"},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","map-pin"]}}),t("span",[e._v(e._s(e.parameter.displayName))]),t("span",[e._v("：")]),t("span",[e._v(e._s(e.value))]),t("span",{staticClass:"unit"},[e._v(e._s(e.parameter.unit))])],1)},zt=[];let Gt=class extends s["f"]{};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],Gt.prototype,"parameter",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],Gt.prototype,"value",void 0),Gt=Object(a["a"])([s["a"]],Gt);var Vt,qt,Jt,Ut=Gt,Xt=Ut,Yt=(i("c32d"),Object(b["a"])(Xt,$t,zt,!1,null,"e9074152",null)),Ht=Yt.exports;function Zt(e){return"director"===e?[{type:"doWait",displayName:"等待",description:"",parameters:[{displayName:"时间",valueType:"number",defaultValue:1,min:0,step:.1,max:3600,unit:"秒"}]},{type:"doSetVariable",displayName:"设置变量",description:"",parameters:[{displayName:"变量名称",valueType:"variable",defaultValue:""},{displayName:"赋值表达式",valueType:"expression",defaultValue:""}]},{type:"doLoopAction",displayName:"循环执行",description:"",parameters:[{displayName:"时间",valueType:"number",defaultValue:1,min:0,step:.1,max:3600,unit:"秒"},{displayName:"次数",valueType:"number",defaultValue:1,min:0,step:.1,max:9999,unit:"秒"},{displayName:"动作",valueType:"actions",defaultValue:[]}]}]:e.startsWith("WidgetConfig")?[{displayName:"立即移动",type:"doMoveImmediately",parameters:[{displayName:"X轴坐标",valueType:"number",defaultValue:0,min:-9999,max:9999,step:1,unit:"px"},{displayName:"Y轴坐标",valueType:"number",defaultValue:0,min:-9999,max:9999,step:1,unit:"px"}]},{displayName:"移动",type:"doMove",parameters:[{displayName:"X轴坐标",valueType:"number",defaultValue:0,min:-9999,max:9999,step:1,unit:"px"},{displayName:"Y轴坐标",valueType:"number",defaultValue:0,min:-9999,max:9999,step:1,unit:"px"},{displayName:"动画时长",valueType:"number",defaultValue:1e3,min:0,max:9999,step:1,unit:"ms"},{displayName:"动画延迟",valueType:"number",defaultValue:0,min:0,max:9999,step:1,unit:"ms"}]}]:[]}let Qt=class extends s["f"]{constructor(){super(...arguments),this.selectedNode=null,this.expandedKeys=["event-classification-node","action-classification-node"],this.parentTreeNode=null}get interactionTrigger(){return this.objEditorInfo.obj}get treeData(){const e=this.interactionTrigger.actions,t=e=>{const i=this.getActions(e.executorId),n=i.find(t=>t.type===e.actionType),o=(null===n||void 0===n?void 0:n.parameters)||[];return{type:"action-node",id:e.id,action:e,actionType:n,children:o.map((i,n)=>{if("actions"===i.valueType){const i=e.parameters[n]||[];return{id:"parameter-actions-node"+e.id,type:"parameter-actions-node",value:i,children:i.map(t)}}return{id:"parameter-node-"+e.id+" index-"+n,type:"parameter-node",action:e,parameter:i,value:e.parameters[n]}})}};return[{label:"事件",id:"event-classification-node",type:"event-classification-node",children:[{id:"event-node",type:"event-node"}]},{label:"动作",id:"action-classification-node",type:"action-classification-node",children:e.map(t)}]}get triggerOptions(){const e=[];e.push({label:"全局",value:"director"});const t=this.context.applicationConfig.pageConfigList;return t.forEach(t=>{e.push({label:t.name+"（页面）",value:t.id})}),t.forEach(t=>{const i=t.name;t.widgets.forEach(t=>{t.base.canInteract&&e.push({label:i+"-"+t.base.displayName+(t.isGroup?"（组件组）":"（组件）"),value:t.id}),t.children&&t.children.forEach(n=>{n.base.canInteract&&e.push({label:i+"-"+t.base.displayName+"-"+n.base.displayName+"（组件）",value:n.id})})})}),e}get triggerOptionsMap(){const e={};return this.triggerOptions.forEach(t=>{e[t.value]=t.label}),e}get executorOptions(){return[...this.triggerOptions]}get executorOptionsMap(){const e={};return this.executorOptions.forEach(t=>{e[t.value]=t.label}),e}getEvents(e){if("director"===e)return[{type:"init",displayName:"应用初始化",description:""}];if(e.startsWith("WidgetConfig")){const t=this.context.getWidgetConfig(e),i=this.context.getWidgetDefinition((null===t||void 0===t?void 0:t.widgetDefinitionId)||""),n=(null===i||void 0===i?void 0:i.events)||[];return[{type:"click",displayName:"点击",description:""},...n]}return e.startsWith("PageConfig")?[{type:"activated",displayName:"激活",description:""},{type:"deactivated",displayName:"停用",description:""}]:[]}getActions(e){return Zt(e)}renderContent(e,t){const i=t.data,n=i.type,o=this.triggerOptionsMap,a=this.interactionTrigger,s=this.selectedNode,r=this.getEvents,c=this.executorOptions,d=this.executorOptionsMap,l=this.getActions;if("event-classification-node"===n)return e("div",{},"事件");if("action-classification-node"===n)return e("div",{},[e("span","动作"),e("span",{class:"add-action-btn",on:{click:()=>{this.interactionTrigger.actions.push(new st["a"])}}},"+")]);if("event-node"===n)return e(bt,{props:{interactionTrigger:a,selected:s===i,triggerOptionsMap:o,getEvents:r}});if("action-node"===n){var p;const t=i.action;return e(kt,{props:{interactionAction:t,executorOptions:c,selected:(null===s||void 0===s||null===(p=s.action)||void 0===p?void 0:p.id)===t.id,executorOptionsMap:d,getActions:l}})}if("parameter-node"===n){const t=i.parameter,n=i.value;return e(Ht,{props:{parameter:t,value:n}})}return"parameter-actions-node"===n?e("div",{},[e("span","动作"),e("span",{class:"add-action-btn",on:{click:()=>{i.value.push(new st["a"])}}},"+")]):e("div",{props:{treeContext:t}},i.type)}handleNodeClick(e){this.selectedNode===e?this.selectedNode=null:this.selectedNode=e}allowDrop(e,t,i){if("action-node"===e.data.type){if(("prev"===i||"next"===i)&&"action-node"===t.data.type)return!0;if("inner"===i&&("parameter-actions-node"===t.data.type||"action-classification-node"===t.data.type))return!0}return!1}handleNodeDragStart(e){this.parentTreeNode=e.parent}handleNodeDrop(e,t,i){const n=("before"===i||"after"===i)&&"action-node"===t.data.type,o="inner"===i&&("parameter-actions-node"===t.data.type||"action-classification-node"===t.data.type);if("action-node"===e.data.type)if(this.deleteActionTreeNode(e),n){var a,s;let n=[];"action-classification-node"===(null===(a=t.parent)||void 0===a?void 0:a.data.type)?n=this.interactionTrigger.actions:"parameter-actions-node"===(null===(s=t.parent)||void 0===s?void 0:s.data.type)&&(n=t.parent.data.value);const o=t.data,r=n.indexOf(o.action);"before"===i?n.splice(r,0,e.data.action):"after"===i&&n.splice(r+1,0,e.data.action)}else if(o){let i=[];"action-classification-node"===t.data.type?i=this.interactionTrigger.actions:"parameter-actions-node"===t.data.type&&(i=t.data.value),i.unshift(e.data.action)}}handleNodeContextmenu(e,t,i){let n=[];switch(t.type){case"action-node":n=[{name:"删除",handler:async()=>{await this.$confirm("是否删除选这个动作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.deleteActionTreeNode(i),this.editor.closeContextmenu()}}];break;default:break}n.length&&this.editor.openContextmenu(e.clientX,e.clientY,n)}deleteActionTreeNode(e){const t=e.data,i=e.parent||this.parentTreeNode;if("parameter-actions-node"===(null===i||void 0===i?void 0:i.data.type)){const e=i.data,n=e.value,o=n.indexOf(t.action);o>-1&&n.splice(o,1)}else{const e=this.interactionTrigger.actions,i=e.indexOf(t.action);i>-1&&e.splice(i,1)}this.editor.closeContextmenu()}handleNodeExpand(e){const t=this.expandedKeys;-1===t.indexOf(e.id)&&t.push(e.id)}handleNodeCollapse(e,t){const i=this.expandedKeys;function n(e){const t=i.indexOf(e.data.id);e.expanded=!1,-1!==t&&i.splice(t,1)}n(t),this.$nextTick(()=>{n(t)})}};Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(Vt="undefined"!==typeof io&&io)?Vt:Object)],Qt.prototype,"editor",void 0),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(qt="undefined"!==typeof _["a"]&&_["a"])?qt:Object)],Qt.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(Jt="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?Jt:Object)],Qt.prototype,"objEditorInfo",void 0),Qt=Object(a["a"])([Object(s["a"])({components:{EventTreeNodeConfigPanel:Ct,ActionTreeNodeConfigPanel:Ft}})],Qt);var Kt=Qt,ei=Kt,ti=(i("0783"),Object(b["a"])(ei,ot,at,!1,null,"ece74604",null)),ii=ti.exports,ni=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ApplicationConfigVariableEditor"},[t("div",{staticClass:"tool-bar"},[t("el-button",{staticClass:"new-variable",attrs:{type:"primary",size:"mini"},on:{click:e.createVariable}},[e._v("新建变量")])],1),t("ul",{staticClass:"variable-list"},e._l(e.variables,(function(i){return t("li",{key:i.id},[t("span",{staticClass:"type"},[e._v(e._s(e.getTypeDisplayName(i.type)))]),t("span",{staticClass:"operator"},[e._v(" : ")]),t("span",{staticClass:"variable-name"},[e._v(e._s(i.name))]),t("span",{staticClass:"operator"},[e._v(" = ")]),"string"===i.type?t("span",{staticClass:"value"},[t("span",{staticClass:"operator"},[e._v('"')]),t("span",[e._v(e._s(i.value))]),t("span",{staticClass:"operator"},[e._v('"')])]):t("span",{staticClass:"value"},[e._v(e._s(i.value))]),t("span",{staticClass:"right"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.openVariableEditorDialog(i)}}},[e._v("编辑")]),t("el-button",{staticClass:"delete-button",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteVariable(i)}}},[e._v("删除")])],1)])})),0),t("VariableCreatorDialog",{ref:"variableCreatorDialog",attrs:{variables:e.variables}}),t("VariableEditorDialog",{ref:"variableEditorDialog"})],1)},oi=[],ai=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{staticClass:"VariableCreatorDialog",attrs:{title:"新建变量",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[e.variable?t("div",[t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("变量名称")]),t("el-input",{attrs:{size:"mini"},model:{value:e.variable.name,callback:function(t){e.$set(e.variable,"name",t)},expression:"variable.name"}})],1),t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("变量类型")]),t("el-radio",{attrs:{value:e.type,label:"string"},on:{input:function(t){return e.handleTypeClick("string")}}},[e._v("字符")]),t("el-radio",{attrs:{value:e.type,label:"number"},on:{input:function(t){return e.handleTypeClick("number")}}},[e._v("数字")]),t("el-radio",{attrs:{value:e.type,label:"boolean"},on:{input:function(t){return e.handleTypeClick("boolean")}}},[e._v("布尔")])],1),t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("初始赋值")]),"string"===e.type?t("el-input",{attrs:{size:"mini"},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}}):e._e(),"number"===e.type?t("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}}):e._e(),"boolean"===e.type?t("el-radio",{attrs:{label:!0},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}},[e._v("真")]):e._e(),"boolean"===e.type?t("el-radio",{attrs:{label:!1},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}},[e._v("假")]):e._e()],1),t("div",{staticClass:"input-item-button"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleConfirm}},[e._v("确定")]),t("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.handleCancel}},[e._v("取消")]),t("br")],1)]):e._e()])},si=[],ri=i("ec26");let ci=class extends s["f"]{constructor(){super(...arguments),this.visible=!1,this.variable={id:"",name:"新变量",type:"string",value:"123"}}get type(){return this.variable&&this.variable.type}set type(e){this.variable&&e&&(this.variable.type=e)}open(){return this.visible=!0,this.variable={id:Object(ri["a"])(),name:"新变量",type:"string",value:"123"},new Promise((e,t)=>{this.resolve=e,this.reject=t})}handleTypeChange(e){if(this.variable)switch(e){case"string":this.variable.value=String(this.variable.value);break;case"number":this.variable.value=Number(this.variable.value),isNaN(this.variable.value)&&(this.variable.value=0);break;case"boolean":this.variable.value=Boolean(this.variable.value);break}}async handleTypeClick(e){this.variable.type=e}handleConfirm(){const e=this.variables.find(e=>e.name===this.variable.name);e?this.$message.error("变量名已存在"):(this.resolve(this.variable),this.visible=!1)}handleCancel(){this.reject(),this.visible=!1}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Array)],ci.prototype,"variables",void 0),Object(a["a"])([Object(s["g"])("type"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[String]),Object(a["b"])("design:returntype",void 0)],ci.prototype,"handleTypeChange",null),ci=Object(a["a"])([s["a"]],ci);var di=ci,li=di,pi=(i("5ea6"),Object(b["a"])(li,ai,si,!1,null,"0a7ac58f",null)),ui=pi.exports,fi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{staticClass:"VariableCreatorDialog",attrs:{title:"新建变量",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[e.variable?t("div",[t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("变量名称")]),t("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.variable.name,callback:function(t){e.$set(e.variable,"name",t)},expression:"variable.name"}})],1),t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("变量类型")]),t("el-radio",{attrs:{value:e.type,label:"string",disabled:"string"!==e.type},on:{input:function(t){return e.handleTypeClick("string")}}},[e._v("字符")]),t("el-radio",{attrs:{value:e.type,label:"number",disabled:"number"!==e.type},on:{input:function(t){return e.handleTypeClick("number")}}},[e._v("数字")]),t("el-radio",{attrs:{value:e.type,label:"boolean",disabled:"boolean"!==e.type},on:{input:function(t){return e.handleTypeClick("boolean")}}},[e._v("布尔")])],1),t("div",{staticClass:"input-item"},[t("div",{staticClass:"label"},[e._v("初始赋值")]),"string"===e.type?t("el-input",{attrs:{size:"mini"},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}}):e._e(),"number"===e.type?t("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}}):e._e(),"boolean"===e.type?t("el-radio",{attrs:{label:!0},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}},[e._v("真")]):e._e(),"boolean"===e.type?t("el-radio",{attrs:{label:!1},model:{value:e.variable.value,callback:function(t){e.$set(e.variable,"value",t)},expression:"variable.value"}},[e._v("假")]):e._e()],1)]):e._e()])},bi=[];let gi=class extends s["f"]{constructor(){super(...arguments),this.visible=!1,this.variable=null}get type(){return this.variable&&this.variable.type}set type(e){this.variable&&e&&(this.variable.type=e)}open(e){this.variable=e,this.visible=!0}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Array)],gi.prototype,"variables",void 0),gi=Object(a["a"])([s["a"]],gi);var hi,yi=gi,mi=yi,ji=(i("9f24"),Object(b["a"])(mi,fi,bi,!1,null,"7bc946fa",null)),Oi=ji.exports;let vi=class extends s["f"]{get applicationConfig(){return this.objEditorInfo.obj}get variables(){return this.applicationConfig.variables}getTypeDisplayName(e){switch(e){case"string":return"文本";case"number":return"数字";case"boolean":return"真值"}}async createVariable(){const e=this.$refs.variableCreatorDialog;try{const t=await e.open();this.variables.push(t)}catch(t){}}async deleteVariable(e){try{await this.$confirm("是否删除选中的变量？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=this.variables.indexOf(e);t>-1&&this.variables.splice(t,1)}catch(t){}}openVariableEditorDialog(e){const t=this.$refs.variableEditorDialog;t.open(e)}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(hi="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?hi:Object)],vi.prototype,"objEditorInfo",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1}),Object(a["b"])("design:type",Boolean)],vi.prototype,"active",void 0),vi=Object(a["a"])([Object(s["a"])({components:{VariableCreatorDialog:ui,VariableEditorDialog:Oi}})],vi);var Ci,xi=vi,wi=xi,Si=(i("ba67"),Object(b["a"])(wi,ni,oi,!1,null,"bcf692e8",null)),_i=Si.exports,Ai=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ImageAssetEditor"},[t("div",{staticClass:"url"},[t("input",{ref:"input",staticClass:"id",attrs:{type:"text",disabled:""},domProps:{value:e.imageAsset.url}}),t("span",{staticClass:"copy-btn",attrs:{title:"复制ID"},on:{click:e.copyUrl}},[e._v("复制")])]),t("img",{attrs:{src:e.imageAsset.url,alt:""}})])},Di=[];let Wi=class extends s["f"]{get imageAsset(){return this.objEditorInfo.obj}copyUrl(){const e=this.$refs.input;e.disabled=!1,e.focus(),e.select(),document.execCommand("copy");const t=document.createElement("input");window.document.body.appendChild(t),t.select(),this.$nextTick(()=>{window.document.body.removeChild(t)}),this.$message({message:"ID复制成功",duration:500})}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(Ci="undefined"!==typeof ae["ObjEditorInfo"]&&ae["ObjEditorInfo"])?Ci:Object)],Wi.prototype,"objEditorInfo",void 0),Wi=Object(a["a"])([s["a"]],Wi);var Ei,ki,Ti=Wi,Ii=Ti,Ni=(i("6ad4"),Object(b["a"])(Ii,Ai,Di,!1,null,"0049ad52",null)),Pi=Ni.exports;let Mi=class extends s["f"]{constructor(){super(...arguments),this.pageEditor=null,this.combinationEditor=null}get editorInfos(){return this.editor.editorInfos}set editorInfos(e){this.editor.editorInfos=e}get editorInfosKeys(){return this.editorInfos.map(e=>e.obj.id)}get currentObjEditorInfo(){return this.editor.currentObjEditorInfo}isActive(e){var t,i;return(null===(t=this.editor)||void 0===t||null===(t=t.currentObjEditorInfo)||void 0===t?void 0:t.obj)===e.obj&&(null===(i=this.editor)||void 0===i||null===(i=i.currentObjEditorInfo)||void 0===i?void 0:i.subtype)===e.subtype}handleClick(e){this.editor.previewNimObj(e.obj,e.subtype)}handleDbClick(e){this.editor.openNimObj(e.obj,e.subtype)}handleCloseBtnClick(e){this.editor.closeNimObj(e.obj,e.subtype)}handleWhell(e){const t=e.deltaY/5,i=this.tabs,n=i.scrollLeft;i.scrollTo({left:n+t})}scrollTo(e,t){const i=e.id+t,n=this.$refs[i],o=this.tabs;if(null!==n&&void 0!==n&&n.length){const e=n[0],t=e.getBoundingClientRect(),i=o.getBoundingClientRect(),a=o.scrollLeft;o.scrollTo({left:a+t.x-i.x})}}updated(){var e,t;const i=(null===(e=this.$refs)||void 0===e?void 0:e.pageEditor)||[],n=(null===(t=this.$refs)||void 0===t?void 0:t.combinationEditor)||[];this.pageEditor=i.find(e=>e.objEditorInfo===this.currentObjEditorInfo)||null,this.combinationEditor=n.find(e=>e.objEditorInfo===this.currentObjEditorInfo)||null}};Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(Ei="undefined"!==typeof io&&io)?Ei:Object)],Mi.prototype,"editor",void 0),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(ki="undefined"!==typeof HTMLDivElement&&HTMLDivElement)?ki:Object)],Mi.prototype,"tabs",void 0),Mi=Object(a["a"])([Object(s["a"])({components:{"vue-drag":te.a,PageEditor:ie["a"],CustomWidgetEditor:De,CombinationEditor:We["a"],ApplicationConfigEditor:Le,UserScriptEditor:Xe,DataSourceEditor:nt,InteractionTriggerEditor:ii,ApplicationConfigVariableEditor:_i,ImageAssetEditor:Pi}})],Mi);var Bi,Li=Mi,Ri=Li,Fi=(i("c5e6"),Object(b["a"])(Ri,Q,K,!1,null,"3f0570a6",null)),$i=Fi.exports,zi=i("7314"),Gi=i("3374"),Vi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{staticClass:"AssetDialog",attrs:{title:"图片资源",visible:e.visible,top:"50px",width:"calc(100% - 150px)"},on:{"update:visible":function(t){e.visible=t}}},[t("AssetTableView",{ref:"assetTableView",staticClass:"assets-table",attrs:{"select-model":!0}})],1)},qi=[],Ji=i("234f"),Ui=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"AssetTableView"},[t("div",{staticClass:"tool-bar"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleInputSelectFile}},[e._v("添加新图片")])],1),t("div",{staticClass:"table"},[t("el-row",{attrs:{gutter:20}},e._l(e.imageAssetsPaged,(function(i,n){return t("el-col",{key:n,attrs:{span:4,xs:24,sm:12,md:8,lg:6}},[t("div",{staticClass:"img-item"},[e.selectModel?t("div",{staticClass:"select-text"},[t("el-button",{staticClass:"button",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.selectImageAsset(i)}}},[e._v("选择")]),t("el-button",{staticClass:"button",attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteImage(i)}}},[e._v("删除")])],1):i.isBuiltIn?e._e():t("div",{staticClass:"select-text"},[t("el-button",{staticClass:"button",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteImage(i)}}},[e._v("删除")])],1),t("img",{attrs:{src:e.imageUrl(i)}}),t("span",{staticClass:"image-asset-name"},[e._v(e._s(i.name))]),t("div",{staticClass:"image-asset-info"},[i.isBuiltIn?t("span",{staticClass:"build-in"},[e._v("内置素材")]):t("span",{staticClass:"build-in"},[e._v("导入素材")]),t("span",{staticClass:"image-asset-size"},[e._v(" "+e._s(i.width)+" × "+e._s(i.height)+" "+e._s(i.size&&(i.size/1024).toFixed()+"KB"))])])])])})),1)],1),t("div",[t("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.currentPage,"page-size":12,total:e.imageAssets.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg,image/bmp"},on:{change:e.handleChange}})])},Xi=[],Yi=i("58fb");let Hi=class extends s["f"]{constructor(){super(...arguments),this.currentPage=0}get imageAssets(){const e=this.context.applicationConfig.imageAssets;return e}get imageAssetsFiltered(){return this.imageAssets}get imageAssetsPaged(){const e=this.currentPage;return this.imageAssets.slice(12*(e-1),12*e)}selectFile(){const e=this,t=new Promise((t,i)=>{e.resolve=t,e.reject=i});return t}imageUrl(e){return e.isBuiltIn?e.url:this.context.baseURL+e.url}handleInputSelectFile(){const e=this.$refs.fileInput;e.value="",e.click()}selectImageAsset(e){this.resolve&&this.resolve(e)}async deleteImage(e){try{await this.$confirm("是否删除选中的图片？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=this.imageAssets,i=t.indexOf(e);t.splice(i,1)}catch(t){}}async handleChange(e){const t=e.target;if(t.files&&t.files.length)try{const e=t.files[0],i=await Object(Yi["a"])(e),n=new Gi["a"],o=await this.context.uploadFile(e);n.url=o.url,n.name=o.name,n.width=i.width,n.height=i.height,n.size=i.size,this.imageAssets.push(n),this.currentPage=Math.ceil(this.imageAssets.length/12)}catch(i){}}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(Bi="undefined"!==typeof _["a"]&&_["a"])?Bi:Object)],Hi.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],Hi.prototype,"selectModel",void 0),Hi=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],TxtEditor:Ji["a"]}})],Hi);var Zi,Qi=Hi,Ki=Qi,en=(i("0b69"),Object(b["a"])(Ki,Ui,Xi,!1,null,"8c5cf860",null)),tn=en.exports;let nn=class extends s["f"]{constructor(){super(...arguments),this.visible=!1}async open(){this.visible=!0,await this.$nextTick();const e=await this.assetTableView.selectFile();return this.visible=!1,e}};Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(Zi="undefined"!==typeof tn&&tn)?Zi:Object)],nn.prototype,"assetTableView",void 0),nn=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],AssetTableView:tn,TxtEditor:Ji["a"]}})],nn);var on=nn,an=on,sn=(i("66fd"),Object(b["a"])(an,Vi,qi,!1,null,"841c58e6",null)),rn=sn.exports,cn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"ObjectTreePanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("日志")]),t("div",{staticClass:"body"})])},dn=[];let ln=class extends s["f"]{};ln=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"]}})],ln);var pn,un=ln,fn=un,bn=(i("ad21"),Object(b["a"])(fn,cn,dn,!1,null,"6bcb778b",null)),gn=bn.exports,hn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"ThemePanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("主题")]),t("div",{staticClass:"body"},[e._l(e.themes,(function(i,n){return t("div",{key:"theme-"+n,staticClass:"theme"},[t("div",{staticClass:"theme-name"},[i.builtIn?t("span",[e._v(e._s(i.name))]):t("span",[t("TxtEditor",{staticClass:"txt-editor",attrs:{"click-model":!0},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"theme.name"}}),t("font-awesome-icon",{staticClass:"delete",attrs:{title:"删除",icon:["fas","times"]},on:{click:function(t){return e.deleteTheme(i)}}})],1)]),t("div",{staticClass:"colors-border",style:{"border-color":i.colors[0]}},e._l(2,(function(n){return t("div",{key:n,staticClass:"colors"},e._l(i.colors.slice(6*(n-1),6*n),(function(o,a){return t("el-color-picker",{key:"color"+a,staticClass:"color",style:{backgroundColor:o},attrs:{size:"mini","show-alpha":"",value:o},on:{change:function(t){e.setColor(i.colors,a+6*(n-1),t)}}})})),1)})),0)])})),t("div",{staticClass:"theme-add",on:{click:e.addTheme}},[t("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1)],2)])},yn=[],mn=i("cf2e"),jn=i.n(mn),On=i("1af0"),vn=i("6929"),Cn=i.n(vn);const xn=(e,t)=>{const i=[];for(let n=0;n<12;n++)i.push(Cn()(e).mix(Cn()(t),n/11).rgb().toString());return i};let wn=class extends s["f"]{get themes(){return this.context.applicationConfig.colorThemes}addTheme(){const e=()=>{const e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),i=Math.floor(255*Math.random());return`rgba(${e},${t},${i},1)`},t=new On["a"];t.colors=xn(e(),e()),this.themes.push(t)}async deleteTheme(e){try{await this.$confirm("是否删除选中的主题？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=this.themes.indexOf(e);t>-1&&this.themes.splice(t,1)}catch(t){}}setColor(e,t,i){jn()(i)?this.$set(e,t,i):(e.splice(t,1),e.push("rgba(0,0,0,0)")),e.sort(e=>"rgba(0,0,0,0)"===e?1:0)}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(pn="undefined"!==typeof _["a"]&&_["a"])?pn:Object)],wn.prototype,"context",void 0),wn=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],TxtEditor:Ji["a"]}})],wn);var Sn,_n=wn,An=_n,Dn=(i("7229"),Object(b["a"])(An,hn,yn,!1,null,"fd7108ec",null)),Wn=Dn.exports,En=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"ImageAssetPanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("图片资源")]),t("div",{staticClass:"body"},e._l(e.imageAssets,(function(i){return t("div",{key:i.id,staticClass:"image-asset"},[t("img",{attrs:{src:i.url,alt:""}}),t("div",{staticClass:"info"},[t("span",[e._v(e._s(i.name))]),t("span",{staticStyle:{float:"right"}},[t("span",[e._v("复制")])])])])})),0)])},kn=[];let Tn=class extends s["f"]{get imageAssets(){return this.context.applicationConfig.imageAssets}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(Sn="undefined"!==typeof _["a"]&&_["a"])?Sn:Object)],Tn.prototype,"context",void 0),Tn=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],TxtEditor:Ji["a"]}})],Tn);var In,Nn,Pn=Tn,Mn=Pn,Bn=(i("86d1"),Object(b["a"])(Mn,En,kn,!1,null,"16ef153b",null)),Ln=Bn.exports,Rn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetDefinitionPanel",class:{expand:e.isExpand}},[e.isExpand?[t("CommonPanel",{staticClass:"panel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("图层")])]),e.pageEditor||e.combinationEditor?t("LayersPanel",{attrs:{pageEditor:e.pageEditor||e.combinationEditor}}):t("div",[e._v("当前不存在图层")])],1),t("CommonPanel",{staticClass:"panel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("组件")])]),t("el-collapse",{ref:"collapse"},[e._l(e.widgetDefinitionGroups,(function(i){return t("el-collapse-item",{key:i.name,attrs:{title:i.displayName,name:i.name}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(i.widgetDefinitions,(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1)})),t("el-collapse-item",{attrs:{title:"自定义组件"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.widgetDefinitionsOfCustomWidgetDefinitions,(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1),e.showCombination?t("el-collapse-item",{attrs:{title:"自定义组合"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.widgetDefinitionsOfCombinations,(function(i){return t("el-col",{key:i.name,attrs:{span:24},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1):e._e()],2)],1)]:t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{key:"layers",attrs:{label:"图层"}},[e.pageEditor||e.combinationEditor?t("LayersPanel",{attrs:{pageEditor:e.pageEditor||e.combinationEditor}}):t("div",[e._v("当前不存在图层")])],1),t("el-tab-pane",{key:"widget",attrs:{label:"组件"}},[t("el-collapse",{ref:"collapse",staticClass:"collapse"},[e._l(e.widgetDefinitionGroups,(function(i){return t("el-collapse-item",{key:i.name,attrs:{title:i.displayName,name:i.name}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(i.widgetDefinitions,(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1)})),t("el-collapse-item",{attrs:{title:"自定义组件"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.widgetDefinitionsOfCustomWidgetDefinitions,(function(i){return t("el-col",{key:i.name,attrs:{span:24}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1),e.showCombination?t("el-collapse-item",{attrs:{title:"自定义组合"}},[t("el-row",{staticClass:"collapse-content",attrs:{gutter:10}},e._l(e.widgetDefinitionsOfCombinations,(function(i){return t("el-col",{key:i.name,attrs:{span:24},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("div",{staticClass:"widget",attrs:{draggable:"true"},on:{dragstart:function(t){return e.handleWidgetDragStart(i,t)},click:function(t){return e.addWidgetDefinitionToLayer(i)}}},[t("img",{attrs:{src:i.icon,alt:""}})]),t("div",{staticClass:"widget-name"},[e._v(e._s(i.displayName))])])})),1)],1):e._e()],2)],1)],1),t("el-button",{staticClass:"expand-btn",attrs:{type:"text"},on:{click:function(t){e.isExpand=!e.isExpand}}},[e._v(e._s(e.isExpand?"收起":"展开"))])],2)},Fn=[];let $n=class extends s["f"]{constructor(){super(...arguments),this.isExpand=!1}get currentObjEditorInfo(){return this.editor.currentObjEditorInfo}get pageEditor(){var e;return"PageConfig"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.pageEditor:null}get combinationEditor(){var e;return"Combination"===(null===(e=this.currentObjEditorInfo)||void 0===e?void 0:e.type)?this.editor.objectEditorTab.combinationEditor:null}get showCombination(){return!this.combinationEditor}get widgetDefinitionGroups(){return this.context.widgetDefinitionGroups}get widgetDefinitionsOfCustomWidgetDefinitions(){return this.context.widgetDefinitionsOfCustomWidgetDefinitions}get widgetDefinitionsOfCombinations(){return this.context.widgetDefinitionsOfCombinations}async addWidgetDefinitionToLayer(e){var t,i;const n=(null===(t=this.pageEditor)||void 0===t?void 0:t.pageConfig.widgets)||(null===(i=this.combinationEditor)||void 0===i?void 0:i.combination.widgets)||[],o=await this.context.generateWidgetConfig(e);n.unshift(o)}handleWidgetDragStart(e,t){t.dataTransfer&&(t.dataTransfer.setData("widgetdefinitionid",e.id),t.dataTransfer.setData("isBaseWidgetdefinition","true"))}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(In="undefined"!==typeof _["a"]&&_["a"])?In:Object)],$n.prototype,"context",void 0),Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(Nn="undefined"!==typeof io&&io)?Nn:Object)],$n.prototype,"editor",void 0),$n=Object(a["a"])([Object(s["a"])({components:{CommonPanel:E["a"],LayersPanel:()=>Promise.resolve().then(i.bind(null,"4a8a"))}})],$n);var zn,Gn,Vn,qn,Jn=$n,Un=Jn,Xn=(i("f744"),Object(b["a"])(Un,Rn,Fn,!1,null,"e04774ca",null)),Yn=Xn.exports,Hn=i("ee39"),Zn=i("92ef");(function(e){e["OBJECT_TREE"]="object_tree",e["LOG"]="log",e["NONE"]="none",e["THEME"]="theme",e["WIDGET_DEFINITION"]="widget-definition",e["IMAGE"]="image"})(qn||(qn={}));let Qn=class extends s["f"]{constructor(){super(...arguments),this.applicationConfig=new A["a"],this.currentObjEditorInfo=null,this.editorInfos=[],this.secondarySidebarType=qn.OBJECT_TREE,this.contextmenu={opened:!1,x:0,y:0,meunItems:[]}}get editor(){return this}handleSave(){this.$emit("save",(new r["a"]).serializeObject(this.applicationConfig))}createNewPageConfig(){const e=this.applicationConfig.pageConfigList,t=new ce["a"];t.name+=e.length+1,this.applicationConfig.pageConfigList.push(t)}createNewCustomWidgetDefinition(){const e=this.applicationConfig.customWidgetDefinitions,t=new ue["a"];t.name+=e.length+1,e.push(t)}createNewCombination(){const e=this.applicationConfig.combinations,t=new zi["a"];t.name+=e.length+1,e.push(t)}createInteractionTrigger(){const e=this.applicationConfig.interactionTriggers,t=new st["b"];t.name+=e.length+1,e.push(t)}createUserScript(){const e=new Hn["a"];this.applicationConfig.userScripts.push(e)}createDataSourceConfig(){const e=new Zn["a"];this.applicationConfig.dataSources.push(e)}addImageAsset(e){this.applicationConfig.imageAssets.push(e)}openContextmenu(e,t,i){const n=this.contextmenu,o=document.body.clientHeight,a=document.body.clientWidth,s=a-260,r=o-32*i.length;n.opened=!0,n.x=Math.min(e,s),n.y=Math.min(t,r),n.meunItems=i}closeContextmenu(){const e=this.contextmenu;e.opened=!1,e.x=0,e.y=0,e.meunItems=[]}previewNimObj(e,t=""){let i="PageConfig";if(e instanceof A["a"])i="ApplicationConfig";else if(e instanceof ce["a"])i="PageConfig";else if(e instanceof ue["a"])i="CustomWidgetDefinition";else if(e instanceof zi["a"])i="Combination";else if(e instanceof Zn["a"])i="DataSourceConfig";else if(e instanceof st["b"])i="InteractionTrigger";else if(e instanceof Hn["a"])i="UserScript";else{if(!(e instanceof Gi["a"]))return;i="ImageAsset"}this.$nextTick(()=>{this.objectEditorTab.scrollTo(e,t)});const n=this.editorInfos.find((function(i){return i.preview||i.obj===e&&i.subtype===t}));if(n)return n.obj=e,n.type=i,n.subtype=t,void(this.currentObjEditorInfo=n);this.currentObjEditorInfo={preview:!0,type:i,subtype:t,obj:e},this.editorInfos.push(this.currentObjEditorInfo)}openNimObj(e,t=""){let i="PageConfig";if(e instanceof A["a"])i="ApplicationConfig";else if(e instanceof ce["a"])i="PageConfig";else if(e instanceof ue["a"])i="CustomWidgetDefinition";else if(e instanceof zi["a"])i="Combination";else if(e instanceof Zn["a"])i="DataSourceConfig";else if(e instanceof st["b"])i="InteractionTrigger";else if(e instanceof Hn["a"])i="UserScript";else{if(!(e instanceof Gi["a"]))return;i="ImageAsset"}const n=this.editorInfos.find((function(i){return i.obj===e&&i.subtype===t}));if(this.$nextTick(()=>{this.objectEditorTab.scrollTo(e,t)}),n)return n.preview=!1,void(this.currentObjEditorInfo=n);this.currentObjEditorInfo={preview:!1,type:i,subtype:t,obj:e},this.editorInfos.push(this.currentObjEditorInfo)}closeNimObj(e,t=""){var i,n;const o=this.editorInfos.findIndex((function(i){return i.obj===e&&i.subtype===t}));o>-1&&this.editorInfos.splice(o,1),(null===(i=this.currentObjEditorInfo)||void 0===i?void 0:i.obj)===e&&(null===(n=this.currentObjEditorInfo)||void 0===n?void 0:n.subtype)===t&&(o>-1&&o<this.editorInfos.length?this.currentObjEditorInfo=this.editorInfos[o]:this.currentObjEditorInfo=this.editorInfos[o-1])}deletePageConfig(e){const t=this.applicationConfig.pageConfigList,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteCombination(e){const t=this.applicationConfig.combinations,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteCustomWidgetDefinition(e){const t=this.applicationConfig.customWidgetDefinitions,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteImageAsset(e){const t=this.applicationConfig.imageAssets,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteInteractionTriggers(e){const t=this.applicationConfig.interactionTriggers,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteUserScript(e){const t=this.applicationConfig.userScripts,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}deleteDataSource(e){const t=this.applicationConfig.dataSources,i=t.indexOf(e);i>-1&&t.splice(i,1),this.closeNimObj(e)}async openImageAssetDialog(){return this.assetDialog.open()}errorCaptured(e){console.log("err:",e)}created(){this.applicationConfig=(new r["a"]).deserializeObject(this.config,A["a"])}mounted(){const e=this.applicationConfig.pageConfigList;e.length&&this.openNimObj(e[0])}};Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],Qn.prototype,"config",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type",Function)],Qn.prototype,"uploadFile",void 0),Object(a["a"])([Object(s["d"])("nim-app-editor"),Object(a["b"])("design:type",Qn),Object(a["b"])("design:paramtypes",[])],Qn.prototype,"editor",null),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(zn="undefined"!==typeof _["a"]&&_["a"])?zn:Object)],Qn.prototype,"applicationContext",void 0),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(Gn="undefined"!==typeof $i&&$i)?Gn:Object)],Qn.prototype,"objectEditorTab",void 0),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(Vn="undefined"!==typeof rn&&rn)?Vn:Object)],Qn.prototype,"assetDialog",void 0),Qn=Object(a["a"])([Object(s["a"])({components:{NimAppEditorHeader:h,NimAppEditorSideBar:S,ApplicationContext:_["a"],VariableSizeZone:Z["a"],ObjectTreePanel:H,WidgetDefinitionPanel:Yn,ObjectEditorTab:$i,AssetDialog:rn,LogPanel:gn,ThemePanel:Wn,ImageAssetPanel:Ln}})],Qn);var Kn=Qn,eo=Kn,to=(i("0f10"),Object(b["a"])(eo,n,o,!1,null,"94a5f576",null)),io=t["a"]=to.exports},"1e5e":function(e,t,i){},"1ee6":function(e,t,i){"use strict";i("bb93")},"1f63":function(e,t,i){},"1fcb":function(e,t,i){"use strict";i("d60e")},"20c5":function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"UserScriptTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","code"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名脚本",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get userScript(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.userScript)}handleClick(){this.editor.previewNimObj(this.userScript)}handleDbClick(){this.editor.openNimObj(this.userScript)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个脚本？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteUserScript(this.userScript)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("a1e8"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"ed80c50a",null);t["default"]=g.exports},2204:function(e,t,i){},"234f":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"TxtEditor"},[e.inputShowed?e._e():t("span",{staticClass:"value"},[e._v(e._s(e.value)+" ")]),t("input",{directives:[{name:"show",rawName:"v-show",value:e.inputShowed,expression:"inputShowed"},{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",attrs:{type:"text"},domProps:{value:e.innerValue},on:{blur:e.inputValue,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputValue.apply(null,arguments)},keydown:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.innerValue=t.target.value)}}}),t("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!e.inputShowed&&!e.hiddenEditBtn,expression:"!inputShowed && !hiddenEditBtn"}],staticClass:"edit-icon",attrs:{title:e.editBtnTitle,icon:["fas","pen"]},on:{click:e.handleIconClick}})],1)},o=[],a=i("9ab4"),s=i("60a3");let r=class extends s["f"]{constructor(){super(...arguments),this.innerValue="",this.inputShowed=!1}startInput(){this.inputShowed=!0,this.$nextTick(()=>{this.innerValue=this.value,this.$refs.input.focus()})}handleIconClick(){this.startInput()}inputValue(){this.inputShowed=!1,this.$emit("input",this.innerValue||this.defaultText),this.$el.scrollTo(0,0)}};Object(a["a"])([Object(s["c"])({type:String,required:!0}),Object(a["b"])("design:type",String)],r.prototype,"value",void 0),Object(a["a"])([Object(s["c"])({type:String,required:!1,default:""}),Object(a["b"])("design:type",String)],r.prototype,"editBtnTitle",void 0),Object(a["a"])([Object(s["c"])({type:String,required:!1,default:""}),Object(a["b"])("design:type",String)],r.prototype,"defaultText",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],r.prototype,"hiddenEditBtn",void 0),r=Object(a["a"])([s["a"]],r);var c=r,d=c,l=(i("6ba6"),i("2877")),p=Object(l["a"])(d,n,o,!1,null,"f91a0f44",null);t["a"]=p.exports},"245e":function(e,t,i){},"24c3":function(e,t,i){},"26ca":function(e,t,i){},"271c":function(e,t,i){"use strict";var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CombinationEditor",on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)}}},[t("div",{staticClass:"main",on:{click:e.clearSelected}},[t("OperatingSpace",{ref:"operatingSpace",staticClass:"operating-space",attrs:{widgetConfigs:e.widgetConfigs,dragable:!0,inCombinationEditor:!0},on:{dropWidgetdefinition:e.addWidgetde}},[t("Renderer",{ref:"renderer",staticClass:"renderer",attrs:{pageConfig:e.pageConfig}})],1)],1),t("ConfigPanel",{staticClass:"config-panel",attrs:{combination:e.combination,widgetConfig:e.selectedWidgetConfig,widgetConfigs:e.widgetConfigs,getWidgetWrapper:e.getWidgetWrapper,getScreenshot:e.getScreenshot},on:{clearSelected:e.clearSelected}}),t("CommonPanel",{staticClass:"data-editor",scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v("默认数据")])]},proxy:!0}])},[t("MonacoEditor",{key:"static",staticClass:"monaco-editor",attrs:{language:"json"},model:{value:e.combination.staticData,callback:function(t){e.$set(e.combination,"staticData",t)},expression:"combination.staticData"}})],1)],1)},a=[],s=(i("14d9"),i("9ab4")),r=i("f850"),c=i("9e0a"),d=i("60a3"),l=i("b4dd"),p=i("4a8a"),u=i("566c"),f=i("6f49"),b=i("7fe8"),g=i("3b9d"),h=i("5edc"),y=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ConfigPanel"},[e.widgetConfig?t("WidgetConfigPanel",{key:e.combination.id,attrs:{widgetConfig:e.widgetConfig,widgetWrapper:e.widgetWrapper},on:{delete:e.pageEditor.deleteAllSelectedWidgetConfig,clone:e.pageEditor.cloneSelectedWidgetConfig}}):t("CombinationConfigPanel",{attrs:{getScreenshot:e.getScreenshot,combination:e.combination}})],1)},m=[],j=i("7314"),O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"CombinationConfigPanel",scopedSlots:e._u([{key:"header",fn:function(){return[e._v("组合配置")]},proxy:!0}])},[t("div",{staticClass:"attr-list"},[t("AttrItem",{attrs:{object:e.combination,label:"名称",prop:"name",type:"string","disable-varable":""}}),t("AttrItem",{attrs:{object:e.combination,label:"尺寸",type:"size"}}),t("AttrItem",{attrs:{object:e.combination,label:"背景颜色",prop:"bgColor",type:"color"}}),t("AttrItem",{staticClass:"from-item",attrs:{object:e.combination,label:"缩略图",prop:"icon",type:"Screenshot",getScreenshot:e.getScreenshot}})],1)])},v=[],C=i("e58b");let x=class extends d["f"]{};Object(s["a"])([Object(d["c"])(),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof j["a"]&&j["a"])?n:Object)],x.prototype,"combination",void 0),Object(s["a"])([Object(d["c"])({required:!0}),Object(s["b"])("design:type",Function)],x.prototype,"getScreenshot",void 0),x=Object(s["a"])([Object(d["a"])({components:{CommonPanel:g["a"],AttrItem:C["a"]}})],x);var w,S,_,A=x,D=A,W=(i("b4fd"),i("2877")),E=Object(W["a"])(D,O,v,!1,null,"b4c0b37a",null),k=E.exports,T=i("5ac0");let I=class extends d["f"]{get widgetWrapper(){return this.getWidgetWrapper(this.widgetConfig.id)}async handleDelete(){try{await this.$confirm("是否删除选中的组件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=this.widgetConfigs.indexOf(this.widgetConfig);this.widgetConfigs.splice(e,1),this.$emit("clearSelected")}catch(e){}}};Object(s["a"])([Object(d["b"])("pageEditor"),Object(s["b"])("design:type","function"===typeof(w="undefined"!==typeof Z&&Z)?w:Object)],I.prototype,"pageEditor",void 0),Object(s["a"])([Object(d["c"])(),Object(s["b"])("design:type","function"===typeof(S="undefined"!==typeof j["a"]&&j["a"])?S:Object)],I.prototype,"combination",void 0),Object(s["a"])([Object(d["c"])(),Object(s["b"])("design:type","function"===typeof(_="undefined"!==typeof b["a"]&&b["a"])?_:Object)],I.prototype,"widgetConfig",void 0),Object(s["a"])([Object(d["c"])(),Object(s["b"])("design:type",Array)],I.prototype,"widgetConfigs",void 0),Object(s["a"])([Object(d["c"])({required:!0}),Object(s["b"])("design:type",Function)],I.prototype,"getWidgetWrapper",void 0),Object(s["a"])([Object(d["c"])({required:!0}),Object(s["b"])("design:type",Function)],I.prototype,"getScreenshot",void 0),I=Object(s["a"])([Object(d["a"])({components:{CombinationConfigPanel:k,WidgetConfigPanel:T["a"]}})],I);var N,P,M,B,L,R=I,F=R,$=(i("1fcb"),Object(W["a"])(F,y,m,!1,null,"86576f40",null)),z=$.exports,G=i("cd3f"),V=i.n(G),q=i("8ff1"),J=i("1cdf");let U=class extends d["f"]{constructor(){super(...arguments),this.combinationSyncModel=!0,this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[],this.hoverWidgetConfig=null,this.ctrlLeftPress=!1}get pageEditor(){return this}get isMultipleSelected(){return this.multipleSelectedWidgetConfigs.length>0}get combination(){return this.objEditorInfo.obj}get widgetDefinition(){return this.context.getWidgetDefinitionForCombination(this.combination)}get widgetConfig(){const e=new b["a"];return this.widgetDefinition&&(e.widgetDefinitionId=this.widgetDefinition.id,e.dataSource.staticData=this.combination.staticData),e}get pageConfig(){const e=new f["a"];return e.name=this.combination.name,e.widgets.push(this.widgetConfig),e.bgColor="rgba(0,0,0,0)",e.width=this.combination.width,e.height=this.combination.height,e}get widgetConfigs(){return this.combination.widgets}getWidgetWrapper(e){const t=this.renderer.getWidgetWrapper(this.widgetConfig.id),i=null===t||void 0===t?void 0:t.$refs.component,n=(null===i||void 0===i?void 0:i.$refs)||[];return n[e][0]}selectWidgetConfig(e){this.editor.closeContextmenu(),this.selectedWidgetConfig=e}clearSelected(){this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[]}isSelectedWidgetConfig(e){return e===this.selectedWidgetConfig||this.multipleSelectedWidgetConfigs.indexOf(e)>-1}async addWidgetde({id:e,x:t,y:i}){const n=this.context.getWidgetDefinition(e);if(n){const e=await this.context.generateWidgetConfig(n);e.base.x=t,e.base.y=i,e.dataSource.functionBody="const combinationData = widgetWrapper.combinationData\n"+e.dataSource.functionBody,this.combination.widgets.unshift(e)}}getWidgetConfig(e){const t=this.pageConfig.widgets;return t&&t.find(t=>t.id===e)}getScreenshot(){return this.operatingSpace.getScreenshot()}deleteWidgetConfig(e){let t=this.combination.widgets,i=null;e.groupId&&(i=this.getWidgetConfig(e.groupId),i&&i.children&&(t=i.children));const n=t.indexOf(e);n>-1&&t.splice(n,1),i&&i.children&&0===i.children.length&&this.deleteWidgetConfig(i)}async deleteAllSelectedWidgetConfig(){if(this.selectedWidgetConfig||this.multipleSelectedWidgetConfigs.length)try{await this.$confirm("是否删除选中的组件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});for(const e of[this.selectedWidgetConfig,...this.multipleSelectedWidgetConfigs])e&&this.deleteWidgetConfig(e);this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[]}catch(e){}}async cloneSelectedWidgetConfig(){if(this.selectedWidgetConfig){const e=V()(this.selectedWidgetConfig);e.id=Object(q["a"])("WidgetConfig"),e.base.displayName+="的复制",e.base.x+=50,e.base.y+=50,e.groupId="",e.children&&e.children.forEach(t=>{t.id=Object(q["a"])("WidgetConfig"),t.groupId=e.id}),this.combination.widgets.unshift(e),this.selectedWidgetConfig=e}}selectedWidgetConfigMoveUp(){const e=this.selectedWidgetConfig,t=this.widgetConfigs;if(e){const i=t.indexOf(e);if(i>0){const n=t[i-1];this.$set(t,i-1,e),this.$set(t,i,n)}}}selectedWidgetConfigMoveDown(){const e=this.selectedWidgetConfig,t=this.widgetConfigs;if(e){const i=t.indexOf(e);if(i<t.length-1){const n=t[i+1];this.$set(t,i+1,e),this.$set(t,i,n)}}}selectedWidgetConfigMoveTop(){const e=this.selectedWidgetConfig,t=this.widgetConfigs;if(e){const i=t.indexOf(e);i>-1&&t.splice(i,1),t.unshift(e)}}selectedWidgetConfigMoveBottom(){const e=this.selectedWidgetConfig,t=this.widgetConfigs;if(e){const i=t.indexOf(e);i>-1&&t.splice(i,1),t.push(e)}}lockeAllSelectedWidgetConfigs(){const e=this.selectedWidgetConfig,t=this.multipleSelectedWidgetConfigs;e&&(e.base.locked=!0),t.forEach(e=>{e.base.locked=!0})}unlockeAllSelectedWidgetConfigs(){const e=this.selectedWidgetConfig,t=this.multipleSelectedWidgetConfigs;e&&(e.base.locked=!1),t.forEach(e=>{e.base.locked=!1})}handleContextmenu(e){const t=this.editor;(this.selectedWidgetConfig||this.multipleSelectedWidgetConfigs.length>0)&&this.editor.openContextmenu(e.clientX,e.clientY,[{name:"图层置顶",handler:()=>{this.selectedWidgetConfigMoveTop(),t.closeContextmenu()}},{name:"图层置底",handler:()=>{this.selectedWidgetConfigMoveBottom(),t.closeContextmenu()}},{name:"图层上移",handler:()=>{this.selectedWidgetConfigMoveUp(),t.closeContextmenu()}},{name:"图层下移",handler:()=>{this.selectedWidgetConfigMoveDown(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"锁定图层",handler:()=>{this.lockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"解锁图层",handler:()=>{this.unlockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"复制",disable:this.multipleSelectedWidgetConfigs.length>0,handler:()=>{this.cloneSelectedWidgetConfig(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"删除",handler:()=>{this.deleteAllSelectedWidgetConfig(),t.closeContextmenu()}}])}async handleKeydown(e){if(!this.active)return;const t=this.selectedWidgetConfig,i=this.multipleSelectedWidgetConfigs;if(17===e.keyCode&&(this.ctrlLeftPress=!0),46===e.keyCode&&await this.deleteAllSelectedWidgetConfig(),40===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.y+=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(38===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.y-=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(37===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.x-=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(39===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.x+=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}}async handleKeyup(e){17===e.keyCode&&(this.ctrlLeftPress=!1)}mounted(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup),this.$emit("mounted")}beforeDestroy(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup)}};Object(s["a"])([Object(d["d"])("pageEditor"),Object(s["b"])("design:type",U),Object(s["b"])("design:paramtypes",[])],U.prototype,"pageEditor",null),Object(s["a"])([Object(d["d"])("combinationSyncModel"),Object(s["b"])("design:type",Object)],U.prototype,"combinationSyncModel",void 0),Object(s["a"])([Object(d["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(N="undefined"!==typeof J["a"]&&J["a"])?N:Object)],U.prototype,"editor",void 0),Object(s["a"])([Object(d["b"])("nim-app-context"),Object(s["b"])("design:type","function"===typeof(P="undefined"!==typeof c["a"]&&c["a"])?P:Object)],U.prototype,"context",void 0),Object(s["a"])([Object(d["c"])({type:Object,required:!0}),Object(s["b"])("design:type","function"===typeof(M="undefined"!==typeof r["ObjEditorInfo"]&&r["ObjEditorInfo"])?M:Object)],U.prototype,"objEditorInfo",void 0),Object(s["a"])([Object(d["c"])({type:Boolean,required:!0}),Object(s["b"])("design:type",Boolean)],U.prototype,"active",void 0),Object(s["a"])([Object(d["e"])(),Object(s["b"])("design:type","function"===typeof(B="undefined"!==typeof l["a"]&&l["a"])?B:Object)],U.prototype,"operatingSpace",void 0),Object(s["a"])([Object(d["e"])(),Object(s["b"])("design:type","function"===typeof(L="undefined"!==typeof u["a"]&&u["a"])?L:Object)],U.prototype,"renderer",void 0),U=Object(s["a"])([Object(d["a"])({components:{OperatingSpace:l["a"],Renderer:u["a"],CommonPanel:g["a"],MonacoEditor:h["a"],ConfigPanel:z,LayersPanel:p["default"]}})],U);var X=U,Y=X,H=(i("9cf7"),Object(W["a"])(Y,o,a,!1,null,"cbeb8988",null)),Z=t["a"]=H.exports},"2af5":function(e,t,i){"use strict";i("1f63")},"2c39":function(e,t,i){"use strict";i("f154")},"2e41":function(e,t,i){},"30db":function(e,t,i){},3182:function(e,t,i){},3374:function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(){this.id=Object(a["a"])("ImageAsset"),this.name="",this.isBuiltIn=!1,this.url="",this.width=0,this.height=0,this.size=0}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("isBuiltIn",Boolean,!0),Object(n["b"])("design:type",Object)],s.prototype,"isBuiltIn",void 0),Object(n["a"])([Object(o["c"])("url",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"url",void 0),Object(n["a"])([Object(o["c"])("width",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"width",void 0),Object(n["a"])([Object(o["c"])("height",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"height",void 0),Object(n["a"])([Object(o["c"])("size",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"size",void 0),s=Object(n["a"])([Object(o["b"])("ImageAsset")],s),t["a"]=s},"33b4":function(e,t,i){"use strict";i("8156")},"387f1":function(e,t,i){"use strict";i("04eb")},"38fd":function(e,t,i){"use strict";i("ebde")},"39ad":function(e,t,i){},"3b9d":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CommonPanel"},[t("div",{staticClass:"header"},[e._t("header")],2),t("div",{staticClass:"body"},[e._t("default")],2)])},o=[],a=i("9ab4"),s=i("60a3");let r=class extends s["f"]{};r=Object(a["a"])([s["a"]],r);var c=r,d=c,l=(i("c02c"),i("2877")),p=Object(l["a"])(d,n,o,!1,null,"62352eb0",null);t["a"]=p.exports},"3bc2":function(e,t,i){},"3cd5":function(e,t,i){"use strict";i("9698")},"3d11":function(e,t,i){"use strict";i("5a8e")},"3da3":function(e,t,i){},"408c":function(e,t,i){"use strict";i("8e58")},4314:function(e,t,i){"use strict";i("30db")},"47d1":function(e,t,i){"use strict";t["a"]="\n  interface DataSource {\n    data: any;\n  }\n\n  interface ApplicationContext {\n    /** 用户数据 */\n    userData: any;\n    /** 设置（若传入 value ）并获取变量的值 */\n    variable: (name: string, value?: string | number | boolean) => string | number | boolean;\n    dataSources: DataSource[]\n  }\n\n  /** 全局上下文 */\n  declare const context: ApplicationContext;\n\n  interface WidgetWrapper {\n    /** 上级包装器 */\n    parentWrapper: WidgetWrapper | null;\n    getData: () => any;\n    /** 如果用于访问组合的数据  */\n    combinationData: any;\n    /** show */\n    show: boolean;\n  }\n\n  /** 组件包装器  */\n  declare const widgetWrapper: WidgetWrapper;\n\n  interface Director {\n    getWidgetWrapper: (widgetId: string) => WidgetWrapper;\n  }\n\n  /** 全局导演 */\n  director const director: Director;\n"},4875:function(e,t,i){},"4a8a":function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"LayersPanel",on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)}}},[e.pageEditor?t("div",{staticClass:"layer-nav"},[t("font-awesome-icon",{attrs:{icon:["far","dot-circle"]}}),t("span",{staticClass:"path-item"},[e._v(e._s(e.pageConfig.name))]),e.selectedWidgetConfigGroup?[t("font-awesome-icon",{attrs:{icon:["fas","chevron-right"]}}),t("span",{staticClass:"path-item",on:{click:function(t){return e.selectWidgetConfig(e.selectedWidgetConfigGroup)}}},[e._v(e._s(e.selectedWidgetConfigGroup.base.displayName))])]:e._e(),e.selectedWidgetConfig?[t("font-awesome-icon",{attrs:{icon:["fas","chevron-right"]}}),t("span",{staticClass:"path-item",on:{click:function(t){return e.selectWidgetConfig(e.selectedWidgetConfig)}}},[e._v(e._s(e.selectedWidgetConfig.base.displayName))])]:e._e(),e._t("default")],2):e._e(),e.pageEditor?t("vue-drag",{staticClass:"scroll-view",attrs:{group:"widgets",options:{bubbleScroll:!1,animation:150},move:e.handleMove},on:{change:e.handleChange},model:{value:e.widgetConfigs,callback:function(t){e.widgetConfigs=t},expression:"widgetConfigs"}},[e._l(e.widgetConfigs,(function(i){return[i.isGroup?t("LayerGroupItem",{key:i.id,staticClass:"group",attrs:{widgetConfig:i,pageEditor:e.pageEditor},nativeOn:{dblclick:function(t){return t.stopPropagation(),e.handleWidgetItemDbclick(i)}}}):t("LayerItem",{key:i.id,attrs:{widgetConfig:i,pageEditor:e.pageEditor},nativeOn:{dblclick:function(t){return t.stopPropagation(),e.handleWidgetItemDbclick(i)}}})]}))],2):e._e()],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("b76a"),l=i.n(d),p=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"LayerItem",class:{active:e.active,hover:e.hover},on:{mouseover:function(t){e.hoverWidgetConfig=e.widgetConfig},mouseout:function(t){e.hoverWidgetConfig=null},contextmenu:e.handleContextmenu,click:function(t){return t.stopPropagation(),e.selectWidgetConfig.apply(null,arguments)}}},[t("img",{attrs:{src:e.widgetDefinition&&e.widgetDefinition.icon,alt:""}}),t("div",{staticClass:"display-Name"},[e._v(e._s(e.widgetConfig.base.displayName))])])},u=[],f=i("7fe8"),b=i("9e0a");let g=class extends c["f"]{get hoverWidgetConfig(){return this.pageEditor.hoverWidgetConfig}set hoverWidgetConfig(e){this.pageEditor.hoverWidgetConfig=e}get widgetDefinition(){return this.pageEditor.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get hover(){return this.pageEditor.hoverWidgetConfig===this.widgetConfig}get active(){return this.pageEditor.isSelectedWidgetConfig(this.widgetConfig)}selectWidgetConfig(){this.pageEditor.selectWidgetConfig(this.widgetConfig)}handleContextmenu(){this.active||this.pageEditor.selectWidgetConfig(this.widgetConfig)}};Object(r["a"])([Object(c["b"])("nim-app-context"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof b["a"]&&b["a"])?n:Object)],g.prototype,"context",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],g.prototype,"pageEditor",void 0),Object(r["a"])([Object(c["c"])({type:Object,required:!0}),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof f["a"]&&f["a"])?o:Object)],g.prototype,"widgetConfig",void 0),g=Object(r["a"])([c["a"]],g);var h,y=g,m=y,j=(i("63f4d"),i("2877")),O=Object(j["a"])(m,p,u,!1,null,"8375e196",null),v=O.exports,C=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"LayerGroupItem",class:{opened:e.isOpened,active:e.active,hover:e.hover},on:{click:function(t){return t.stopPropagation(),e.selectWidgetConfig.apply(null,arguments)},mouseover:function(t){e.hoverWidgetConfig=e.widgetConfig},mouseout:function(t){e.hoverWidgetConfig=null}}},[t("div",{staticClass:"group-label",on:{contextmenu:e.handleContextmenu}},[t("span",{staticClass:"icons",on:{click:function(t){t.stopPropagation(),e.isOpened=!e.isOpened}}},[e.isOpened?t("i",{staticClass:"el-icon-arrow-down"}):t("i",{staticClass:"icon el-icon-arrow-right"}),t("i",{staticClass:"el-icon-s-cooperation"})]),t("span",{staticClass:"text"},[e._v(e._s(e.widgetConfig.base.displayName))])]),t("vue-drag",{directives:[{name:"show",rawName:"v-show",value:e.isOpened,expression:"isOpened"}],staticClass:"children-layers group-drag",attrs:{options:{animation:150},group:"widgets"},on:{change:e.handleChange,add:e.handleAdd},model:{value:e.widgetConfig.children,callback:function(t){e.$set(e.widgetConfig,"children",t)},expression:"widgetConfig.children"}},e._l(e.children,(function(i,n){return t("LayerItem",{key:n,attrs:{pageEditor:e.pageEditor,widgetConfig:i}})})),1)],1)},x=[];let w=class extends c["f"]{constructor(){super(...arguments),this.isOpened=!1}get locked(){return this.widgetConfig.base.locked}get hover(){return this.pageEditor.hoverWidgetConfig===this.widgetConfig}get hoverWidgetConfig(){return this.pageEditor.hoverWidgetConfig}set hoverWidgetConfig(e){this.pageEditor.hoverWidgetConfig=e}get children(){return this.widgetConfig.children}get active(){return this.pageEditor.isSelectedWidgetConfig(this.widgetConfig)}selectWidgetConfig(){this.pageEditor.selectWidgetConfig(this.widgetConfig)}handleChange({added:e}){if(e){const t=e.element;t.base.x=0,t.base.y=0,this.$set(t,"groupId",this.widgetConfig.id)}}handleAdd(){return!1}handleContextmenu(){this.active||this.pageEditor.selectWidgetConfig(this.widgetConfig)}};Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],w.prototype,"pageEditor",void 0),Object(r["a"])([Object(c["c"])({type:Object,required:!0}),Object(r["b"])("design:type","function"===typeof(h="undefined"!==typeof f["a"]&&f["a"])?h:Object)],w.prototype,"widgetConfig",void 0),w=Object(r["a"])([Object(c["a"])({components:{LayerItem:v,"vue-drag":l.a}})],w);var S,_,A=w,D=A,W=(i("d374"),i("bb04"),Object(j["a"])(D,C,x,!1,null,"3a523d16",null)),E=W.exports,k=i("67b0"),T=i("271c"),I=i("1cdf");let N=class extends c["f"]{get pageConfig(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.pageConfig}get widgetConfigs(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.widgetConfigs}set widgetConfigs(e){this.pageEditor&&e&&(this.pageEditor instanceof T["a"]?this.pageEditor.combination.widgets=e:this.pageEditor.pageConfig.widgets=e)}get selectedWidgetConfig(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.selectedWidgetConfig}get selectedWidgetConfigGroup(){const e=this.selectedWidgetConfig;return this.pageEditor&&null!==e&&void 0!==e&&e.groupId?this.pageEditor.getWidgetConfig(e.groupId):null}handleChange({added:e}){if(e){const t=e.element;t.base.x=0,t.base.y=0,this.$delete(t,"groupId")}}handleMove(e){const t=e.dragged,i=e.to;if(t.classList.contains("group")&&i.classList.contains("group-drag"))return!1}selectWidgetConfig(e){this.pageEditor&&(this.pageEditor.clearSelected(),this.pageEditor.selectWidgetConfig(e))}handleContextmenu(e){const t=this.editor;if(this.pageEditor instanceof k["a"]){const i=this.pageEditor;(this.pageEditor.selectedWidgetConfig||this.pageEditor.multipleSelectedWidgetConfigs.length>0)&&this.editor.openContextmenu(e.clientX,e.clientY,[{name:"图层置顶",handler:()=>{i.selectedWidgetConfigMoveTop(),t.closeContextmenu()}},{name:"图层置底",handler:()=>{i.selectedWidgetConfigMoveBottom(),t.closeContextmenu()}},{name:"图层上移",handler:()=>{i.selectedWidgetConfigMoveUp(),t.closeContextmenu()}},{name:"图层下移",handler:()=>{i.selectedWidgetConfigMoveDown(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"成组",disable:0===i.multipleSelectedWidgetConfigs.length,handler:()=>{i.bunchMultipleSelected(),t.closeContextmenu()}},{name:"锁定图层",handler:()=>{i.lockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"解锁图层",handler:()=>{i.unlockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"复制",disable:i.multipleSelectedWidgetConfigs.length>0,handler:()=>{i.cloneSelectedWidgetConfig(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"删除",handler:()=>{i.deleteAllSelectedWidgetConfig(),t.closeContextmenu()}}])}else if(this.pageEditor instanceof T["a"]){const i=this.pageEditor;(this.pageEditor.selectedWidgetConfig||this.pageEditor.multipleSelectedWidgetConfigs.length>0)&&this.editor.openContextmenu(e.clientX,e.clientY,[{name:"图层置顶",handler:()=>{i.selectedWidgetConfigMoveTop(),t.closeContextmenu()}},{name:"图层置底",handler:()=>{i.selectedWidgetConfigMoveBottom(),t.closeContextmenu()}},{name:"图层上移",handler:()=>{i.selectedWidgetConfigMoveUp(),t.closeContextmenu()}},{name:"图层下移",handler:()=>{i.selectedWidgetConfigMoveDown(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"锁定图层",handler:()=>{i.lockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"解锁图层",handler:()=>{i.unlockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"复制",disable:i.multipleSelectedWidgetConfigs.length>0,handler:()=>{i.cloneSelectedWidgetConfig(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"删除",handler:()=>{i.deleteAllSelectedWidgetConfig(),t.closeContextmenu()}}])}}handleWidgetItemDbclick(){}};Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],N.prototype,"pageEditor",void 0),Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(S="undefined"!==typeof I["a"]&&I["a"])?S:Object)],N.prototype,"editor",void 0),Object(r["a"])([Object(c["b"])("nim-app-context"),Object(r["b"])("design:type","function"===typeof(_="undefined"!==typeof b["a"]&&b["a"])?_:Object)],N.prototype,"context",void 0),N=Object(r["a"])([Object(c["a"])({components:{"vue-drag":l.a,LayerItem:v,LayerGroupItem:E}})],N);var P=N,M=P,B=(i("5c1f"),Object(j["a"])(M,a,s,!1,null,"b5f71e94",null));t["default"]=B.exports},"4b41":function(e,t,i){"use strict";i("0154")},"4b64":function(e,t,i){"use strict";i("3182")},"4c59":function(e,t,i){"use strict";i("0ff6")},"51a7":function(e,t,i){"use strict";i("26ca")},5261:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="5261"},"542b":function(e,t,i){"use strict";i("7b1b")},"566c":function(e,t,i){"use strict";var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"Renderer"},[t("div",{staticClass:"main-panel",style:e.mainPanelStyle},e._l(e.widgetConfigs,(function(e){return t("WidgetWrapper",{key:e.id,ref:e.id,refInFor:!0,attrs:{widgetConfig:e}})})),1)])},s=[],r=(i("14d9"),i("9ab4")),c=i("6f49"),d=i("406e"),l=i("60a3"),p=i("9e0a"),u=i("8d7b");let f=class extends l["f"]{constructor(){super(...arguments),this.width=0,this.height=0}get widgetConfigs(){return[...this.pageConfig.widgets].reverse()}get mainPanelStyle(){const e="",t=this.pageConfig,i=t.bgImageAsset;let n=1,o=1;this.autoScale&&(n=this.height/t.height,o=this.width/t.width);const a={width:t.width+"px",height:t.height+"px",backgroundColor:t.bgColor,backgroundImage:"",backgroundSize:"",transform:`translate(0.1px, 0.1px) scaleX(${o.toFixed(2)}) scaleY(${n.toFixed(2)})`,transformOrigin:"0% 0%"};return i&&(a.backgroundImage=`url('${i.isBuiltIn?"":e}${i.url}')`,a.backgroundSize="100% 100%"),a}get fatWidgetConfigs(){let e=[];const t=this.widgetConfigs;for(const i of t)i.isGroup&&i.children?e=e.concat(i.children):e.push(i);return e}getWidgetConfig(e){const t=this.fatWidgetConfigs;return t&&t.find(t=>t.id===e)}getWidgetWrapper(e){const t=this.$refs;if(t[e]&&Array.isArray(t[e])){const i=t[e][0];if(i)return i}const i=this.getWidgetConfig(e);if(i&&i.groupId){const n=t[i.groupId][0],o=n.$refs.component,a=o.$refs[e][0];return a}return null}onResize(e){this.width=e.clientWidth,this.height=e.clientHeight}mounted(){this.onResize(this.$el),Object(d["a"])(this.$el,this.onResize)}beforeDestroy(){Object(d["b"])(this.$el,this.onResize)}};Object(r["a"])([Object(l["b"])("nim-app-context"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof p["a"]&&p["a"])?n:Object)],f.prototype,"context",void 0),Object(r["a"])([Object(l["c"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof c["a"]&&c["a"])?o:Object)],f.prototype,"pageConfig",void 0),Object(r["a"])([Object(l["c"])({default:!1}),Object(r["b"])("design:type",Boolean)],f.prototype,"autoScale",void 0),f=Object(r["a"])([Object(l["a"])({components:{WidgetWrapper:()=>Promise.resolve(u["default"])}})],f);var b=f,g=b,h=(i("1b87"),i("2877")),y=Object(h["a"])(g,a,s,!1,null,"778dbbcc",null);t["a"]=y.exports},"56b9":function(e,t,i){},"58fb":function(e,t,i){"use strict";function n(e){return new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{const o=new Image;o.src=""+n.result,o.onload=()=>{t({name:e.name,width:o.width,height:o.height,size:e.size})},o.onerror=e=>{i(e)}},n.onerror=e=>{i(e)}})}i.d(t,"a",(function(){return n}))},"5a8c":function(e,t,i){},"5a8e":function(e,t,i){},"5ac0":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-tabs",{staticClass:"WidgetConfigPanel",attrs:{type:"border-card"}},[t("el-tab-pane",{key:"base",attrs:{label:"通用"}},[t("div",{staticClass:"widgetDefinition"},[e.widgetDefinition?t("div",[t("span",[e._v(e._s(e.widgetDefinition.displayName))]),t("span",{staticClass:"version"},[e._v("ver."+e._s(e.widgetDefinition.version))])]):e.widgetConfig.isGroup?t("div",[e._v(" 组件组 ")]):t("div",{staticClass:"error"},[e._v(" 该组件的定义已被删除 ")]),t("input",{ref:"input",staticClass:"id",attrs:{type:"text",title:e.widgetConfig.id,disabled:""},domProps:{value:e.widgetConfig.id}}),t("span",{staticClass:"copy-btn",attrs:{title:"复制ID"},on:{click:e.copyId}},[e._v("复制")])]),e.widgetConfig?t("BaseConfig",{attrs:{widgetConfig:e.widgetConfig}}):e._e(),t("el-button",{staticClass:"button",staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini"},on:{click:e.handleCloneButtonClick}},[e._v("克隆")]),t("el-button",{staticClass:"button",staticStyle:{width:"100%"},attrs:{type:"danger",size:"mini"},on:{click:e.handleDeleteButtonClick}},[e._v("删除")])],1),e.attrGroupSchemas.length?t("el-tab-pane",{key:"attrs",attrs:{label:"组件"}},[e._l(e.attrGroupSchemas,(function(i,n){return["group"===i.type?t("AutoAttrGroup",{key:n,attrs:{group:i,object:e.attrGroups}}):e._e()]}))],2):e._e(),t("el-tab-pane",{key:"data",attrs:{label:"数据"}},[t("DataSourceConfig",{attrs:{widgetConfig:e.widgetConfig,widgetWrapper:e.widgetWrapper}})],1)],1)},o=[],a=i("9ab4"),s=i("60a3"),r=i("3b9d"),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"AutoAttrGroup",class:{disable:e.disable}},[t("div",{staticClass:"label"},[e.group.hasSwitch?t("el-checkbox",{staticClass:"checkbox",model:{value:e.groupObject.switch,callback:function(t){e.$set(e.groupObject,"switch",t)},expression:"groupObject.switch"}}):e._e(),t("span",[e._v(e._s(e.group.name))]),e.disable?t("span",{staticClass:"expand-button"},[e._v("展开")]):t("span",{staticClass:"expand-button",on:{click:function(t){e.extended=!e.extended}}},[e._v(e._s(e.extended?"收起":"展开"))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.disable&&e.extended,expression:"(!disable) && extended"}],staticClass:"attrs"},e._l(e.attrSchemas,(function(i,n){return t("AttrItem",{key:n,staticClass:"attr-item",attrs:{object:e.groupObject,label:i.name,prop:i.prop,type:i.type,options:i.options,min:i.min,max:i.max,step:i.step}})})),1)])},d=[],l=i("e58b");let p=class extends s["f"]{constructor(){super(...arguments),this.extended=!0}get attrSchemas(){return this.group.attrSchemas}get groupObject(){const e=this.group.prop;return this.object[e]}get disable(){return this.group.hasSwitch&&!this.groupObject.switch}};Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],p.prototype,"group",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],p.prototype,"object",void 0),p=Object(a["a"])([Object(s["a"])({components:{AttrItem:l["a"]}})],p);var u,f,b,g=p,h=g,y=(i("4314"),i("2877")),m=Object(y["a"])(h,c,d,!1,null,"5d75cf36",null),j=m.exports,O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"BaseConfig"},[t("AttrItem",{attrs:{object:e.widgetBaseConfig,label:"名称",prop:"displayName",type:"string"}}),e.widgetDefinition?t("AttrItem",{attrs:{object:e.widgetBaseConfig,disable:e.widgetDefinition.fixation||e.widgetDefinition.autoSize||e.widgetConfig.isGroup,type:"size"}}):e._e(),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"position"}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,label:"锚点",prop:"anchor",type:"select",options:[{label:"左上",value:"left-top"},{label:"右上",value:"right-top"},{label:"左下",value:"left-bottom"},{label:"右下",value:"right-bottom"},{label:"中上",value:"center-top"},{label:"中下",value:"center-bottom"},{label:"左中",value:"left-center"},{label:"右中",value:"right-center"},{label:"中心",value:"center"}]}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"skew"}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"number",label:"旋转(x轴)",prop:"rotateX",min:0,max:360,step:1}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"number",label:"旋转(y轴)",prop:"rotateY",min:0,max:360,step:1}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"number",label:"旋转(z轴)",prop:"rotateZ",min:0,max:360,step:1}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"number",label:"透明度",prop:"transparent",min:0,max:1,step:.01}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,label:"鼠标样式",prop:"cursor",type:"select",options:[{label:"默认",value:"default"},{label:"点击",value:"pointer"}]}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"checkbox",label:"图层锁定",prop:"locked"}}),t("AttrItem",{attrs:{object:e.widgetBaseConfig,type:"checkbox",label:"交互",prop:"canInteract"}})],1)},v=[],C=i("7fe8"),x=i("67b0"),w=i("9e0a");let S=class extends s["f"]{get widgetBaseConfig(){return this.widgetConfig.base}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}};Object(a["a"])([Object(s["b"])("pageEditor"),Object(a["b"])("design:type","function"===typeof(u="undefined"!==typeof x["a"]&&x["a"])?u:Object)],S.prototype,"pageEditor",void 0),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(f="undefined"!==typeof w["a"]&&w["a"])?f:Object)],S.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(b="undefined"!==typeof C["a"]&&C["a"])?b:Object)],S.prototype,"widgetConfig",void 0),S=Object(a["a"])([Object(s["a"])({components:{AttrItem:l["a"]}})],S);var _,A,D=S,W=D,E=(i("3cd5"),Object(y["a"])(W,O,v,!1,null,"184ed491",null)),k=E.exports,T=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"DataSourceConfig"},[t("MonacoEditor",{staticClass:"monaco-editor",attrs:{language:"json",value:e.dataSourceDataJson,"read-only":""}}),t("el-button",{staticClass:"button",attrs:{type:"primary",size:"mini"},on:{click:e.openDataSourceConfigEditorDrawer}},[e._v("编辑")]),t("DataSourceConfigEditorDrawer",{ref:"dataSourceConfigEditorDrawer",attrs:{widgetWrapper:e.widgetWrapper}})],1)},I=[],N=i("5edc"),P=i("8d7b"),M=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-drawer",{staticClass:"DataSourceConfigEditorDrawer",attrs:{size:"600px","with-header":!1,visible:e.opened,modal:!0,"append-to-body":"","modal-append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.opened=t},closed:e.handleClosed}},[e.dataSourceConfig?t("div",[t("div",{staticClass:"header"},[e._v("设置数据源")]),t("DataSourceConfigEditor",{staticClass:"body",attrs:{dataSourceConfig:e.dataSourceConfig,widgetWrapper:e.widgetWrapper}})],1):e._e()])},B=[],L=i("92ef"),R=i("794b"),F=i("cd3f"),$=i.n(F);let z=class extends s["f"]{constructor(){super(...arguments),this.opened=!1,this.dataSourceConfig=null}open(e){return this.dataSourceConfig=s["f"].observable($()(e)||new L["a"]),this.opened=!0,new Promise((e,t)=>{this.resolve=e,this.reject=t})}handleClosed(){this.dataSourceConfig?this.resolve(this.dataSourceConfig):this.reject()}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(_="undefined"!==typeof w["a"]&&w["a"])?_:Object)],z.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({required:!1}),Object(a["b"])("design:type","function"===typeof(A="undefined"!==typeof P["default"]&&P["default"])?A:Object)],z.prototype,"widgetWrapper",void 0),z=Object(a["a"])([Object(s["a"])({components:{AttrItem:l["a"],MonacoEditor:N["a"],DataSourceConfigEditor:R["a"]}})],z);var G,V,q,J,U,X=z,Y=X,H=(i("7769"),Object(y["a"])(Y,M,B,!1,null,"430a826f",null)),Z=H.exports;let Q=class extends s["f"]{get widgetDataSourceConfig(){return this.widgetConfig.dataSource}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get dataSourceDataJson(){var e;return JSON.stringify(null===(e=this.widgetWrapper)||void 0===e||null===(e=e.dataSource)||void 0===e?void 0:e.data,null,2)}async openDataSourceConfigEditorDrawer(){this.widgetConfig.dataSource=await this.dataSourceConfigEditorDrawer.open(this.widgetDataSourceConfig)}};Object(a["a"])([Object(s["b"])("pageEditor"),Object(a["b"])("design:type","function"===typeof(G="undefined"!==typeof x["a"]&&x["a"])?G:Object)],Q.prototype,"pageEditor",void 0),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(V="undefined"!==typeof w["a"]&&w["a"])?V:Object)],Q.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(q="undefined"!==typeof C["a"]&&C["a"])?q:Object)],Q.prototype,"widgetConfig",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(J="undefined"!==typeof P["default"]&&P["default"])?J:Object)],Q.prototype,"widgetWrapper",void 0),Object(a["a"])([Object(s["e"])(),Object(a["b"])("design:type","function"===typeof(U="undefined"!==typeof Z&&Z)?U:Object)],Q.prototype,"dataSourceConfigEditorDrawer",void 0),Q=Object(a["a"])([Object(s["a"])({components:{AttrItem:l["a"],MonacoEditor:N["a"],DataSourceConfigEditorDrawer:Z}})],Q);var K,ee,te,ie,ne=Q,oe=ne,ae=(i("b718"),Object(y["a"])(oe,T,I,!1,null,"35ba3138",null)),se=ae.exports;let re=class extends s["f"]{get attrGroups(){var e;return null===(e=this.widgetConfig)||void 0===e?void 0:e.base.attrGroups}get widgetDefinition(){return this.widgetConfig?this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId):null}get attrGroupSchemas(){var e;return(null===(e=this.widgetDefinition)||void 0===e?void 0:e.attrGroupSchemas)||[]}handleCloneButtonClick(){this.$emit("clone")}handleDeleteButtonClick(){this.$emit("delete")}copyId(){const e=this.$refs.input;e.disabled=!1,e.focus(),e.select(),document.execCommand("copy"),e.disabled=!0;const t=document.createElement("input");window.document.body.appendChild(t),t.select(),this.$nextTick(()=>{window.document.body.removeChild(t)}),this.$message({message:"ID复制成功",duration:500}),console.log("ID："),console.log(this.widgetConfig.id)}};Object(a["a"])([Object(s["b"])("pageEditor"),Object(a["b"])("design:type","function"===typeof(K="undefined"!==typeof x["a"]&&x["a"])?K:Object)],re.prototype,"pageEditor",void 0),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(ee="undefined"!==typeof w["a"]&&w["a"])?ee:Object)],re.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(te="undefined"!==typeof C["a"]&&C["a"])?te:Object)],re.prototype,"widgetConfig",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(ie="undefined"!==typeof P["default"]&&P["default"])?ie:Object)],re.prototype,"widgetWrapper",void 0),re=Object(a["a"])([Object(s["a"])({components:{CommonPanel:r["a"],BaseConfig:k,AutoAttrGroup:j,DataSourceConfig:se}})],re);var ce=re,de=ce,le=(i("ca51"),Object(y["a"])(de,n,o,!1,null,"eaf46fea",null));t["a"]=le.exports},"5ad6":function(e,t,i){},"5aee":function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ApplicationConfigTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","th-large"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名应用",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get applicationConfig(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.applicationConfig&&!e.subtype)}handleClick(){this.editor.previewNimObj(this.applicationConfig)}handleDbClick(){this.editor.openNimObj(this.applicationConfig)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("a755"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"6a501a72",null);t["default"]=g.exports},"5b3b":function(e,t,i){},"5b54":function(e,t,i){},"5c1f":function(e,t,i){"use strict";i("6014")},"5d05":function(e,t,i){},"5dff":function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"InteractionTriggerTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","scroll"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名大屏",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get interactionTrigger(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.interactionTrigger)}handleClick(){this.editor.previewNimObj(this.interactionTrigger)}handleDbClick(){this.editor.openNimObj(this.interactionTrigger)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个触发器？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteInteractionTriggers(this.interactionTrigger)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("baee"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"273e4c3a",null);t["default"]=g.exports},"5e3c":function(e,t,i){},"5e9d":function(e,t,i){},"5ea6":function(e,t,i){"use strict";i("83c6")},"5edc":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"MonacoEditor",class:{fullScreen:e.fullScreen},attrs:{tabindex:e.fullScreen?"-1":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleKeydown.apply(null,arguments)}}},[t("div",{staticClass:"slot"},[e._t("default")],2),t("div",{staticClass:"container"},[t("div",{ref:"container",staticStyle:{height:"100%"}}),e.fullScreen?t("font-awesome-icon",{staticClass:"full-screen-btn",attrs:{icon:["fas","compress"]},on:{click:function(t){e.fullScreen=!1}}}):t("font-awesome-icon",{staticClass:"full-screen-btn",attrs:{icon:["fas","expand"]},on:{click:function(t){e.fullScreen=!0}}})],1),t("div",{staticClass:"slot"},[e._t("after")],2)])},o=[],a=i("9ab4"),s=i("60a3"),r=i("406e");let c=class extends s["f"]{constructor(){super(...arguments),this.innerChange=!1,this.isSetingValue=!1,this.fullScreen=!1}resizeHandler(){this.$nextTick(()=>{this.$editor&&this.$editor.layout()})}valueChange(e){this.innerChange?this.innerChange=!1:this.$editor&&(this.isSetingValue=!0,this.$editor.setValue(e||""),this.isSetingValue=!1)}async handleKeydown(e){this.fullScreen&&(this.fullScreen=!1,e.stopPropagation(),this.resizeHandler())}fullScreenChange(e){e?this.$nextTick(()=>{this.$el.focus()}):this.resetEditor()}async libSourceChange(e){const t=await window.getMonaco();t.languages.typescript.javascriptDefaults.setExtraLibs([{content:e}])}async resetEditor(){const e=await window.getMonaco();e.languages.typescript.javascriptDefaults.addExtraLib(this.libSource),e.editor.createModel(this.libSource,"typescript"),this.$editor&&(this.$editor.dispose(),await this.$nextTick()),this.$editor=e.editor.create(this.$refs.container,{automaticLayout:!0,readOnly:this.readOnly,contextmenu:!0,fixedOverflowWidgets:!0,fontFamily:'Menlo-Regular, Monaco, Menlo, Consolas, "Ubuntu Mono", monospace',formatOnPaste:!0,formatOnType:!0,lineNumbers:!0,lineDecorationsWidth:10,lineHeight:18,lineNumbersMinChars:3,theme:"vs-dark",minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent",scrollbar:{horizontalHasArrows:!1,horizontal:"hidden"},scrollBeyondLastLine:!1,snippetSuggestions:!0,wordBasedSuggestions:!0,quickSuggestions:!0,value:this.value,language:this.language});const t=this.$editor.getModel();t&&t.updateOptions({tabSize:2}),this.$editor.getAction("editor.action.formatDocument").run(),this.$editor.onDidChangeModelContent(()=>{if(!this.isSetingValue)try{const e=this.$editor.getValue();this.innerChange=!0,this.$emit("input",e)}catch(e){}})}async mounted(){this.resetEditor(),Object(r["a"])(this.$el,this.resizeHandler)}beforeDestroy(){this.$editor.dispose(),Object(r["b"])(this.$el,this.resizeHandler)}};Object(a["a"])([Object(s["c"])({type:String,default:"json"}),Object(a["b"])("design:type",String)],c.prototype,"language",void 0),Object(a["a"])([Object(s["c"])({type:String,required:!1}),Object(a["b"])("design:type",String)],c.prototype,"value",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],c.prototype,"readOnly",void 0),Object(a["a"])([Object(s["c"])({type:String,required:!1,default:""}),Object(a["b"])("design:type",Boolean)],c.prototype,"libSource",void 0),Object(a["a"])([Object(s["g"])("value"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[String]),Object(a["b"])("design:returntype",void 0)],c.prototype,"valueChange",null),Object(a["a"])([Object(s["g"])("fullScreen"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[Boolean]),Object(a["b"])("design:returntype",void 0)],c.prototype,"fullScreenChange",null),Object(a["a"])([Object(s["g"])("libSource"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[String]),Object(a["b"])("design:returntype",Promise)],c.prototype,"libSourceChange",null),c=Object(a["a"])([s["a"]],c);var d=c,l=d,p=(i("8ace"),i("2877")),u=Object(p["a"])(l,n,o,!1,null,"621af8c2",null);t["a"]=u.exports},"5fbf":function(e,t,i){},6013:function(e,t,i){},6014:function(e,t,i){},"60eb":function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"InteractionTriggerFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","scroll"]}}),t("span",[e._v("触发器")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建触发器",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createInteractionTrigger(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("00e8"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"73a66c76",null);t["default"]=f.exports},6106:function(e,t,i){"use strict";i("b0a6")},"621b":function(e,t,i){},6253:function(e,t,i){},"63f4":function(e,t,i){},"63f4d":function(e,t,i){"use strict";i("621b")},6534:function(e,t,i){"use strict";i("7be4")},"66fd":function(e,t,i){"use strict";i("0161")},"670c":function(e,t,i){},6759:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"VariableFolderTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[(e.expanded,t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","list-ul"]}})),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","subscript"]}}),t("span",[e._v("变量列表")])],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get applicationConfig(){return this.treeContext.data.object}get node(){return this.treeContext.node}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.applicationConfig)}handleClick(){this.editor.previewNimObj(this.applicationConfig,"variable")}handleDbClick(){this.editor.openNimObj(this.applicationConfig,"variable")}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}}])}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("9d70"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"9706fe42",null);t["default"]=f.exports},"67a6":function(e,t,i){"use strict";i("69c8")},"67b0":function(e,t,i){"use strict";var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PageEditor",on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)}}},[t("div",{staticClass:"main",on:{click:e.clearSelected}},[t("OperatingSpace",{ref:"operatingSpace",staticClass:"operating-space",attrs:{widgetConfigs:e.widgetConfigs},on:{dropWidgetdefinition:e.addWidgetde}},[t("Renderer",{ref:"renderer",staticClass:"renderer",attrs:{pageConfig:e.pageConfig}})],1)],1),t("VariableSizeZone",{staticClass:"right-panel",class:{opened:e.opened},style:{right:e.opened?0:"-"+e.w+"px"},attrs:{width:350,minWidth:300,maxWidth:1200,"left-controller":""},on:{"size-change":e.handleSizeChange}},[t("ConfigPanel",{staticClass:"config-panel",attrs:{pageConfig:e.pageConfig,getScreenshot:e.getScreenshot}}),t("span",{staticClass:"close-btn",on:{click:function(t){e.opened=!1}}},[e._v("关闭")])],1),e.opened?e._e():t("span",{staticClass:"open-btn",on:{click:function(t){e.opened=!0}}},[e._v("配置")])],1)},a=[],s=(i("14d9"),i("9ab4")),r=i("f850"),c=i("60a3"),d=i("b4dd"),l=i("566c"),p=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ConfigPanel",on:{click:function(e){e.stopPropagation()},contextmenu:function(e){e.stopPropagation(),e.preventDefault()}}},["page"===e.showType?t("PageConfigPanel",{attrs:{pageConfig:e.pageConfig,getScreenshot:e.getScreenshot}}):"single"===e.showType||"group"===e.showType?t("WidgetConfigPanel",{key:e.widgetId,attrs:{widgetConfig:e.pageEditor.selectedWidgetConfig,widgetWrapper:e.widgetWrapper},on:{delete:e.pageEditor.deleteAllSelectedWidgetConfig,clone:e.pageEditor.cloneSelectedWidgetConfig}}):"multiple"===e.showType?t("MultipleWidgetConfigPanel"):e._e()],1)},u=[],f=i("9e0a"),b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"PageConfigPanel"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("页面配置")])]),t("div",{staticClass:"attr-list"},[t("AttrItem",{attrs:{object:e.pageConfig,label:"名称",prop:"name",type:"string"}}),t("AttrItem",{attrs:{object:e.pageConfig,label:"尺寸",type:"size"}}),t("AttrItem",{attrs:{object:e.pageConfig,label:"背景颜色",prop:"bgColor",type:"color"}}),t("AttrItem",{attrs:{object:e.pageConfig,label:"背景图片",prop:"bgImageAsset",type:"imageAsset"}}),t("AttrItem",{staticClass:"from-item",attrs:{object:e.pageConfig,label:"缩略图",prop:"screenShotUrl",type:"Screenshot",getScreenshot:e.getScreenshot}})],1)])},g=[],h=i("6f49"),y=i("3b9d"),m=i("e58b");let j=class extends c["f"]{};Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof h["a"]&&h["a"])?n:Object)],j.prototype,"pageConfig",void 0),Object(s["a"])([Object(c["c"])({required:!0}),Object(s["b"])("design:type",Function)],j.prototype,"getScreenshot",void 0),j=Object(s["a"])([Object(c["a"])({components:{CommonPanel:y["a"],AttrItem:m["a"]}})],j);var O,v=j,C=v,x=(i("1c22"),i("2877")),w=Object(x["a"])(C,b,g,!1,null,"19bfe80f",null),S=w.exports,_=i("5ac0"),A=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CommonPanel",{staticClass:"MultipleWidgetConfigPanel",scopedSlots:e._u([{key:"header",fn:function(){return[e._v("多选")]},proxy:!0}])},[t("div",{staticClass:"panel-body"},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini"},on:{click:e.bunchMultipleSelected}},[e._v("成组")])],1)])},D=[];let W=class extends c["f"]{bunchMultipleSelected(){this.pageEditor.bunchMultipleSelected()}};Object(s["a"])([Object(c["b"])("pageEditor"),Object(s["b"])("design:type","function"===typeof(O="undefined"!==typeof ie&&ie)?O:Object)],W.prototype,"pageEditor",void 0),W=Object(s["a"])([Object(c["a"])({components:{CommonPanel:y["a"]}})],W);var E,k=W,T=k,I=(i("0436"),Object(x["a"])(T,A,D,!1,null,"6c9882e8",null)),N=I.exports;let P=class extends c["f"]{get pageConfig(){return this.pageEditor.pageConfig}get widgetId(){var e;return(null===(e=this.pageEditor.selectedWidgetConfig)||void 0===e?void 0:e.id)||""}get widgetWrapper(){return this.pageEditor.getWidgetWrapper(this.widgetId)}get showType(){const e=this.pageEditor,t=e.selectedWidgetConfig;return e.isMultipleSelected?"multiple":t?t.isGroup?"group":"single":"page"}};Object(s["a"])([Object(c["b"])("pageEditor"),Object(s["b"])("design:type",Object)],P.prototype,"pageEditor",void 0),Object(s["a"])([Object(c["b"])("nim-app-context"),Object(s["b"])("design:type","function"===typeof(E="undefined"!==typeof f["a"]&&f["a"])?E:Object)],P.prototype,"context",void 0),Object(s["a"])([Object(c["c"])({required:!0}),Object(s["b"])("design:type",Function)],P.prototype,"getScreenshot",void 0),P=Object(s["a"])([Object(c["a"])({components:{PageConfigPanel:S,WidgetConfigPanel:_["a"],MultipleWidgetConfigPanel:N}})],P);var M,B,L,R,F,$=P,z=$,G=(i("04df"),Object(x["a"])(z,p,u,!1,null,"c4b93dd8",null)),V=G.exports,q=i("7fe8"),J=i("4a8a"),U=i("cb7e"),X=i("cd3f"),Y=i.n(X),H=i("8ff1"),Z=i("1cdf");let Q=class extends c["f"]{constructor(){super(...arguments),this.w=350,this.opened=!0,this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[],this.hoverWidgetConfig=null,this.ctrlLeftPress=!1}get pageEditor(){return this}get pageConfig(){return this.objEditorInfo.obj}get widgetConfigs(){return this.pageConfig.widgets}clearSelected(){this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[]}selectWidgetConfig(e){if(this.editor.closeContextmenu(),e.groupId||e.isGroup)return this.clearSelected(),void(this.selectedWidgetConfig=e);if(this.selectedWidgetConfig&&(this.selectedWidgetConfig.groupId||this.selectedWidgetConfig.isGroup))this.selectedWidgetConfig=e;else if(this.ctrlLeftPress)if(this.multipleSelectedWidgetConfigs.length>0){const t=this.multipleSelectedWidgetConfigs.indexOf(e);t>-1?(this.multipleSelectedWidgetConfigs.splice(t,1),1===this.multipleSelectedWidgetConfigs.length&&(this.selectedWidgetConfig=this.multipleSelectedWidgetConfigs[0],this.multipleSelectedWidgetConfigs=[])):this.multipleSelectedWidgetConfigs.push(e)}else this.selectedWidgetConfig?(this.multipleSelectedWidgetConfigs=[this.selectedWidgetConfig,e],this.selectedWidgetConfig=null):this.selectedWidgetConfig=e;else this.multipleSelectedWidgetConfigs=[],this.selectedWidgetConfig=e}get widgetConfigsReverse(){return[...this.widgetConfigs].reverse()}isSelectedWidgetConfig(e){return e===this.selectedWidgetConfig||this.multipleSelectedWidgetConfigs.indexOf(e)>-1}get isMultipleSelected(){return this.multipleSelectedWidgetConfigs.length>0}getWidgetWrapper(e){return this.renderer.getWidgetWrapper(e)}getWidgetConfig(e){const t=this.pageConfig.widgets;return t&&t.find(t=>t.id===e)}deleteWidgetConfig(e){let t=this.pageConfig.widgets,i=null;e.groupId&&(i=this.getWidgetConfig(e.groupId),i&&i.children&&(t=i.children));const n=t.indexOf(e);n>-1&&t.splice(n,1),i&&i.children&&0===i.children.length&&this.deleteWidgetConfig(i)}async deleteAllSelectedWidgetConfig(){if(this.selectedWidgetConfig||this.multipleSelectedWidgetConfigs.length)try{await this.$confirm("是否删除选中的组件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});for(const e of[this.selectedWidgetConfig,...this.multipleSelectedWidgetConfigs])e&&this.deleteWidgetConfig(e);this.selectedWidgetConfig=null,this.multipleSelectedWidgetConfigs=[]}catch(e){}}async cloneSelectedWidgetConfig(){if(this.selectedWidgetConfig){const e=Y()(this.selectedWidgetConfig);e.id=Object(H["a"])("WidgetConfig"),e.base.displayName+="的复制",e.base.x+=50,e.base.y+=50,e.groupId="",e.children&&e.children.forEach(t=>{t.id=Object(H["a"])("WidgetConfig"),t.groupId=e.id}),this.pageConfig.widgets.unshift(e),this.selectedWidgetConfig=e}}bunchMultipleSelected(){const e=this.multipleSelectedWidgetConfigs,t=[],i=Math.min(...e.map(e=>e.base.x)),n=Math.min(...e.map(e=>e.base.y)),o=Math.max(...e.map(e=>e.base.x+e.base.width)),a=Math.max(...e.map(e=>e.base.y+e.base.height)),s=new q["a"];s.isGroup=!0;for(const r of e)this.deleteWidgetConfig(r),r.groupId=s.id,r.base.x-=i,r.base.y-=n,t.push(r);s.base.displayName="组",s.base.x=i,s.base.y=n,s.base.width=o-i,s.base.height=a-n,s.children=t,this.pageConfig.widgets.unshift(s),this.clearSelected()}selectedWidgetConfigMoveUp(){const e=this.selectedWidgetConfig;let t=this.widgetConfigs;if(null!==e&&void 0!==e&&e.groupId){const i=t.find(t=>t.id===e.groupId);t=(null===i||void 0===i?void 0:i.children)||[]}if(e){const i=t.indexOf(e);if(i>0){const n=t[i-1];this.$set(t,i-1,e),this.$set(t,i,n)}}}selectedWidgetConfigMoveDown(){const e=this.selectedWidgetConfig;let t=this.widgetConfigs;if(null!==e&&void 0!==e&&e.groupId){const i=t.find(t=>t.id===e.groupId);t=(null===i||void 0===i?void 0:i.children)||[]}if(e){const i=t.indexOf(e);if(i<t.length-1){const n=t[i+1];this.$set(t,i+1,e),this.$set(t,i,n)}}}selectedWidgetConfigMoveTop(){const e=this.selectedWidgetConfig;let t=this.widgetConfigs;if(null!==e&&void 0!==e&&e.groupId){const i=t.find(t=>t.id===e.groupId);t=(null===i||void 0===i?void 0:i.children)||[]}if(e){const i=t.indexOf(e);i>-1&&t.splice(i,1),t.unshift(e)}}selectedWidgetConfigMoveBottom(){const e=this.selectedWidgetConfig;let t=this.widgetConfigs;if(null!==e&&void 0!==e&&e.groupId){const i=t.find(t=>t.id===e.groupId);t=(null===i||void 0===i?void 0:i.children)||[]}if(e){const i=t.indexOf(e);i>-1&&t.splice(i,1),t.push(e)}}lockeAllSelectedWidgetConfigs(){const e=this.selectedWidgetConfig,t=this.multipleSelectedWidgetConfigs;e&&(e.base.locked=!0),t.forEach(e=>{e.base.locked=!0})}unlockeAllSelectedWidgetConfigs(){const e=this.selectedWidgetConfig,t=this.multipleSelectedWidgetConfigs;e&&(e.base.locked=!1),t.forEach(e=>{e.base.locked=!1})}async addWidgetde({id:e,x:t,y:i}){const n=this.context.getWidgetDefinition(e);if(n){const e=await this.context.generateWidgetConfig(n);e.base.x=t,e.base.y=i,this.widgetConfigs.unshift(e)}}handleContextmenu(e){const t=this.editor;this.multipleSelectedWidgetConfigs.length>0?this.editor.openContextmenu(e.clientX,e.clientY,[{name:"成组",disable:0===this.multipleSelectedWidgetConfigs.length,handler:()=>{this.bunchMultipleSelected(),t.closeContextmenu()}},{name:"锁定图层",handler:()=>{this.lockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"解锁图层",handler:()=>{this.unlockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"复制",disable:this.multipleSelectedWidgetConfigs.length>0,handler:()=>{this.cloneSelectedWidgetConfig(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"删除",handler:()=>{this.deleteAllSelectedWidgetConfig(),t.closeContextmenu()}}]):this.selectedWidgetConfig&&this.editor.openContextmenu(e.clientX,e.clientY,[{name:"图层置顶",handler:()=>{this.selectedWidgetConfigMoveTop(),t.closeContextmenu()}},{name:"图层置底",handler:()=>{this.selectedWidgetConfigMoveBottom(),t.closeContextmenu()}},{name:"图层上移",handler:()=>{this.selectedWidgetConfigMoveUp(),t.closeContextmenu()}},{name:"图层下移",handler:()=>{this.selectedWidgetConfigMoveDown(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"成组",disable:0===this.multipleSelectedWidgetConfigs.length,handler:()=>{this.bunchMultipleSelected(),t.closeContextmenu()}},{name:"锁定图层",handler:()=>{this.lockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"解锁图层",handler:()=>{this.unlockeAllSelectedWidgetConfigs(),t.closeContextmenu()}},{name:"复制",disable:this.multipleSelectedWidgetConfigs.length>0,handler:()=>{this.cloneSelectedWidgetConfig(),t.closeContextmenu()}},{name:"split-line",handler:()=>{}},{name:"删除",handler:()=>{this.deleteAllSelectedWidgetConfig(),t.closeContextmenu()}}])}async handleKeydown(e){if(!this.active)return;const t=this.selectedWidgetConfig,i=this.multipleSelectedWidgetConfigs;if(17===e.keyCode&&(this.ctrlLeftPress=!0),46===e.keyCode&&await this.deleteAllSelectedWidgetConfig(),40===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.y+=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(38===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.y-=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(37===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.x-=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}if(39===e.keyCode){for(const n of[t,...i])n&&n.base&&(n.base.x+=e.ctrlKey?1:10);e.preventDefault(),e.stopPropagation()}}async handleKeyup(e){17===e.keyCode&&(this.ctrlLeftPress=!1)}handleSizeChange({w:e}){this.w=e}getScreenshot(){return this.operatingSpace.getScreenshot()}mounted(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup),this.$emit("mounted")}beforeDestroy(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup)}};Object(s["a"])([Object(c["b"])("nim-app-context"),Object(s["b"])("design:type","function"===typeof(M="undefined"!==typeof f["a"]&&f["a"])?M:Object)],Q.prototype,"context",void 0),Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(B="undefined"!==typeof Z["a"]&&Z["a"])?B:Object)],Q.prototype,"editor",void 0),Object(s["a"])([Object(c["d"])("pageEditor"),Object(s["b"])("design:type",Q),Object(s["b"])("design:paramtypes",[])],Q.prototype,"pageEditor",null),Object(s["a"])([Object(c["c"])({type:Object,required:!0}),Object(s["b"])("design:type","function"===typeof(L="undefined"!==typeof r["ObjEditorInfo"]&&r["ObjEditorInfo"])?L:Object)],Q.prototype,"objEditorInfo",void 0),Object(s["a"])([Object(c["c"])({type:Boolean,required:!0}),Object(s["b"])("design:type",Boolean)],Q.prototype,"active",void 0),Object(s["a"])([Object(c["e"])(),Object(s["b"])("design:type","function"===typeof(R="undefined"!==typeof l["a"]&&l["a"])?R:Object)],Q.prototype,"renderer",void 0),Object(s["a"])([Object(c["e"])(),Object(s["b"])("design:type","function"===typeof(F="undefined"!==typeof d["a"]&&d["a"])?F:Object)],Q.prototype,"operatingSpace",void 0),Q=Object(s["a"])([Object(c["a"])({components:{OperatingSpace:d["a"],ConfigPanel:V,Renderer:l["a"],LayersPanel:J["default"],VariableSizeZone:U["a"]}})],Q);var K=Q,ee=K,te=(i("51a7"),Object(x["a"])(ee,o,a,!1,null,"5626423d",null)),ie=t["a"]=te.exports},"680f":function(e,t,i){},"69c8":function(e,t,i){},"69f0":function(e,t,i){"use strict";i("7976")},"6ad4":function(e,t,i){"use strict";i("afc3")},"6b91":function(e,t,i){"use strict";i("084d")},"6ba6":function(e,t,i){"use strict";i("5e3c")},"6c2a":function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"UserScriptFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","code"]}}),t("span",[e._v("脚本")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建脚本",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createUserScript(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("c706"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"78e43a29",null);t["default"]=f.exports},"6cc7":function(e,t,i){},"6d28":function(e,t,i){"use strict";i("670c")},"6f49":function(e,t,i){"use strict";var n,o=i("9ab4"),a=i("a72c"),s=i("8ff1"),r=i("3374"),c=i("7fe8");let d=class{constructor(){this.id=Object(s["a"])("PageConfig"),this.name="页面",this.width=1920,this.height=1080,this.bgColor="#444444",this.bgImageAsset=null,this.widgets=[],this.inCarousel=!1,this.screenShotUrl=""}};Object(o["a"])([Object(a["c"])("id",String,!0),Object(o["b"])("design:type",String)],d.prototype,"id",void 0),Object(o["a"])([Object(a["c"])("name",String,!0),Object(o["b"])("design:type",Object)],d.prototype,"name",void 0),Object(o["a"])([Object(a["c"])("width",Number,!0),Object(o["b"])("design:type",Object)],d.prototype,"width",void 0),Object(o["a"])([Object(a["c"])("height",Number,!0),Object(o["b"])("design:type",Object)],d.prototype,"height",void 0),Object(o["a"])([Object(a["c"])("bgColor",String,!0),Object(o["b"])("design:type",Object)],d.prototype,"bgColor",void 0),Object(o["a"])([Object(a["c"])("bgImageAsset",r["a"],!0),Object(o["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"bgImageAsset",void 0),Object(o["a"])([Object(a["c"])("widgets",[c["a"]],!0),Object(o["b"])("design:type",Array)],d.prototype,"widgets",void 0),Object(o["a"])([Object(a["c"])("inCarousel",Boolean,!0),Object(o["b"])("design:type",Object)],d.prototype,"inCarousel",void 0),Object(o["a"])([Object(a["c"])("screenShotUrl",String,!0),Object(o["b"])("design:type",Object)],d.prototype,"screenShotUrl",void 0),d=Object(o["a"])([Object(a["b"])("PageConfig")],d),t["a"]=d},"711f":function(e,t,i){},"71d7":function(e,t,i){},7229:function(e,t,i){"use strict";i("98e2")},7314:function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1"),s=i("7fe8");let r=class{constructor(){this.id=Object(a["a"])("Combination"),this.name="自定义组合",this.width=450,this.height=200,this.bgColor="rgba(0,0,0,0)",this.icon="",this.widgets=[],this.staticData='{ "title": "标题" }'}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],r.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("width",Number,!0),Object(n["b"])("design:type",Object)],r.prototype,"width",void 0),Object(n["a"])([Object(o["c"])("height",Number,!0),Object(n["b"])("design:type",Object)],r.prototype,"height",void 0),Object(n["a"])([Object(o["c"])("bgColor",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"bgColor",void 0),Object(n["a"])([Object(o["c"])("icon",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"icon",void 0),Object(n["a"])([Object(o["c"])("widgets",[s["a"]],!0),Object(n["b"])("design:type",Array)],r.prototype,"widgets",void 0),Object(n["a"])([Object(o["c"])("staticData",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"staticData",void 0),r=Object(n["a"])([Object(o["b"])("PageConfig")],r),t["a"]=r},7485:function(e,t,i){},7502:function(e,t,i){"use strict";i.r(t);var n={};i.r(n),i.d(n,"NimAppEditor",(function(){return g["a"]})),i.d(n,"Director",(function(){return h["a"]})),i.d(n,"WidgetWrapper",(function(){return y["default"]}));var o=i("8bbf"),a=i.n(o),s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("NimAppEditor",{ref:"app",attrs:{id:"app",config:e.config,uploadFile:e.uploadFile},on:{"hook:mounted":e.handleAppMounted,save:e.handleSave}})},r=[],c=i("9ab4"),d=i("60a3"),l=i("ecee"),p=i("ad3d"),u=i("c074"),f=i("b702"),b=i("f2d1"),g=(i("cd22"),i("1cdf")),h=i("a9a7"),y=i("8d7b");l["c"].add(u["z"],f["a"],u["k"],u["l"],u["i"],u["q"],u["s"],f["g"],u["y"],u["x"],f["b"],u["d"],b["a"],u["j"],u["f"],f["c"],u["r"],u["n"],u["b"],b["b"],u["g"],f["f"],f["d"],u["w"],u["e"],u["h"],u["a"],u["p"],u["t"],u["o"],f["e"],u["c"],u["u"],u["v"],u["m"]),a.a.component("font-awesome-icon",p["a"]),window.addEventListener("wheel",e=>{e.ctrlKey&&e.preventDefault()},{passive:!1}),window.oncontextmenu=function(e){e.preventDefault()};var m,j=i("3374"),O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"TestWidget",style:{"background-color":e.baseConfig.attrGroups.attrGroup["bg-color"]}},[t("h1",[e._v(e._s(e.baseConfig.attrGroups.attrGroup["title"]))]),t("p",[e._v("data: "+e._s(e.data))]),t("p",[e._v(e._s(e.baseConfig))]),t("button",{on:{click:function(t){return e.handleClick("button1")}}},[e._v("按钮1")]),t("button",{on:{click:function(t){return e.handleClick("button2")}}},[e._v("按钮2")])])},v=[],C=i("da6d");let x=class extends d["f"]{handleClick(e){this.$emit("event","button",e)}doIncrease(){alert(1)}};Object(c["a"])([Object(d["c"])(),Object(c["b"])("design:type","function"===typeof(m="undefined"!==typeof C["a"]&&C["a"])?m:Object)],x.prototype,"baseConfig",void 0),Object(c["a"])([Object(d["c"])(),Object(c["b"])("design:type",Object)],x.prototype,"data",void 0),x=Object(c["a"])([d["a"]],x);var w=x,S=w,_=(i("95ec"),i("2877")),A=Object(_["a"])(S,O,v,!1,null,"a8c4d7b8",null),D=A.exports,W=i("dd9e"),E=i.n(W);const k=D.options;var T,I,N={id:k.name,name:k.name,version:"0.01",displayName:"测试组件",icon:E.a,group:"test",async:!1,actions:[{displayName:"自增",type:"doIncrease"}],events:[{type:"button",displayName:"按钮"}],component:D,dataSource:{staticData:'{"message": "组件数据"}'},attrSchemas:[],attrGroupSchemas:[{type:"group",name:"属性",prop:"attrGroup",hasSwitch:!0,switchDefaultValue:!0,attrSchemas:[{type:"theme",name:"主题",prop:"theme",value:"builtInTheme:0"},{type:"number",name:"数字",prop:"count",value:"0",max:1e5,min:0},{type:"color",name:"背景颜色",prop:"bg-color",value:"#888888"},{type:"string",name:"标题",prop:"title",value:"TestWidget"}]},{type:"group",name:"测试",prop:"test",hasSwitch:!0,switchDefaultValue:!0,attrSchemas:[{type:"theme",name:"主题",prop:"theme",value:"custom"}]}]},P=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"FixationWidget",style:{fontSize:e.baseConfig.attrGroups.attrGroup["fontSize"]+"px"}},[t("h1",[e._v("A")]),e.widgetConfig?t("WidgetWrapper",{staticStyle:{position:"relative"},attrs:{widgetConfig:e.widgetConfig,injectData:123}}):e._e()],1)},M=[],B=i("9e0a");let L=class extends d["f"]{constructor(){super(...arguments),this.widgetConfig=null}get wd(){const e=this.baseConfig.attrGroups.attrGroup.combination||"",t=this.context.getWidgetDefinition(e);return t}setWidgetConfig(e,t){e!==t&&this.wd&&(this.widgetConfig=this.context.generateWidgetConfigSync(this.wd)||null)}};Object(c["a"])([Object(d["b"])("nim-app-context"),Object(c["b"])("design:type","function"===typeof(T="undefined"!==typeof B["a"]&&B["a"])?T:Object)],L.prototype,"context",void 0),Object(c["a"])([Object(d["c"])(),Object(c["b"])("design:type","function"===typeof(I="undefined"!==typeof C["a"]&&C["a"])?I:Object)],L.prototype,"baseConfig",void 0),Object(c["a"])([Object(d["g"])("wd",{immediate:!0}),Object(c["b"])("design:type",Function),Object(c["b"])("design:paramtypes",[Object,Object]),Object(c["b"])("design:returntype",void 0)],L.prototype,"setWidgetConfig",null),L=Object(c["a"])([Object(d["a"])({components:{WidgetWrapper:y["default"]}})],L);var R=L,F=R,$=(i("67a6"),Object(_["a"])(F,P,M,!1,null,"e0cbcd64",null)),z=$.exports;const G=z.options;var V={id:G.name,name:G.name,version:"0.01",displayName:"自动尺寸组件",autoSize:!0,icon:E.a,group:"test",async:!1,actions:[],events:[],component:z,dataSource:{staticData:'{"message": "组件数据"}'},attrSchemas:[],attrGroupSchemas:[{type:"group",name:"属性",prop:"attrGroup",hasSwitch:!0,switchDefaultValue:!0,attrSchemas:[{type:"number",name:"字号",prop:"fontSize",value:12,max:1e5,min:12},{type:"combination",name:"组合",prop:"combination",value:""}]}]},q=i("bc3a"),J=i.n(q);let U={};try{const e=localStorage.getItem("config");e&&(U=JSON.parse(e))}catch(te){}let X=class extends d["f"]{constructor(){super(...arguments),this.config=U}async handleAppMounted(){const e=this.$refs.app,t=e.applicationContext;t.registerWidgetGroup({id:"test",name:"test",displayName:"测试",widgetDefinitions:[]}),t.registerWidgetGroup({id:"echarts-bar",name:"echarts-bar",displayName:"Echarts柱形图",widgetDefinitions:[]}),t.registerWidgetGroup({id:"echarts-line",name:"echarts-line",displayName:"Echarts折线图",widgetDefinitions:[]}),t.registerWidgetGroup({id:"echarts-pie",name:"echarts-pie",displayName:"Echarts饼图",widgetDefinitions:[]}),t.registerWidgetGroup({id:"media",name:"media",displayName:"媒体",widgetDefinitions:[]}),t.registerWidgetGroup({id:"text",name:"text",displayName:"文本",widgetDefinitions:[]}),t.registerWidgetGroup({id:"tool",name:"tool",displayName:"工具",widgetDefinitions:[]}),e.applicationContext.registerWidget(N),e.applicationContext.registerWidget(V);try{const e=await J()("http://localhost:3000/widget-list"),i=e.data;for(const n of i)t.registerWidget(n)}catch(te){}}uploadFile(e){return new Promise(t=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{const n=new j["a"];n.name=e.name,n.url=i.result,t(n)}})}async handleSave(e){localStorage.setItem("config",JSON.stringify(e)),await this.$message({message:"保存成功",type:"success",duration:1e3})}};X=Object(c["a"])([Object(d["a"])({components:{NimAppEditor:g["a"]}})],X);var Y=X,H=Y,Z=(i("69f0"),Object(_["a"])(H,s,r,!1,null,null,null)),Q=Z.exports,K=i("5c96"),ee=i.n(K);i("0fae"),i("77ed");window.NimCore=n,a.a.use(ee.a),a.a.config.productionTip=!0,new a.a({render:e=>e(Q)}).$mount("#app")},7550:function(e,t){},"75cd":function(e,t,i){"use strict";i("5fbf")},7769:function(e,t,i){"use strict";i("8526")},"790a":function(e,t,i){},"794b":function(e,t,i){"use strict";var n,o,a,s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"DataSourceConfigEditor"},[t("AttrItem",{attrs:{object:e.dataSourceConfig,label:"名称",prop:"name",type:"string"}}),t("AttrItem",{attrs:{object:e.dataSourceConfig,label:"类型",prop:"type",type:"select",options:[{label:"静态数据源",value:"static"},{label:"函数数据源",value:"function"}]}}),"static"!==e.dataSourceConfig.type?[t("AttrItem",{attrs:{object:e.dataSourceConfig,label:"自动更新",prop:"interval",type:"number",min:-1,max:3600,step:1}}),t("span",{staticClass:"note"},[e._v("注：单位为秒，0表示不定时更新。")])]:e._e(),"static"===e.dataSourceConfig.type?[t("div",{staticClass:"label"},[e._v("静态数据 JSON")]),t("MonacoEditor",{key:"static",staticClass:"monaco-editor",attrs:{language:"json"},model:{value:e.dataSourceConfig.staticData,callback:function(t){e.$set(e.dataSourceConfig,"staticData",t)},expression:"dataSourceConfig.staticData"}}),e.dataSource.error?t("div",{staticClass:"code"},[t("span",{staticClass:"note error"},[e._v(e._s(e.dataSource.error))])]):e._e()]:e._e(),"function"===e.dataSourceConfig.type?[t("div",{staticClass:"label"},[t("span",[e._v("数据获取函数")]),t("el-button",{staticClass:"run-button",attrs:{type:"text"},on:{click:e.run}},[e._v("执行函数")])],1),t("MonacoEditor",{key:"function",staticClass:"monaco-editor",attrs:{language:"javascript",libSource:e.libSource},model:{value:e.dataSourceConfig.functionBody,callback:function(t){e.$set(e.dataSourceConfig,"functionBody",t)},expression:"dataSourceConfig.functionBody"}},[t("div",{staticClass:"code"},[t("span",{staticClass:"mark"},[e._v("async function")]),e._v(" getData(context, axios, widgetWrapper) {")]),t("div",{staticClass:"code",attrs:{slot:"after"},slot:"after"},[e._v("}")])]),e.dataSource.error?t("div",{staticClass:"code"},[t("span",{staticClass:"note error"},[e._v(e._s(e.dataSource.error))])]):e._e(),t("span",{staticClass:"note"},[e._v("注：此函数运行于 vue 的 watch 中。所有同步操作会被执行依赖收集。")])]:e._e(),"api"===e.dataSourceConfig.type?[t("div",{staticClass:"label"},[e._v("数据过滤函数")]),t("MonacoEditor",{key:"api",staticClass:"monaco-editor",attrs:{language:"javascript"},model:{value:e.dataSourceConfig.filterBody,callback:function(t){e.$set(e.dataSourceConfig,"filterBody",t)},expression:"dataSourceConfig.filterBody"}},[t("div",{staticClass:"code"},[t("span",{staticClass:"mark"},[e._v("function")]),e._v(" filter() {")]),t("div",{staticClass:"code",attrs:{slot:"after"},slot:"after"},[e._v("}")])])]:e._e(),"static"!==e.dataSourceConfig.type?[t("div",{staticClass:"label"},[e._v("数据预览")]),t("MonacoEditor",{directives:[{name:"loading",rawName:"v-loading",value:e.dataSource.loading,expression:"dataSource.loading"}],staticClass:"monaco-editor",attrs:{language:"json",value:e.dataSourceDataJson,"read-only":""}})]:e._e()],2)},r=[],c=i("9ab4"),d=i("60a3"),l=i("e58b"),p=i("5edc"),u=i("92ef"),f=i("0ef4"),b=i("8d7b"),g=i("9e0a"),h=i("aa2e"),y=i("47d1");let m=class extends d["f"]{constructor(){super(...arguments),this.dataSource=new f["a"](this.context,new u["a"])}get dataSourceDataJson(){var e;return JSON.stringify(null===(e=this.dataSource)||void 0===e?void 0:e.data,null,2)}get libSource(){return[h["a"],y["a"]].join("/n")}handleDataSourceConfigChange(){this.dataSource&&this.dataSource.stop(),this.dataSource=new f["a"](this.context,this.dataSourceConfig,this.widgetWrapper),"static"===this.dataSourceConfig.type&&this.dataSource.run()}run(){this.dataSource.run()}beforeDestroy(){this.dataSource&&this.dataSource.stop()}};Object(c["a"])([Object(d["b"])("nim-app-context"),Object(c["b"])("design:type","function"===typeof(n="undefined"!==typeof g["a"]&&g["a"])?n:Object)],m.prototype,"context",void 0),Object(c["a"])([Object(d["c"])({required:!0}),Object(c["b"])("design:type","function"===typeof(o="undefined"!==typeof u["a"]&&u["a"])?o:Object)],m.prototype,"dataSourceConfig",void 0),Object(c["a"])([Object(d["c"])({required:!1}),Object(c["b"])("design:type","function"===typeof(a="undefined"!==typeof b["default"]&&b["default"])?a:Object)],m.prototype,"widgetWrapper",void 0),Object(c["a"])([Object(d["g"])("dataSourceConfig",{deep:!0,immediate:!0}),Object(c["b"])("design:type",Function),Object(c["b"])("design:paramtypes",[]),Object(c["b"])("design:returntype",void 0)],m.prototype,"handleDataSourceConfigChange",null),m=Object(c["a"])([Object(d["a"])({components:{AttrItem:l["a"],MonacoEditor:p["a"]}})],m);var j=m,O=j,v=(i("a491"),i("2877")),C=Object(v["a"])(O,s,r,!1,null,"3083346b",null);t["a"]=C.exports},7976:function(e,t,i){},79769:function(e,t,i){"use strict";i("2e41")},"7ac6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXAAAADQCAYAAAAecjplAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABYcSURBVHhe7d0JeFTlvcfxf1YSliyyJIRFDRRDkQQQEYUKVIJBFGi1EFsrenutG7ZX6GOXR316kVatF/QKCFQLqLc1UK2FPhgk0EpxRSskUAghGUBM2ENISAJku+d95wSSmckGmWTeyfeT5zznnXMOmWz85p13OwGxcX1rBABgnEB7DwAwDAEOAIYiwAHAUAQ4ABiKAAcAQxHgAGAoAhwADEWAA4ChCHAAMBQBDgCGIsABwFAEOAAYigAHAEMR4ABgKAIcAAxFgAOAoQhwADAUAQ4AhiLAAcBQBDgAGIoABwBDEeAAYCgCHAAMRYADgKEIcAAwFAEOAIYiwAHAUAQ4ABiKAAcAQxHgAGCogNi4vjV22avCwjtLz5jeUlVVKQWHDtpH6wsKDpaY3n2kS9cIOXHsiJw6edw+U19EVJT0jO0j58rL5WjB11JRcd4+AwAdR5sEeP+rBsodM++VbpFRUlZWKi/P/6V95qL+Vw+UKXf9QCKju9tHRHJ2Z0r6X9Kk3Po3SlBQsEy8404ZPmqMfqyUlZ6RjevWSPbOHfYRd9HRURJgfZwqKpKamjZ5vQIAr/N6E0pEZLTc/cBjOrwbEhl1hXz3ngd0eJ8/d06O5B/Sxwd9M0lSpqfqsjI+5Y4L4X3scL4O9s5dusrUGbMkJq6vPg4AHYXXA1w1ixQXFcpf31rpPOChBpw4crSEhYfL1wcdsui3v5JVS16QN5Yt1OeuuTZJukVE6c9z3Y3j9LF33nxVVix6XhY/95Ts27NTAoOCZMTosfocAHQUXg/wMyXFVtj+Tg430O6t9OrdR+93Z34pFRUVulzw1QE5cbRAl3vF9pYevWIkMDBQykpLJDd7lz5eVVkpu7Zv0+Vesc7PAQAdhdcDvOL8OTl3ttx+5FloSCe9Lz5dqPe1Tp86pfchncIk5MI19duxTxc6/426BgA6Eq8HOADAOwhwADAUAQ4AhiLAAcBQxgd4QECAXQKAjsUnAry0tFjvY10m4/SKcw4NLDtTYl1Tosvde8ZISEioLiu1E3jKSpznAaCj8IkAP/y1c+blkGHXS1z/qyQktJNcP2aCnsBTXV0tx47kS9HJE3K2vFyH9+jxyXriT4wV8MNucM7MPJzf8DhzAPBHbbaYlZou//ATv9Zrl7z8m1/ZR51UKM969GfSo1esflxTUy0BAc7Xlg83v2dtG3R56IhRMuWue3S57jVqcs9rLz2rP7cnrIUCwB/5RA1crSb4p9cWye7ML/RMTBXMJcVFsnHd2/LR39+3rxLZ+eU2WZu2Sq9SqK5RMzHz9u6WN5e/1GB4A4C/arMaeHOpTslOYWG6uaQxoZ3CpNIKftXE0hRq4AD8kU/UwOtSAdtUeCvnz51tVngDgL/yuQAHADQPAQ4AhiLAAcBQBDgAGIoABwBDEeAAYCgCHAAMRYADgKEIcAAwFAEOAIYiwAHAUAQ4ABiKAAcAQxHgAGAoAhwADEWAA4ChCHAAMBQBDgCGIsABwFAEOAAYigAHAEMR4ABgKAIcAAxFgAOAoQhwADAUAQ4AhiLAAcBQBDgAGIoABwBDEeAAYCgCHAAMRYADgKEIcAAwVEBsXN8au+y3oqOjJMD6OFVUJDU1fv/t+q6aRElKSpDBg63yoMly2wB1ME/eS88R2ZMtaVlZ6oD3JCZK6uCEC8+dm5cuOTnW86728vMCXkKAw7us0E59+nF5bNJEiY+3jzXCkTFXHlm4RjKbm6nW53/6w/XycN3PbX2O3vetsR+IJM1cKa/Mbvz5HRnL5ZFZ8yUzwD7gQdJTW2TDQ/U/iWPZFBnzzKW9AKSuOiQvJtsPtE3yeNz9ktbI1wDURRMKvEMF96otcrhgvbz4UPPCW4lPXiAb0rfI04n2gcuhwn3rIdmwsOnnj09+UDYUNP68mWszxGGXa8VPmipJl1InqJkht9ULb0tGOuGNFiHA4R2pj1u1y2amtpt4efhyQ9xTzbxJ6nlXSmpDgZw1XxZl2OVa8ckyLckut0TqZKmf3w5Zar3zAFqCAEebcTg2ydJlc+XxyVMk5cI2V5ZmONxqtjpMlzx5abVbS+rrdcPb+vwZy+XxOfZzzrGec9kmD8+pTJQXX59hl92lpW+yS7Xi5dZpLXylUS8usyfaD2yODFmbaZeBZqINHN4xc6UcXqhCyiEZy5bIgnlrGm1flsQZ8kb6Avda6eRxMq+xJuYmatq6TX1WA8+tmnmsoK/fDq008rw11tdZ4Pp1trDtOvFJ+Sj9QSv6L7qctnR0XNTA4TW61msF4b3PNBHeStYauXdOK9Ru67LCe8x9jTx3QJakzZoiS92q4o08b8AaWbDM9R9MlNtS7WIzJE1Lrhfe6gVgUaOvUoBnBDi8Y/X9VnjOl7SW5FJaurg1MV9qJ6GqFVs17yZZIT5vsesLh/W8AxLskjtPnZnJkxtudqnHqvVPm+TydoHOS1winwjwiMho6XfVgAa3wKAg+0qniKgoGZAwRPpeGS8hIaH2URjPqt2+55bgA0QNG2+pjDktaNLw8MIhAwY1/MKRuU7ed0/whjs/60qaKre65Tedl7g0PhHgiSNHyw9+/NMGt7CwcH1dUFCw3Dp9pjzyxDz53r0Pyj0P/pc8/MSvJWHoMH0e5tuT57lrsWU2yXtpdrFZsiXX9Wkbe+HwWGtvXjOKW/OJY7ksaNHXClzkU00oxUVFcqTgkNtWXV2tz49PuUOGjxqjy8cO50t5Wal07tJVps6YJTFxffVxmCkpMVGSZs6QaXp25mVy5Mkeu9gsViDn5Nnl5vJQa2+yGaVmhsx1nQi0cV3T/QNAA3wqwD/duklWLX7BbTtbXiZBwcFy3Y3j9HXvvPmqrFj0vCx+7inZt2enbmIZMXqsPgcfpqayWyGd+tRKeWPVFvlo6xY5nH9IbxvS18uGhQvk4UseO15HXk6LQ7HFNX9PzT1NNaN4GPv9/lo6L3HpjOnE7NErRgIDA6WstERys3fpY1WVlbJr+zZd7hXbR+/hYxJnyNNqRqYKaiukX7RCWs3MTLaCOr650zN9VNrC5S6dmY03o6ROdhn7nbGk8SGSQBN8KsBVh+TgpOtk+t33S8r0VOl/9UD7jDrXSe+LT9cfy326sFDvQzqF6T18hBpjrYI7vZVq1b7IQ2dmg80oHqbO03mJy+VTAT4hZapMmzlLEoYOl2GjbpK7//MxGTJspH0WxrAn1zQ2ld7hULMjN0nGMjVDcq5zhmRcP0lxG2Ptwzx1ZjbUjOLafELnJVqBTwW46qz8cHO6/PWtlZK9a4cEBATIxNvvlFBq10apP429lpqRqYK6n/Tu00/GfGucjLnvfrn3mfmStlqtPphlZmeeW2em52YU1+YTOi/RGnwiwPfnZss/0tfK22/8Xgd49s7tsvatVVJRcV7CO3eR3n3721fC5yU+KY+5Tk13qKnm9oxMf2vz9dCZmTzbZQ0Xt58JnZdoHT4R4PkH98tnWzeLI2e3fcR6F15TLcePHNbl8PDOeg/f5z5N3CFLH23+pJrBA8xrL3frzHRZodDtZ0LnJVqJTzWhuCo9U6z3NdZHQ1QzC3yHWwC3ZJW9mkQZ1BrjwNuaW2dmnbVUPEydp/MSrcUnAjxx5I0yaer35MoBg+wjTt0io/S+tKRESktLdLl7z5h60+drJ/CUWdegnV12ACfIQPMq4Lozc+3G+p2vF9ZwcZs639JZokDDfCLAg0NCZMTob0nK9JnSMzZOj/dWwwlj4/pJRUWFFB4/KkUnT8jZ8nId3qPHJ0tYeLgV3n1k2A3OmZmH8w/qPcyV9PSjLhNdzJE5b0n9zky7GcW1+cSx7EUWrkKr8YkA3/XlNjlx7IhEd+8pP/rJL+Rn/71ADydUPv7H+1JWVqrHfm9e/44+NmbCrfLTJ5+V+2f/XIe8mtzz2T8363NoR56mpDf3jjWJT8orLtPMjeLWmamaUWa4NJ/QeYnW5RMBfv7cWVm94hX5944vpNKqcaup8cePFMiGd9Pkkw822leJ7LSCfm3aKjl18rgEBATqmZh5e3fLm8tfskL8jH0V2pP7lPSm76yjbjrseoMDE7nerSd+0qP1m0+46w5amc/dkUd1Sqpx3+fOlttHPFPXVFacv7DQVWO4I08b8nC3GSf7zjxrs+3HlsFTZe7sZEm+MKVe3XLNCvx6NfEm7nZjTxpq7K70zeF+x/lLuEO8p6+ljow5/eTe1fYDoBX43CgUFbBNhbeiau3NCW+0saz58ojH2ZTxkvyQuuP8+ovbwgfrhLcKuPtlrV02kofOzIvovETr87kAh/kynxknj2c0FGSeWLXzOVP8onbq6W49Cp2X8AYCHF6Rdt84SZnT0J3fL1J3qtf3zVztJ5171juQRa7LzNJ5CS/hrvTwvsQZkjptkNw2oHaQeJ7kpufI2rRm3OzYQKmrDtW/071juaSMnc/aJ2h1BDjQmjx04tJ5CW+hCQVoRalzXEfg0HkJ7yHAgdbi4aYNkpFO5yW8hgAHWon7UgAOWbqQhavgPQQ40Bo83HGeZWPhbQQ40AqofaM9EODA5ahx3ry5/jR8C7VvtAGGEQLNVbvWiVW7Vh9qeYD4OksBXHQJ66gAl4AaONBSVmjHx09sILwdsnQy4Y22QYADrcVeFoCmE7QVAhy4bGqp3LmSMtaqeRPeaEO0gQOAoaiBA4ChCHAAMBQBDgCGIsABwFAEOAAYigAHAEMR4ABgKAIcAAxFgAOAoQhwADAUAQ4AhiLAAcBQBDgAGIoABwBDEeAAYCgCHAAMRYADgKEIcAAwFAEOAIYiwAHAUAQ4ABiKAAcAQxHgAGAoAhwADEWAA4ChCHAAMBQBDgCGIsABwFBGBnhEVJQMSBgifa+Ml5CQUPsoAHQsAbFxfWvsss8LCgqWiXfcKcNHjbGPiJSVnpGN69ZI9s4d9hF30dFREmB9nCoqkpoaY75dAGiUUTXw8Sl3XAjvY4fzpbysVDp36SpTZ8ySmLi++jgAdBTGBHhQcLBcd+M4XX7nzVdlxaLnZfFzT8m+PTslMChIRoweq88BQEdhTID36BUjgYGBUlZaIrnZu/SxqspK2bV9my73iu2j9wDQURgT4CEhnfS++HT9duzThYV6H9IpTO8BoKMwchQKAIAABwBjEeAAYCgCHAAMZXyABwQE2CUA6FiMCfDS0hK9794zpt70+doJPGUlzvMA0FEYE+BFJ0/I2fJyHd6jxydLWHi4Fd59ZNgNzpmZh/MP6j0AdBRGrYUydMQomXLXPbpcU1MtAQHO1x81uee1l57V66J4wlooAPyRUQGuDE4cITcnT5Ho7j31TMwDeTmyaf07curEcfsKd7UBXllVRYADuCTV1dVSWlpqP/INxgV4rdBOYVJZcV7/UJtSG+AAcKmqrcpfkfUu3pcYG+AtERwczGgVAJdFvXuvtN71+5IOEeAA4I+YyAMAhiLAAcBQNKH4CHVnITVJSS2Xe/rUSfuo2dQ9S137Hqqqq6So8KSUnfHfiVc9Y+MkIiJSjh89Yv0+T9lHzeX6e1RtwcWnC6XYxzr0LldEZLRERl9hP/LsTEmxnDrZ8Ii3tkaA+4hJU++SEaNvlvyD++XN5S/aR832i9++bJfcFZ44LhvX/VkO5GbbR8ym7td6y5TpMuibSdLVCu9ajn17ZOPaP1svWifsI+Zp6Pd4+lShZO/cLh+8v84vhueOvSXF2m6zH3m2fdtH8v5fV9uP2h9NKD5A3RIuIfE6Xe5z5dUSdUUPXfYXB3NzJGd3lt7UC5T6z35Fj55y1w8f0O86TKcmlE27e5Z+AVbhrWYMl5eV6XPx3xgs33/gMencuYt+bLITx47IkYJDcrQgX86fO6trqzfcfIvc/r0f6p+BvzhbXqa/T09bcZFvvaMK6tot4td2Ge1kQMIQSRp5o1RUnLdqckH6D+ir/bn2WXONvWWy3r/9+jL516dbZU/Wl5L1r08l8/NPrBes4RJuhVpVVZXs32d2LXzUtybIyJvG64ll69/+o/xtzevy+Yd/l4Kv9ls18kTdPKa+1317nLcCNE3t7/FPv/9f+fiDjbLDqoV+siVDv4sacM03JbZPPzl3tlwKDh3Q15mqf/xAa/uGvmVj2ool1vf5sdv29YE8+2rfQA3cB1w77Hq9/0f6Or0fMmyk3vurMyWnZXfmv3Q5urv57zYGDx2u95lffCL/3vG5LqsJZnk5e2Tz+nd180lMXD+/qqUquzO/kM+2btblpFE36T3aFgHezjqFhcvAhGutt6TnrNrpJ5L/1QG9TECf/lfZV/inWHsVyWOH8/XeZJF2k1eefbPtunZ8/rEs+595snLx70St3+Nv9mRt1/sePWN0UyDaFgHezhKuHS7BISGSu3eXVFZU6E4hZcjwUXrvD2L79pf+V1lvT60tYegw+c73fyRXDUzQbcW1NVaT1S5vXGa3e3ckqrmvVt1lnk0WEtpJ90O5br7Yj0GAt7MhI5zNJdlZO/R+77+dAa7elquRDf5AdXJ9/8c/0dv0u/9Drrk2STejrFrygm5HNV1QoPO/UXV1ld53JHW/58BA/1iuQrXrP/Szp9222r4AX0KAt6PIqCt0rbTi/DnZv2+PPqbG1hYcOqg7vdQfkj84kLtXcnZn6k0NG6yqqpSu3SLl1ukzpEu3CPsqc9VYH0pHXzDND0YSamoEUcFXB9y2oqJC+wrfQYC3oyHDnbXvrxy5ui1chZraVOAp/tKMsulvb8tf/u8Pektb8YosfvYpOZiXI1cPTJDRN0+0rzJX7YqYQcEdrw24bru3GoXjDw7m7ZU3li1027Zt/bt9he8gwNvREHv0iRpGOPuXz1zYbpowSR8faNXAw8I767I/KS8rle3bPtTlq79xjd6b7Fx5ud53i4jS+46kS9dueq/CWw2DRdsiwNtJ775X6kksqjnh+JECt02Nqw0KDr4wRM3fREZ313t/aOcvtKdWDx1xg97X9e3bviM//81L8sgT8/xuGKFS+z0fO1qg92hbBHg7udZuPtm3e6f84eXn3LaPP8jQ54cMd9bSTRYcEiohISF662zV2EbceLNcf9N4fU6195tu+2fOdxPqndTk76bqe7X26BUrNyffLqPGTtDBvXP7Z8YPI7zwewztpL/Hb0+eLiNvGqfPfbrF+ffqDwICgy78vbpuvlbhYC2UdhAYGCizfzlfz9BT7cKqc8+V6uB8+AnnJFk1jtjEtTQaWwtFUcMIVyx61i8WRVJTyiekTLMf1ff1QYe89YfFxrYRN/Z7VMsipL+bJllffGIfMRdroaBZrh40WIe3Wk/CsW+3fbS+00WFet0Qpba27i/USoR7d2XKysXP+82Kdp/9c7O8+8fX9OxE1cavqKGSH25Ol9Url/pNB1+tE0cL5IuPt8hbry7yi/A2FTVwoJWpJpOQ0FD9Ag14EzVwoJWptm7CG22BAAcAQxHgAGAoAhwADEWAA4ChCHAAMBQBDgCGIsABwFAEOAAYigAHAEMR4ABgKAIcAAxFgAOAoQhwADAUAQ4AhiLAAcBQBDgAGIoABwBDEeAAYCgCHAAMRYADgKEIcAAwFAEOAEYS+X9IMKzPewy0bwAAAABJRU5ErkJggg=="},"7b1b":function(e,t,i){},"7be4":function(e,t,i){},"7ddb":function(e,t,i){},"7e08":function(e,t,i){"use strict";i("a1a5")},"7e0c":function(e,t,i){},"7e10":function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CustomWidgetDefinitionFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fab","vuejs"]}}),t("span",[e._v("自定义组件")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建自定义组件",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createNewCustomWidgetDefinition(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("33b4"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"223f1a47",null);t["default"]=f.exports},"7efa":function(e,t,i){},"7f61":function(e,t,i){"use strict";i("1aa9")},"7fe8":function(e,t,i){"use strict";var n,o,a,s=i("9ab4"),r=i("a72c"),c=i("92ef"),d=i("8ff1"),l=i("da6d");let p=n=class{constructor(){this.id=Object(d["a"])("WidgetConfig"),this.isGroup=!1,this.isCombination=!1,this.groupId="",this.widgetDefinitionId="",this.base=new l["a"],this.children=[],this.dataSource=new c["a"]("组件的数据源")}};Object(s["a"])([Object(r["c"])("id",String,!0),Object(s["b"])("design:type",String)],p.prototype,"id",void 0),Object(s["a"])([Object(r["c"])("isGroup",Boolean,!0),Object(s["b"])("design:type",Object)],p.prototype,"isGroup",void 0),Object(s["a"])([Object(r["c"])("isCombination",Boolean,!0),Object(s["b"])("design:type",Object)],p.prototype,"isCombination",void 0),Object(s["a"])([Object(r["c"])("groupId",String,!0),Object(s["b"])("design:type",Object)],p.prototype,"groupId",void 0),Object(s["a"])([Object(r["c"])("widgetDefinitionId",String,!0),Object(s["b"])("design:type",Object)],p.prototype,"widgetDefinitionId",void 0),Object(s["a"])([Object(r["c"])("base",l["a"],!0),Object(s["b"])("design:type","function"===typeof(o="undefined"!==typeof l["a"]&&l["a"])?o:Object)],p.prototype,"base",void 0),Object(s["a"])([Object(r["c"])("children",[n],!0),Object(s["b"])("design:type",Array)],p.prototype,"children",void 0),Object(s["a"])([Object(r["c"])("dataSource",c["a"],!0),Object(s["b"])("design:type","function"===typeof(a="undefined"!==typeof c["a"]&&c["a"])?a:Object)],p.prototype,"dataSource",void 0),p=n=Object(s["a"])([Object(r["b"])("WidgetConfig")],p),t["a"]=p},8156:function(e,t,i){},8188:function(e,t,i){"use strict";i("d21a")},8217:function(e,t,i){},"823a":function(e,t,i){},8376:function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(){this.id=Object(a["a"])("CustomWidgetDefinition"),this.name="自定义组件",this.type="simple",this.width=300,this.height=300,this.template="<div>\n自定义组件: {{data.title}}\n</div>",this.icon="",this.staticData='{ "title": "标题" }',this.echartsOptionFn="return {\n  title: {\n    text: data?.title,\n  },\n  tooltip: {},\n  legend: {\n    data: ['销量'],\n  },\n  xAxis: {\n    data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子'],\n  },\n  yAxis: {},\n  series: [{\n    name: '销量',\n    type: 'bar',\n    data: [5, 20, 36, 10, 10, 20],\n  }],\n};",this.d3UpateFn="const svg = d3.select(this.$refs.svg)\nsvg.selectAll('*').remove()\nsvg.append('circle')\n  .attr('r', 100)\n  .attr('fill', 'red')\n  \n"}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("type",String,!0),Object(n["b"])("design:type",String)],s.prototype,"type",void 0),Object(n["a"])([Object(o["c"])("width",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"width",void 0),Object(n["a"])([Object(o["c"])("height",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"height",void 0),Object(n["a"])([Object(o["c"])("template",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"template",void 0),Object(n["a"])([Object(o["c"])("icon",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"icon",void 0),Object(n["a"])([Object(o["c"])("staticData",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"staticData",void 0),Object(n["a"])([Object(o["c"])("echartsOptionFn",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"echartsOptionFn",void 0),Object(n["a"])([Object(o["c"])("d3UpateFn",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"d3UpateFn",void 0),s=Object(n["a"])([Object(o["b"])("ImageAsset")],s),t["a"]=s},"83c6":function(e,t,i){},8526:function(e,t,i){},"86d1":function(e,t,i){"use strict";i("02ab")},"87f4":function(e,t,i){"use strict";i("bc2d")},"891b":function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CombinationFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","cubes"]}}),t("span",[e._v("组合")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建组合",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createNewCombination(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("1ee6"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"7f8d5170",null);t["default"]=f.exports},"89f3":function(e,t,i){"use strict";i("4875")},"8a17":function(e,t,i){"use strict";i("b967")},"8ace":function(e,t,i){"use strict";i("ae62")},"8bbf":function(e,t){e.exports=Vue},"8bd3":function(e,t,i){"use strict";i("0625")},"8c14":function(e,t,i){"use strict";i("ff06")},"8d7b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"WidgetWrapper",style:e.style,attrs:{"element-loading-background":"rgba(0, 0, 0, 0.2)"},on:{click:e.handleNativeEvent,mouseenter:e.handleNativeEvent,mouseleave:e.handleNativeEvent}},[t("div",{style:e.style3D},[t(e.getComponent(e.widgetConfig),{key:e.widgetConfig.id,ref:"component",tag:"component",style:{opacity:1-e.runtimeBaseWidgetConfig.transparent},attrs:{baseConfig:e.runtimeBaseWidgetConfig,data:e.injectData||e.dataSourceData,children:e.widgetConfig.children,widgetConfig:e.widgetConfig},on:{event:e.handleComonentEvent,"interaction-event":e.handleInteractionEvent}})],1)])},o=[],a=i("9ab4"),s=i("60a3"),r=i("406e"),c=i("cd3f"),d=i.n(c),l=i("7fe8"),p=i("9e0a"),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"GroupComonent"},e._l(e.childrenReverse,(function(e,i){return t("WidgetWrapper",{key:i,ref:e.id,refInFor:!0,attrs:{widgetConfig:e,inGroup:!0}})})),1)},f=[];i("14d9");let b=class extends s["f"]{get childrenReverse(){const e=this.children,t=[];if(e)for(let i=e.length-1;i>=0;i--)t.push(e[i]);return t}};Object(a["a"])([Object(s["c"])({type:Array,required:!0}),Object(a["b"])("design:type",Array)],b.prototype,"children",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],b.prototype,"data",void 0),b=Object(a["a"])([Object(s["a"])({components:{WidgetWrapper:()=>Promise.resolve().then(i.bind(null,"8d7b"))}})],b);var g,h,y,m,j,O,v=b,C=v,x=i("2877"),w=Object(x["a"])(C,u,f,!1,null,"8662478e",null),S=w.exports,_=i("0ef4"),A=i("1209"),D=i("5da1"),W=i.n(D),E=i("92ef");let k=class extends s["f"]{constructor(){super(...arguments),this.loading=!1,this.show=!0,this.dataSource=null}get self(){return this}get dataSourceData(){var e;return d()(null===(e=this.dataSource)||void 0===e?void 0:e.data)}get baseConfig(){return this.widgetConfig.base}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get autoSize(){var e;return(null===(e=this.widgetDefinition)||void 0===e?void 0:e.autoSize)||!1}get style(){if(this.runtimeBaseWidgetConfig){var e,t;const i=this.runtimeBaseWidgetConfig;let n=i.width,o=i.height;null!==(e=this.widgetDefinition)&&void 0!==e&&e.fixation&&(n=this.widgetDefinition.width||0,o=this.widgetDefinition.height||0);const a={width:n+"px",height:o+"px",left:Math.round(i.x)+"px",top:Math.round(i.y)+"px",marginLeft:"",marginTop:"",cursor:i.cursor};return null!==(t=this.widgetDefinition)&&void 0!==t&&t.autoSize&&(a.width="auto",a.height="auto"),"right-top"===i.anchor&&(a.marginLeft=`-${n}px`),"center"===i.anchor&&(a.marginLeft=`-${n/2}px`,a.marginTop=`-${o/2}px`),"left-bottom"===i.anchor&&(a.marginTop=`-${o}px`),"right-bottom"===i.anchor&&(a.marginLeft=`-${n}px`,a.marginTop=`-${o}px`),"center-top"===i.anchor&&(a.marginLeft=`-${n/2}px`),"center-bottom"===i.anchor&&(a.marginLeft=`-${n/2}px`,a.marginTop=`-${o}px`),"left-center"===i.anchor&&(a.marginTop=`-${o/2}px`),"right-center"===i.anchor&&(a.marginLeft=`-${n}px`,a.marginTop=`-${o/2}px`),a}return{}}get style3D(){if(this.runtimeBaseWidgetConfig){var e,t;const i=this.runtimeBaseWidgetConfig;let n=String(i.width)+"px",o=String(i.height)+"px";null!==(e=this.widgetDefinition)&&void 0!==e&&e.fixation&&(n=String(this.widgetDefinition.width||0)+"px",o=String(this.widgetDefinition.height||0)+"px"),null!==(t=this.widgetDefinition)&&void 0!==t&&t.autoSize&&(n="auto",o="auto");const a=`\n        skew(${i.skewX}deg, ${i.skewY}deg)\n        rotateX(${i.rotateX}deg)\n        rotateY(${i.rotateY}deg)\n        rotateZ(${i.rotateZ}deg)\n      `;return{width:n,height:o,"perspective-origin":"50% 50%","-ms-transform":a,"-webkit-transform":a,transform:a}}return{}}get runtimeBaseWidgetConfig(){return s["f"].observable(d()(this.widgetConfig.base))}get dataSourceConfig(){return this.widgetConfig.dataSource}getData(){return this.dataSourceData}getComponent(e){return e.isGroup?S:this.context.getComponent(e)}getGroup(){return this.widgetConfig.groupId?this.$parent:null}doMoveImmediately(e,t){this.runtimeBaseWidgetConfig&&(this.runtimeBaseWidgetConfig.x=e,this.runtimeBaseWidgetConfig.y=t)}doMove(e,t,i,n){return Object(A["a"])({targets:this.runtimeBaseWidgetConfig,x:e,y:t,duration:i,delay:n,easing:"linear"}).finished}doMoveDirection(e,t,i,n){return Object(A["a"])({targets:this.runtimeBaseWidgetConfig,x:this.runtimeBaseWidgetConfig.x+e,y:this.runtimeBaseWidgetConfig.y+t,duration:i,delay:n,easing:"linear"}).finished}resetPosition(){this.runtimeBaseWidgetConfig.x=this.widgetConfig.base.x,this.runtimeBaseWidgetConfig.y=this.widgetConfig.base.y}handleDataSourceChange(e,t){t&&t.stop()}handleDataSourceConfigChange(e,t){if(W()(e,t))return;const i=new _["a"](this.context,this.dataSourceConfig,this);i.run(),this.dataSource=i}handleAutoSize(e){this.$el&&(e?(Object(r["a"])(this.$el,this.resizeHandler),this.resizeHandler()):Object(r["b"])(this.$el,this.resizeHandler))}handleComonentEvent(e){this.$emit(e.type||"unknown",e)}handleNativeEvent(e){this.$emit(e.type),this.context.emitInteractionEvent({type:e.type,triggerId:this.widgetConfig.id,trigger:this,widgetWrapper:this})}handleInteractionEvent(e){this.context.emitInteractionEvent({type:e.type,triggerId:this.widgetConfig.id,trigger:this,widgetWrapper:this,data:e.data})}resizeHandler(){const e=this.$el,t=e.clientWidth,i=e.clientHeight;this.widgetConfig.base.width=t,this.widgetConfig.base.height=i}async mounted(){await this.$nextTick(),this.handleAutoSize(this.autoSize)}beforeDestroy(){var e;this.dataSource&&this.dataSource.stop(),null!==(e=this.widgetDefinition)&&void 0!==e&&e.autoSize&&Object(r["b"])(this.$el,this.resizeHandler)}};Object(a["a"])([Object(s["d"])("parent-wrapper"),Object(a["b"])("design:type",Object),Object(a["b"])("design:paramtypes",[])],k.prototype,"self",null),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(g="undefined"!==typeof p["a"]&&p["a"])?g:Object)],k.prototype,"context",void 0),Object(a["a"])([Object(s["b"])({from:"parent-wrapper",default:null}),Object(a["b"])("design:type",k)],k.prototype,"parentWrapper",void 0),Object(a["a"])([Object(s["c"])({required:!1,default:null}),Object(a["b"])("design:type",Object)],k.prototype,"injectData",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(h="undefined"!==typeof l["a"]&&l["a"])?h:Object)],k.prototype,"widgetConfig",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Object)],k.prototype,"combinationData",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],k.prototype,"inGroup",void 0),Object(a["a"])([Object(s["g"])("dataSource"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",["function"===typeof(y="undefined"!==typeof _["a"]&&_["a"])?y:Object,"function"===typeof(m="undefined"!==typeof _["a"]&&_["a"])?m:Object]),Object(a["b"])("design:returntype",void 0)],k.prototype,"handleDataSourceChange",null),Object(a["a"])([Object(s["g"])("dataSourceConfig",{immediate:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",["function"===typeof(j="undefined"!==typeof E["a"]&&E["a"])?j:Object,"function"===typeof(O="undefined"!==typeof E["a"]&&E["a"])?O:Object]),Object(a["b"])("design:returntype",void 0)],k.prototype,"handleDataSourceConfigChange",null),Object(a["a"])([Object(s["g"])("autoSize"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[Boolean]),Object(a["b"])("design:returntype",void 0)],k.prototype,"handleAutoSize",null),k=Object(a["a"])([s["a"]],k);var T=k,I=T,N=(i("9af1"),Object(x["a"])(I,n,o,!1,null,"bb932d52",null));t["default"]=N.exports},"8e01":function(e,t,i){},"8e14":function(e,t,i){},"8e58":function(e,t,i){},"8ea5":function(e,t,i){"use strict";i("9a29")},"8ff1":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ec26");function o(e="unspecified"){return`${e}:${Object(n["a"])()}`}},9041:function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CombinationTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","cubes"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名组合",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get combination(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.combination)}handleClick(){this.editor.previewNimObj(this.combination)}handleDbClick(){this.editor.openNimObj(this.combination)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个组合？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteCombination(this.combination)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("de6c"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"3ffa9744",null);t["default"]=g.exports},9099:function(e,t,i){},9175:function(e,t,i){"use strict";i("8e01")},"92ef":function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(e="数据源"){this.id=Object(a["a"])("DataSourceConfig"),this.name="数据源",this.type="static",this.staticData='{ "message": "静态数据" }',this.functionBody="return {}",this.filterBody="return data",this.interval=0,this.name=e}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("type",String,!0),Object(n["b"])("design:type",String)],s.prototype,"type",void 0),Object(n["a"])([Object(o["c"])("staticData",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"staticData",void 0),Object(n["a"])([Object(o["c"])("functionBody",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"functionBody",void 0),Object(n["a"])([Object(o["c"])("filterBody",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"filterBody",void 0),Object(n["a"])([Object(o["c"])("interval",Number,!0),Object(n["b"])("design:type",Object)],s.prototype,"interval",void 0),s=Object(n["a"])([Object(o["b"])("DataSourceConfig"),Object(n["b"])("design:paramtypes",[Object])],s),t["a"]=s},"95ec":function(e,t,i){"use strict";i("63f4")},9654:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"DataSourceFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","database"]}}),t("span",[e._v("数据源")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建数据源",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createDataSourceConfig(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("065b"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"41ea8efd",null);t["default"]=f.exports},9698:function(e,t,i){},"981b":function(e,t,i){},"98e2":function(e,t,i){},"9a05":function(e,t,i){"use strict";i("5ad6")},"9a29":function(e,t,i){},"9af1":function(e,t,i){"use strict";i("7ddb")},"9ceb":function(e,t,i){"use strict";i("71d7")},"9cf7":function(e,t,i){"use strict";i("0d49")},"9d70":function(e,t,i){"use strict";i("6013")},"9e0a":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ApplicationContext"},[e._t("default")],2)},o=[],a=(i("14d9"),i("9ab4")),s=i("0b7a"),r=i("3374"),c=i("cd3f"),d=i.n(c),l=i("60a3"),p=i("7fe8"),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],staticClass:"LoadingComponent"})},f=[];let b=class extends l["f"]{};b=Object(a["a"])([l["a"]],b);var g,h,y=b,m=y,j=(i("2c39"),i("2877")),O=Object(j["a"])(m,u,f,!1,null,"19e4d0ab",null),v=O.exports,C=i("5ce8");function x(e){let t="";return 0===e.length?"":(t=e.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;"),t)}let w=class extends l["f"]{constructor(){super(...arguments),this.templateRender=null}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get customWidgetDefinition(){return this.context.applicationConfig.customWidgetDefinitions.find(e=>{var t;return null===(t=this.widgetDefinition)||void 0===t?void 0:t.id.endsWith(e.id)})}get customWidgetTemplate(){var e;return(null===(e=this.customWidgetDefinition)||void 0===e?void 0:e.template)||""}get userData(){return this.context.userData}render(e){try{return e("div",{class:"CustomWidget"},[this.templateRender?this.templateRender():""])}catch(t){return e("div",[t.message])}}compileTemplate(e){let t=Object(C["compile"])(e);t.errors.length&&(e=`<div>模板异常:<br> ${t.errors.map(x).join("<br>")}</div>`,t=Object(C["compile"])(e));const i=Object(C["compileToFunctions"])(e);delete this._staticTrees,this.templateRender=i.render,this.$options.staticRenderFns=i.staticRenderFns,this.$forceUpdate()}mounted(){}};Object(a["a"])([Object(l["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(g="undefined"!==typeof ve&&ve)?g:Object)],w.prototype,"context",void 0),Object(a["a"])([Object(l["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(h="undefined"!==typeof p["a"]&&p["a"])?h:Object)],w.prototype,"widgetConfig",void 0),Object(a["a"])([Object(l["c"])({required:!1,default:()=>({})}),Object(a["b"])("design:type",Object)],w.prototype,"data",void 0),Object(a["a"])([Object(l["g"])("customWidgetTemplate",{immediate:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[String]),Object(a["b"])("design:returntype",void 0)],w.prototype,"compileTemplate",null),w=Object(a["a"])([l["a"]],w);var S,_,A,D,W=w,E=W,k=(i("faca"),Object(j["a"])(E,S,_,!1,null,"7223c7b6",null)),T=k.exports,I=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CustomEchartsWidget"},[e._v("CustomEchartsWidget")])},N=[],P=i("406e"),M=i("164e"),B=i.n(M),L=i("18df");let R=class extends l["f"]{constructor(){super(...arguments),this.$chart=null,this.option={}}get userData(){return this.context.userData}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get customWidgetDefinition(){return this.context.applicationConfig.customWidgetDefinitions.find(e=>{var t;return null===(t=this.widgetDefinition)||void 0===t?void 0:t.id.endsWith(e.id)})}get echartsOptionFn(){var e;return(null===(e=this.customWidgetDefinition)||void 0===e?void 0:e.echartsOptionFn)||""}async echartsOptionFnChange(){const e=this.data,t=this.$attrs;try{const i=await Object(L["b"])(`{\n        function getEchartsOption(data, $attrs) {\n          ${this.echartsOptionFn}\n        }\n      }`,"getEchartsOption");this.option=i(e,t)}catch(i){console.error(i),this.option={title:{text:"{error|异常 "+(null===i||void 0===i?void 0:i.toString())+"}",textStyle:{rich:{error:{color:"red"}}}}}}}setOption(){const e=this.option;this.$chart.setOption(e,!0)}resizeHandler(){this.$chart&&this.$chart.resize()}mounted(){this.$chart=B.a.init(this.$el,"dark",{renderer:"canvas"}),this.setOption(),Object(P["a"])(this.$el,this.resizeHandler)}beforeDestroy(){Object(P["b"])(this.$el,this.resizeHandler),this.$chart.dispose()}};Object(a["a"])([Object(l["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(A="undefined"!==typeof ve&&ve)?A:Object)],R.prototype,"context",void 0),Object(a["a"])([Object(l["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(D="undefined"!==typeof p["a"]&&p["a"])?D:Object)],R.prototype,"widgetConfig",void 0),Object(a["a"])([Object(l["c"])({required:!1,default:()=>({})}),Object(a["b"])("design:type",Object)],R.prototype,"data",void 0),Object(a["a"])([Object(l["g"])("echartsOptionFn",{immediate:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",Promise)],R.prototype,"echartsOptionFnChange",null),Object(a["a"])([Object(l["g"])("option",{deep:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],R.prototype,"setOption",null),R=Object(a["a"])([l["a"]],R);var F,$,z=R,G=z,V=(i("e4b7"),Object(j["a"])(G,I,N,!1,null,"7c6d4392",null)),q=V.exports,J=i("7ac6"),U=i.n(J),X=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CombinationComonent"},e._l(e.childrenReverse,(function(i,n){return t("WidgetWrapper",{key:n,ref:i.id,refInFor:!0,attrs:{widgetConfig:i,inGroup:!0,combinationData:e.data}})})),1)},Y=[];let H=class extends l["f"]{get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get combination(){return this.context.applicationConfig.combinations.find(e=>{var t;return null===(t=this.widgetDefinition)||void 0===t?void 0:t.id.endsWith(e.id)})}get childrenReverse(){let e=[];var t,i;this.combinationSyncModel?e=(null===(t=this.combination)||void 0===t?void 0:t.widgets)||[]:e=l["f"].observable(d()((null===(i=this.combination)||void 0===i?void 0:i.widgets)||[]));const n=[];if(e)for(let o=e.length-1;o>=0;o--)n.push(e[o]);return n}};Object(a["a"])([Object(l["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(F="undefined"!==typeof ve&&ve)?F:Object)],H.prototype,"context",void 0),Object(a["a"])([Object(l["b"])({from:"combinationSyncModel",default:!1}),Object(a["b"])("design:type",Boolean)],H.prototype,"combinationSyncModel",void 0),Object(a["a"])([Object(l["c"])({type:Array,required:!0}),Object(a["b"])("design:type",Array)],H.prototype,"children",void 0),Object(a["a"])([Object(l["c"])(),Object(a["b"])("design:type",Object)],H.prototype,"data",void 0),Object(a["a"])([Object(l["c"])(),Object(a["b"])("design:type","function"===typeof($="undefined"!==typeof p["a"]&&p["a"])?$:Object)],H.prototype,"widgetConfig",void 0),H=Object(a["a"])([Object(l["a"])({components:{WidgetWrapper:()=>Promise.resolve().then(i.bind(null,"8d7b"))}})],H);var Z,Q,K=H,ee=K,te=(i("9a05"),Object(j["a"])(ee,X,Y,!1,null,"72e00fce",null)),ie=te.exports,ne=i("0ef4"),oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CustomD3Widget"},[t("svg",{ref:"svg",attrs:{preserveAspectRatio:"xMidYMid meet",viewBox:`0 0 ${e.widgetConfig.base.width} ${e.widgetConfig.base.height}`,width:e.widgetConfig.base.width,height:e.widgetConfig.base.height}})])},ae=[],se=i("5698");let re=class extends l["f"]{constructor(){super(...arguments),this.$chart=null}get userData(){return this.context.userData}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get customWidgetDefinition(){return this.context.applicationConfig.customWidgetDefinitions.find(e=>{var t;return null===(t=this.widgetDefinition)||void 0===t?void 0:t.id.endsWith(e.id)})}async update(){this.$forceUpdate();const e=this.data,t=this.$attrs;try{var i;const n=await Object(L["b"])(`\n        function d3Update(data, attrs, d3) {\n          ${null===(i=this.customWidgetDefinition)||void 0===i?void 0:i.d3UpateFn}\n        }\n      `,"d3Update");return n.call(this,e,t,se)}catch(n){console.log(n)}}mounted(){this.$nextTick(this.update)}};Object(a["a"])([Object(l["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(Z="undefined"!==typeof ve&&ve)?Z:Object)],re.prototype,"context",void 0),Object(a["a"])([Object(l["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(Q="undefined"!==typeof p["a"]&&p["a"])?Q:Object)],re.prototype,"widgetConfig",void 0),Object(a["a"])([Object(l["c"])({required:!1,default:()=>({})}),Object(a["b"])("design:type",Object)],re.prototype,"data",void 0),Object(a["a"])([Object(l["g"])("customWidgetDefinition.d3UpateFn"),Object(l["g"])("data",{deep:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",Promise)],re.prototype,"update",null),re=Object(a["a"])([l["a"]],re);var ce,de=re,le=de,pe=(i("38fd"),Object(j["a"])(le,oe,ae,!1,null,"30298822",null)),ue=pe.exports;function fe(e){const t=e.attrGroupSchemas,i=new p["a"];if(i.widgetDefinitionId=e.id,i.base.displayName=e.displayName,i.base.fixation=e.fixation||!1,i.base.width=e.width||300,i.base.height=e.height||300,e.dataSource.staticData&&(i.dataSource.staticData=e.dataSource.staticData,i.dataSource.functionBody="return "+e.dataSource.staticData),i.base.fixation=e.fixation||!1,t)for(const n of t)if("group"===n.type){const e=n,t={},o=e.attrSchemas;n.hasSwitch&&(t.switch=n.switchDefaultValue||!1),i.base.attrGroups[e.prop]=t;for(const i of o)t[i.prop]=i.value,"theme"===i.type&&(t[i.prop+"CustomColors"]=["#c23531","#4488ff","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ffffff"])}return i}function be(e){return new Promise(t=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{const n=new r["a"];n.name=e.name,n.url=i.result,t(n)}})}function ge(e){const t="echarts"===e.type?q:"d3"===e.type?ue:T;return{id:"WidgetDefinition|"+e.id,name:e.id,version:"0.0.1",displayName:e.name,icon:e.icon||U.a,group:"test",async:!1,actions:[],events:[],component:t,dataSource:{staticData:e.staticData},attrGroupSchemas:[],width:e.width,height:e.height}}function he(e){return{id:"WidgetDefinition|"+e.id,name:e.id,version:"0.0.1",displayName:e.name,fixation:!0,icon:e.icon||U.a,group:"test",async:!1,actions:[],events:[],component:ie,dataSource:{staticData:e.staticData},attrGroupSchemas:[],width:e.width,height:e.height}}let ye=class extends l["f"]{constructor(){super(...arguments),this.widgetDefinitionGroups=[],this.widgetDefinitionGroupsMap={},this.widgetDefinitionsMap={},this.userData={},this.dataSources=[]}get context(){return this}get dataSourceConfigs(){return this.applicationConfig.dataSources}get widgetDefinitionsOfCustomWidgetDefinitions(){return this.applicationConfig.customWidgetDefinitions.map(e=>ge(e))}get widgetDefinitionsOfCombinations(){return this.applicationConfig.combinations.map(e=>he(e))}get widgetConfigMap(){const e={},t=this.applicationConfig.pageConfigList;for(const i of t){const t=i.widgets;for(const i of t){e[i.id]=i;for(const t of i.children)e[t.id]=t}}return e}get variables(){const e={},t=this.applicationConfig.variables;for(const i of t)e[i.name]=d()(i);return l["f"].observable(e)}variable(e,t){const i=this.variables[e];return t&&(i.value=t),i.value}getWidgetConfig(e){return this.widgetConfigMap[e]||null}getWidgetDefinitionForCustomWidgetDefinition(e){return this.widgetDefinitionsOfCustomWidgetDefinitions.find(t=>t.id==="WidgetDefinition|"+e.id)}getWidgetDefinitionForCombination(e){return this.widgetDefinitionsOfCombinations.find(t=>t.id==="WidgetDefinition|"+e.id)}registerWidgetGroup(e){this.widgetDefinitionGroupsMap[e.name]||(this.widgetDefinitionGroups.push(e),this.$set(this.widgetDefinitionGroupsMap,e.name,e))}registerWidget(e){if(e.id||(e.id=e.name),this.widgetDefinitionsMap[e.name]&&!this.widgetDefinitionsMap[e.name].async)return;e.events=[...e.events],e.actions=[...e.actions];const t=Object.freeze(d()(e)),i=e.group;if(!this.widgetDefinitionGroupsMap[i])return;const n=this.widgetDefinitionGroupsMap[i],o=n.widgetDefinitions.findIndex(t=>t.name===e.name);-1!==o?this.$set(n.widgetDefinitions,o,t):n.widgetDefinitions.push(t),this.$set(this.widgetDefinitionsMap,e.id,t)}getWidgetDefinition(e){return e.startsWith("WidgetDefinition|CustomWidgetDefinition")?this.widgetDefinitionsOfCustomWidgetDefinitions.find(t=>t.id===e):e.startsWith("WidgetDefinition|Combination")?this.widgetDefinitionsOfCombinations.find(t=>t.id===e):this.widgetDefinitionsMap&&this.widgetDefinitionsMap[e]||null}async loadAsyncWidgetDefinition(e){const t=await Object(L["a"])(e.url);return this.registerWidget(t),t}async generateWidgetConfig(e){e.async&&(e=await this.loadAsyncWidgetDefinition(e));const t=fe(e),i=d()(t);return i}generateWidgetConfigSync(e){if(e.async)return;const t=fe(e),i=d()(t);return i}getComponent(e){var t,i;if(e.widgetDefinitionId.startsWith("WidgetDefinition|CustomWidgetDefinition"))return(null===(t=this.widgetDefinitionsOfCustomWidgetDefinitions.find(t=>t.id===e.widgetDefinitionId))||void 0===t?void 0:t.component)||v;if(e.widgetDefinitionId.startsWith("WidgetDefinition|Combination"))return(null===(i=this.widgetDefinitionsOfCombinations.find(t=>t.id===e.widgetDefinitionId))||void 0===i?void 0:i.component)||v;if(e&&e.widgetDefinitionId){const t=this.widgetDefinitionsMap[e.widgetDefinitionId];return t&&t.async?(this.loadAsyncWidgetDefinition(t),v):t&&t.component}return v}clone(e){this.widgetDefinitionsMap=d()(e.widgetDefinitionsMap),this.widgetDefinitionGroups=d()(e.widgetDefinitionGroups),this.widgetDefinitionGroupsMap=d()(e.widgetDefinitionGroupsMap)}getThemeColors(e){return this.applicationConfig.colorThemes.find(t=>t.id===e)||null}emitInteractionEvent(e){this.$emit("interaction-event",e)}resetDataSource(){this.dataSources.forEach(e=>{e.stop()}),this.dataSources=this.dataSourceConfigs.map(e=>{const t=new ne["a"](this,e);return t.run(),t})}beforeDestroy(){this.dataSources.forEach(e=>e.stop())}};Object(a["a"])([Object(l["d"])("nim-app-context"),Object(a["b"])("design:type",ye),Object(a["b"])("design:paramtypes",[])],ye.prototype,"context",null),Object(a["a"])([Object(l["c"])({type:Object,required:!0}),Object(a["b"])("design:type","function"===typeof(ce="undefined"!==typeof s["a"]&&s["a"])?ce:Object)],ye.prototype,"applicationConfig",void 0),Object(a["a"])([Object(l["c"])({required:!1,default:""}),Object(a["b"])("design:type",String)],ye.prototype,"baseURL",void 0),Object(a["a"])([Object(l["c"])({required:!1,default:()=>be}),Object(a["b"])("design:type",Function)],ye.prototype,"uploadFile",void 0),Object(a["a"])([Object(l["g"])("dataSourceConfigs",{deep:!0,immediate:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],ye.prototype,"resetDataSource",null),ye=Object(a["a"])([l["a"]],ye);var me=ye,je=me,Oe=Object(j["a"])(je,n,o,!1,null,"c304406e",null),ve=t["a"]=Oe.exports},"9f24":function(e,t,i){"use strict";i("823a")},"9f4c":function(e,t,i){},a041:function(e,t,i){},a1a5:function(e,t,i){},a1e8:function(e,t,i){"use strict";i("39ad")},a3c1:function(e,t,i){"use strict";i("3da3")},a491:function(e,t,i){"use strict";i("0e37")},a4e7:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ObjectTreeNode",attrs:{draggable:"true"}},[e._v("ObjectTreeNode")])},o=[],a=i("9ab4"),s=i("60a3");let r=class extends s["f"]{};r=Object(a["a"])([s["a"]],r);var c=r,d=c,l=(i("87f4"),i("2877")),p=Object(l["a"])(d,n,o,!1,null,"bc4d9bb4",null);t["default"]=p.exports},a5f3:function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ImageFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["far","image"]}}),t("span",[e._v("素材库")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"添加素材",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg,image/bmp"},on:{change:e.handleChange}})],1)},s=[],r=i("9ab4"),c=i("3374"),d=i("9e0a"),l=i("1cdf"),p=i("60a3"),u=i("58fb");let f=class extends p["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}async handleChange(e){const t=e.target;if(t.files&&t.files.length)try{const e=t.files[0],i=await Object(u["a"])(e),n=new c["a"],o=await this.context.uploadFile(e);n.url=o.url,n.name=o.name,n.width=i.width,n.height=i.height,n.size=i.size,this.editor.addImageAsset(n)}catch(i){}}handleAddBtnClick(){const e=this.$refs.fileInput;e.value="",e.click(),this.$nextTick(()=>{this.treeContext.node.expanded=!0})}};Object(r["a"])([Object(p["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],f.prototype,"editor",void 0),Object(r["a"])([Object(p["b"])("nim-app-context"),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],f.prototype,"context",void 0),Object(r["a"])([Object(p["c"])(),Object(r["b"])("design:type",Object)],f.prototype,"treeContext",void 0),f=Object(r["a"])([p["a"]],f);var b=f,g=b,h=(i("acd3"),i("2877")),y=Object(h["a"])(g,a,s,!1,null,"0d2b2e7a",null);t["default"]=y.exports},a72c:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return p}));var n,o,a;i("d9e2"),i("14d9"),i("13d5");(function(e){e[e["DISABLE"]=0]="DISABLE",e[e["ENABLE"]=1]="ENABLE",e[e["LOGGING"]=2]="LOGGING"})(n||(n={})),function(e){e[e["CASE_STRICT"]=1]="CASE_STRICT",e[e["CASE_INSENSITIVE"]=2]="CASE_INSENSITIVE"}(o||(o={})),function(e){e[e["ALLOW_NULL"]=1]="ALLOW_NULL",e[e["ALLOW_OBJECT_NULL"]=2]="ALLOW_OBJECT_NULL",e[e["DISALLOW_NULL"]=3]="DISALLOW_NULL"}(a||(a={}));class s{}s.MAPPING_PROPERTY="__jsonconvert__mapping__",s.MAPPER_PROPERTY="__jsonconvert__mapper__",s.CLASS_IDENTIFIER="__jsonconvert__class_identifier__";class r{constructor(){this.classPropertyName="",this.jsonPropertyName="",this.expectedJsonType=void 0,this.isOptional=!1,this.customConverter=null,this.userData=null}}class c{}class d{constructor(e,t,i,s){this._operationMode=n.ENABLE,this._valueCheckingMode=a.ALLOW_OBJECT_NULL,this._ignorePrimitiveChecks=!1,this._propertyMatchingRule=o.CASE_STRICT,this._ignoreRequiredCheck=!1,void 0!==e&&e in n&&(this.operationMode=e),void 0!==t&&t in a&&(this.valueCheckingMode=t),void 0!==i&&(this.ignorePrimitiveChecks=i),void 0!==s&&(this.propertyMatchingRule=s)}get operationMode(){return this._operationMode}set operationMode(e){e in n&&(this._operationMode=e)}get valueCheckingMode(){return this._valueCheckingMode}set valueCheckingMode(e){e in a&&(this._valueCheckingMode=e)}get ignorePrimitiveChecks(){return this._ignorePrimitiveChecks}set ignorePrimitiveChecks(e){this._ignorePrimitiveChecks=e}get propertyMatchingRule(){return this._propertyMatchingRule}set propertyMatchingRule(e){e in o&&(this._propertyMatchingRule=e)}get ignoreRequiredCheck(){return this._ignoreRequiredCheck}set ignoreRequiredCheck(e){this._ignoreRequiredCheck=e}serialize(e,t){if(this.operationMode===n.DISABLE)return e;if(e instanceof Array)return this.serializeArray(e,t);if("object"===typeof e)return this.serializeObject(e,t);throw new Error("Fatal error in JsonConvert. Passed parameter data in JsonConvert.serialize() is not in valid format (object or array).\n")}serializeObject(e,t){if(this.operationMode===n.DISABLE)return e;if(void 0===e)throw new Error("Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is undefined. This is not a valid JSON format.\n");if(null===e){if(this.valueCheckingMode===a.DISALLOW_NULL)throw new Error("Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is undefined. You have specified to disallow null values.\n");return e}if("object"!==typeof e||e instanceof Array)throw new Error("Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is not of type object.\n");this.operationMode===n.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript instance:"),console.log(e));const i={};let o;o=t?new t:e;for(const a of Object.keys(o))try{this.serializeObject_loopProperty(e,o,a,i)}catch(s){throw this.operationMode===n.LOGGING&&(console.log("Failed to serialize property:"),console.log(s),console.log("----------")),s}return this.operationMode===n.LOGGING&&(console.log("Returning JSON object:"),console.log(i),console.log("----------")),i}serializeArray(e,t){if(this.operationMode===n.DISABLE)return e;if(void 0===e)throw new Error("Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is undefined. This is not a valid JSON format.\n");if(null===e){if(this.valueCheckingMode===a.DISALLOW_NULL)throw new Error("Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is undefined. You have specified to disallow null values.\n");return e}if("object"!==typeof e||e instanceof Array===!1)throw new Error("Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is not of type array.\n");this.operationMode===n.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript array:"),console.log(e));const i=[];for(const n of e)i.push(this.serializeObject(n,t));return this.operationMode===n.LOGGING&&(console.log("Returning JSON array:"),console.log(i),console.log("----------")),i}deserialize(e,t){if(this.operationMode===n.DISABLE)return e;if(e instanceof Array)return this.deserializeArray(e,t);if("object"===typeof e)return this.deserializeObject(e,t);throw new Error("Fatal error in JsonConvert. Passed parameter json in JsonConvert.deserialize() is not in valid JSON format (object or array).\n")}deserializeObject(e,t){if(this.operationMode===n.DISABLE)return e;if(void 0===e)throw new Error("Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is undefined. This is not a valid JSON format.\n");if(null===e){if(this.valueCheckingMode===a.DISALLOW_NULL)throw new Error("Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is undefined. You have specified to disallow null values.\n");return e}if("object"!==typeof e||e instanceof Array)throw new Error("Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is not of type object.\n");this.operationMode===n.LOGGING&&(console.log("----------"),console.log("Receiving JSON object:"),console.log(e));const i=new t;for(const a of Object.keys(i))try{this.deserializeObject_loopProperty(i,a,e)}catch(o){throw this.operationMode===n.LOGGING&&(console.log("Failed to deserialize property:"),console.log(o),console.log("----------")),o}return this.operationMode===n.LOGGING&&(console.log("Returning CLASS instance:"),console.log(i),console.log("----------")),i}deserializeArray(e,t){if(this.operationMode===n.DISABLE)return e;if(void 0===e)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeObject() is undefined. This is not a valid JSON format.\n");if(null===e){if(this.valueCheckingMode===a.DISALLOW_NULL)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeObject() is undefined. You have specified to disallow null values.\n");return e}if("object"!==typeof e||e instanceof Array===!1)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeArray() is not of type array.\n");if(this.operationMode===n.DISABLE)return e;this.operationMode===n.LOGGING&&(console.log("----------"),console.log("Receiving JSON array:"),console.log(e));const i=[];for(const n of e)i.push(this.deserializeObject(n,t));return this.operationMode===n.LOGGING&&(console.log("Returning array of CLASS instances:"),console.log(i),console.log("----------")),i}serializeObject_loopProperty(e,t,i,n){const o=this.getClassPropertyMappingOptions(t,i);if(null===o)return;const a=o.jsonPropertyName,r=o.expectedJsonType,c=o.isOptional,d=o.customConverter,l=e[i];if("undefined"===typeof l){if(c||this._ignoreRequiredCheck)return;throw new Error('Fatal error in JsonConvert. Failed to map the JavaScript instance of class "'+t[s.CLASS_IDENTIFIER]+'" to JSON because the defined class property "'+i+'" does not exist or is not defined:\n\n\tClass property: \n\t\t'+i+"\n\n\tJSON property: \n\t\t"+a+"\n\n")}if(!c||null!==l)try{n[a]=null!==d?d.serialize(l):this.verifyProperty(r,l,!0)}catch(p){throw new Error('Fatal error in JsonConvert. Failed to map the JavaScript instance of class "'+t[s.CLASS_IDENTIFIER]+'" to JSON because of a type error.\n\n\tClass property: \n\t\t'+i+"\n\n\tClass property value: \n\t\t"+l+"\n\n\tExpected type: \n\t\t"+this.getExpectedType(r)+"\n\n\tRuntime type: \n\t\t"+this.getTrueType(l)+"\n\n\tJSON property: \n\t\t"+a+"\n\n"+p.message+"\n")}}deserializeObject_loopProperty(e,t,i){const n=this.getClassPropertyMappingOptions(e,t);if(null===n)return;const o=n.jsonPropertyName,a=n.expectedJsonType,r=n.isOptional,c=n.customConverter;let d;try{d=this.getObjectValue(i,o)}catch{}if("undefined"===typeof d){if(r||this._ignoreRequiredCheck)return;throw new Error('Fatal error in JsonConvert. Failed to map the JSON object to the class "'+e[s.CLASS_IDENTIFIER]+'" because the defined JSON property "'+o+'" does not exist:\n\n\tClass property: \n\t\t'+t+"\n\n\tJSON property: \n\t\t"+o+"\n\n")}if(!r||null!==d)try{e[t]=null!==c?c.deserialize(d):this.verifyProperty(a,d)}catch(l){throw new Error('Fatal error in JsonConvert. Failed to map the JSON object to the class "'+e[s.CLASS_IDENTIFIER]+'" because of a type error.\n\n\tClass property: \n\t\t'+t+"\n\n\tExpected type: \n\t\t"+this.getExpectedType(a)+"\n\n\tJSON property: \n\t\t"+o+"\n\n\tJSON type: \n\t\t"+this.getJsonType(d)+"\n\n\tJSON value: \n\t\t"+JSON.stringify(d)+"\n\n"+l.message+"\n")}}getClassPropertyMappingOptions(e,t){const i=e[s.MAPPING_PROPERTY];if("undefined"===typeof i)return null;let n=Object.getPrototypeOf(e);while(null!==n&&void 0!==n){const e=n[s.CLASS_IDENTIFIER];if(e){const n=e+"."+t;if("undefined"!==typeof i[n])return i[n]}n=Object.getPrototypeOf(n)}return null}verifyProperty(e,t,i){if(e===c||null===e||e===Object)return t;if(e instanceof Array===!1&&t instanceof Array===!1){if("undefined"!==typeof e&&e.prototype.hasOwnProperty(s.CLASS_IDENTIFIER)){if(null===t){if(this.valueCheckingMode!==a.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}return i?this.serializeObject(t,e):this.deserializeObject(t,e)}if(e===c||null===e||e===Object){if(null===t){if(this.valueCheckingMode!==a.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}return t}if(e===String||e===Number||e===Boolean){if(null===t){if(this.valueCheckingMode===a.ALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}if(e===String&&"string"===typeof t||e===Number&&"number"===typeof t||e===Boolean&&"boolean"===typeof t)return t;if(this.ignorePrimitiveChecks)return t;throw new Error("\tReason: Given object does not match the expected primitive type.")}throw new Error("\tReason: Expected type is unknown. There might be multiple reasons for this:\n\t- You are missing the decorator @JsonObject (for object mapping)\n\t- You are missing the decorator @JsonConverter (for custom mapping) before your class definition\n\t- Your given class is undefined in the decorator because of circular dependencies")}if(e instanceof Array){if(null===t){if(this.valueCheckingMode!==a.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}if(t instanceof Object){const n=[];if(0===t.length)return n;if(0===e.length)return t;const o=e.slice(0);if(t instanceof Array){const e=o.length<t.length;for(let a=0;a<t.length;a++)e&&a>=o.length&&(o[a]=o[a-1]),n[a]=this.verifyProperty(o[a],t[a],i);return n}{const e=o.length<Object.keys(t).length;let i=0;for(const a in t)e&&i>=o.length&&(o[i]=o[i-1]),n[a]=this.verifyProperty(o[i],t[a]),i++;return n}}throw new Error("\tReason: Expected type is array, but given value is primitive.")}if(t instanceof Array)throw new Error("\tReason: Given value is array, but expected a non-array type.");throw new Error("\tReason: Mapping failed because of an unknown error.")}getObjectValue(e,t){if(this.propertyMatchingRule===o.CASE_INSENSITIVE){const i=Object.keys(e).reduce((e,t)=>(e[t.toLowerCase()]=t,e),{});t=i[t.toLowerCase()]}if(t in e===!1)throw new Error;return e[t]}getExpectedType(e){let t="";if(e instanceof Array){t="[";for(let i=0;i<e.length;i++)i>0&&(t+=","),t+=this.getExpectedType(e[i]);return t+="]",t}return e===c||null===e||e===Object?"any":e===String||e===Boolean||e===Number?(new e).constructor.name.toLowerCase():"function"===typeof e?(new e).constructor.name:void 0===e?"undefined":"?????"}getJsonType(e){if(null===e)return"null";let t="";if(e instanceof Array){t="[";for(let i=0;i<e.length;i++)i>0&&(t+=","),t+=this.getJsonType(e[i]);return t+="]",t}return typeof e}getTrueType(e){return typeof e}}i("7550");function l(e){let t="";const i=e=>{e.prototype[s.CLASS_IDENTIFIER]=t.length>0?t:e.name;const i=e.prototype[s.MAPPING_PROPERTY];if(!i)return;const n=Object.keys(i).filter(e=>0===e.indexOf(s.CLASS_IDENTIFIER+"."));for(const t of n)i[t.replace(s.CLASS_IDENTIFIER,e.prototype[s.CLASS_IDENTIFIER])]=i[t],delete i[t]},n=typeof e;switch(n){case"string":return t=e,i;case"function":case"undefined":default:throw new Error("Fatal error in JsonConvert. It is mandatory to pass a string as parameter in the @JsonObject decorator.\n\nUse @JsonObject(classId) where classId is a string.\n\n")}}function p(...e){return function(t,i){let n=i,o=c,a=!1,d=null;switch(e.length){case 1:if(void 0===e[0])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+"\n\nLeave the decorator parameters empty if you do not wish to pass the first parameter.\n\n");n=e[0];break;case 2:if(void 0===e[0])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+"\n\nLeave the decorator parameters empty if you do not wish to pass the first parameter.\n\n");if(void 0===e[1])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as second parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+'\n\nUse "Any" to allow any type. You can import this class from "json2typescript".\n\n');n=e[0],o=e[1];break;case 3:if(void 0===e[0])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+"\n\nLeave the decorator parameters empty if you do not wish to pass the first parameter.\n\n");if(void 0===e[1])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as second parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+'\n\nUse "Any" to allow any type. You can import this class from "json2typescript".\n\n');n=e[0],o=e[1],a=e[2];break;case 4:if(void 0===e[0])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+"\n\nLeave the decorator parameters empty if you do not wish to pass the first parameter.\n\n");if(void 0===e[1])throw new Error('Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as second parameter in the @JsonProperty decorator.\n\n\tClass property: \n\t\t'+i+'\n\nUse "Any" to allow any type. You can import this class from "json2typescript".\n\n');n=e[0],o=e[1],a=e[2],d=e[3];break;default:break}"undefined"===typeof t[s.MAPPING_PROPERTY]&&(t[s.MAPPING_PROPERTY]=[]);const l=new r;if(l.classPropertyName=i,l.jsonPropertyName=n,l.isOptional=a||!1,l.userData=d,"undefined"!==typeof o&&null!==o&&"undefined"!==typeof o[s.MAPPER_PROPERTY]?l.customConverter=new o:l.expectedJsonType=o,"undefined"!==typeof t[s.MAPPING_PROPERTY][s.CLASS_IDENTIFIER+"."+i])throw new Error("Fatal error in JsonConvert. It is not allowed to add multiple decorators for the same property.\n\n\tClass property: \n\t\t"+i+"\n\n");t[s.MAPPING_PROPERTY][s.CLASS_IDENTIFIER+"."+i]=l}}},a740:function(e,t,i){},a755:function(e,t,i){"use strict";i("5a8c")},a9a7:function(e,t,i){"use strict";var n,o,a,s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ApplicationContext",{ref:"applicationContext",staticClass:"Director",attrs:{applicationConfig:e.applicationConfig||e.innerApplicationConfig}},[1===e.pageConfigList.length?t("Renderer",{ref:"renderer",staticClass:"render",attrs:{"page-config":e.pageConfigList[0],autoScale:!0}}):t("el-carousel",{staticClass:"el-carousel",attrs:{interval:5e3,arrow:"never",trigger:"click",height:"100%",autoplay:!1}},e._l(e.pageConfigList,(function(e){return t("el-carousel-item",{key:e.id},[t("Renderer",{ref:"renderer",refInFor:!0,staticClass:"render",attrs:{"page-config":e,autoScale:!0}})],1)})),1)],1)},r=[],c=(i("14d9"),i("9ab4")),d=i("60a3"),l=i("566c"),p=i("0b7a"),u=i("9e0a"),f=i("bc3a"),b=i.n(f),g=i("a72c"),h=i("18df");let y=class extends d["f"]{constructor(){super(...arguments),this.innerApplicationConfig=new p["a"]}get context(){return this.applicationContext}getWidgetWrapper(e){let t=[];const i=this.$refs.renderer;Array.isArray(i)?t=i:i&&t.push(i);for(const n of t){const t=n.getWidgetWrapper(e);if(t)return t}return null}get pageConfigList(){return(this.applicationConfig||this.innerApplicationConfig).pageConfigList}doWait(e){return new Promise(t=>{window.setTimeout(t,1e3*e)})}doSetVariable(e,t){var i;const n=null===(i=this.applicationContext.variables[e])||void 0===i?void 0:i.type;switch(n){case"string":this.applicationContext.variable(e,String(t));break;case"number":this.applicationContext.variable(e,Number(t));break;case"boolean":this.applicationContext.variable(e,"true"===t);break;default:break}}async doLoopAction(e,t,i){for(let n=0;n<t;n++){for(const e of i)await this.doAction(e);await this.doWait(e)}}async doAction(e){const t=e.executorId,i=e.actionType,n=e.parameters;if("director"===t){const e=this||{},t=e[i];t&&"function"===typeof t?await t.apply(e,n):console.warn("无效的动作方法"+i)}else if(t.startsWith("WidgetConfig")){const e=this.getWidgetWrapper(t)||{},o=e[i];o&&"function"===typeof o?await o.apply(e,n):console.warn("无效的动作方法"+i)}}async handleInteractionEvent(e){const t=this.applicationConfig.interactionTriggers,i=t.find(t=>t.triggerId===e.triggerId&&t.eventType===e.type);if(i&&!i.running){i.running=!0;const e=i.actions;for(const t of e)await this.doAction(t);i.running=!1}}mounted(){this.injectContext&&this.applicationContext.clone(this.injectContext),window.setTimeout(()=>{(this.applicationConfig||this.innerApplicationConfig).userScripts.forEach(async e=>{const t=await Object(h["b"])(` \n            async function  userFn(context, director, axios) {\n              ${e.code}\n            }\n        `,"userFn");t(this.applicationContext,this,b.a)}),this.context.$on("interaction-event",e=>{this.handleInteractionEvent(e)}),this.context.emitInteractionEvent({type:"init",triggerId:"director",trigger:this})},0)}created(){this.config&&(this.innerApplicationConfig=(new g["a"]).deserializeObject(this.config,p["a"]))}};Object(c["a"])([Object(d["c"])({type:Object,required:!1}),Object(c["b"])("design:type","function"===typeof(n="undefined"!==typeof p["a"]&&p["a"])?n:Object)],y.prototype,"applicationConfig",void 0),Object(c["a"])([Object(d["c"])({type:Object,required:!1}),Object(c["b"])("design:type",Object)],y.prototype,"config",void 0),Object(c["a"])([Object(d["b"])({from:"nim-app-context",default:null}),Object(c["b"])("design:type","function"===typeof(o="undefined"!==typeof u["a"]&&u["a"])?o:Object)],y.prototype,"injectContext",void 0),Object(c["a"])([Object(d["e"])(),Object(c["b"])("design:type","function"===typeof(a="undefined"!==typeof u["a"]&&u["a"])?a:Object)],y.prototype,"applicationContext",void 0),y=Object(c["a"])([Object(d["a"])({components:{Renderer:l["a"],ApplicationContext:u["a"]}})],y);var m=y,j=m,O=(i("9175"),i("2877")),v=Object(O["a"])(j,s,r,!1,null,"769ed778",null);t["a"]=v.exports},a9cf:function(e,t,i){},aa2e:function(e,t,i){"use strict";t["a"]="\ninterface AxiosTransformer {\n  (data: any, headers?: any): any;\n}\n\ninterface AxiosAdapter {\n  (config: AxiosRequestConfig): AxiosPromise<any>;\n}\n\ninterface AxiosBasicCredentials {\n  username: string;\n  password: string;\n}\n\ninterface AxiosProxyConfig {\n  host: string;\n  port: number;\n  auth?: {\n    username: string;\n    password:string;\n  };\n  protocol?: string;\n}\n\ntype Method =\n  | 'get' | 'GET'\n  | 'delete' | 'DELETE'\n  | 'head' | 'HEAD'\n  | 'options' | 'OPTIONS'\n  | 'post' | 'POST'\n  | 'put' | 'PUT'\n  | 'patch' | 'PATCH'\n  | 'purge' | 'PURGE'\n  | 'link' | 'LINK'\n  | 'unlink' | 'UNLINK'\n\ntype ResponseType =\n  | 'arraybuffer'\n  | 'blob'\n  | 'document'\n  | 'json'\n  | 'text'\n  | 'stream'\n\ninterface AxiosRequestConfig {\n  url?: string;\n  method?: Method;\n  baseURL?: string;\n  transformRequest?: AxiosTransformer | AxiosTransformer[];\n  transformResponse?: AxiosTransformer | AxiosTransformer[];\n  headers?: any;\n  params?: any;\n  paramsSerializer?: (params: any) => string;\n  data?: any;\n  timeout?: number;\n  timeoutErrorMessage?: string;\n  withCredentials?: boolean;\n  adapter?: AxiosAdapter;\n  auth?: AxiosBasicCredentials;\n  responseType?: ResponseType;\n  xsrfCookieName?: string;\n  xsrfHeaderName?: string;\n  onUploadProgress?: (progressEvent: any) => void;\n  onDownloadProgress?: (progressEvent: any) => void;\n  maxContentLength?: number;\n  validateStatus?: ((status: number) => boolean) | null;\n  maxBodyLength?: number;\n  maxRedirects?: number;\n  socketPath?: string | null;\n  httpAgent?: any;\n  httpsAgent?: any;\n  proxy?: AxiosProxyConfig | false;\n  cancelToken?: CancelToken;\n  decompress?: boolean;\n}\n\ninterface AxiosResponse<T = any>  {\n  data: T;\n  status: number;\n  statusText: string;\n  headers: any;\n  config: AxiosRequestConfig;\n  request?: any;\n}\n\ninterface AxiosError<T = any> extends Error {\n  config: AxiosRequestConfig;\n  code?: string;\n  request?: any;\n  response?: AxiosResponse<T>;\n  isAxiosError: boolean;\n  toJSON: () => object;\n}\n\ninterface AxiosPromise<T = any> extends Promise<AxiosResponse<T>> {\n}\n\ninterface CancelStatic {\n  new (message?: string): Cancel;\n}\n\ninterface Cancel {\n  message: string;\n}\n\ninterface Canceler {\n  (message?: string): void;\n}\n\ninterface CancelTokenStatic {\n  new (executor: (cancel: Canceler) => void): CancelToken;\n  source(): CancelTokenSource;\n}\n\ninterface CancelToken {\n  promise: Promise<Cancel>;\n  reason?: Cancel;\n  throwIfRequested(): void;\n}\n\ninterface CancelTokenSource {\n  token: CancelToken;\n  cancel: Canceler;\n}\n\ninterface AxiosInterceptorManager<V> {\n  use(onFulfilled?: (value: V) => V | Promise<V>, onRejected?: (error: any) => any): number;\n  eject(id: number): void;\n}\n\ninterface AxiosInstance {\n  (config: AxiosRequestConfig): AxiosPromise;\n  (url: string, config?: AxiosRequestConfig): AxiosPromise;\n  defaults: AxiosRequestConfig;\n  interceptors: {\n    request: AxiosInterceptorManager<AxiosRequestConfig>;\n    response: AxiosInterceptorManager<AxiosResponse>;\n  };\n  getUri(config?: AxiosRequestConfig): string;\n  request<T = any, R = AxiosResponse<T>> (config: AxiosRequestConfig): Promise<R>;\n  get<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n  delete<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n  head<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n  options<T = any, R = AxiosResponse<T>>(url: string, config?: AxiosRequestConfig): Promise<R>;\n  post<T = any, R = AxiosResponse<T>>(url: string, data?: any, config?: AxiosRequestConfig): Promise<R>;\n  put<T = any, R = AxiosResponse<T>>(url: string, data?: any, config?: AxiosRequestConfig): Promise<R>;\n  patch<T = any, R = AxiosResponse<T>>(url: string, data?: any, config?: AxiosRequestConfig): Promise<R>;\n}\n\ninterface AxiosStatic extends AxiosInstance {\n  create(config?: AxiosRequestConfig): AxiosInstance;\n  Cancel: CancelStatic;\n  CancelToken: CancelTokenStatic;\n  isCancel(value: any): boolean;\n  all<T>(values: (T | Promise<T>)[]): Promise<T[]>;\n  spread<T, R>(callback: (...args: T[]) => R): (array: T[]) => R;\n}\n\ndeclare const axios: AxiosStatic;\n\ninterface NimApplication {\n  dataSourceMap: number;\n}\n\ndeclare const app: NimApplication;\n"},ab12:function(e,t,i){},acd3:function(e,t,i){"use strict";i("bc55")},ad21:function(e,t,i){"use strict";i("ee05")},ae62:function(e,t,i){},afc3:function(e,t,i){},b052:function(e,t,i){},b0a6:function(e,t,i){},b4dd:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"OperatingSpace"},[t("div",{staticClass:"operating-space-axis-container"},[t("OperatingSpaceAxis",{ref:"axis",attrs:{dragable:e.dragable,inCombinationEditor:e.inCombinationEditor},on:{dropWidgetdefinition:function(t){return e.$emit("dropWidgetdefinition",t)}},scopedSlots:e._u([{key:"unscale",fn:function(){return e._l(e.widgetConfigsReverse,(function(e){return t("WidgetController",{key:e.id,ref:"controllers",refInFor:!0,attrs:{widgetConfig:e}})}))},proxy:!0}])},[t("div",{ref:"main",staticStyle:{display:"inline-block"}},[e._t("default")],2)])],1)])},o=[],a=i("9ab4"),s=i("60a3"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"OperatingSpaceAxis",class:{draging:e.draging},on:{"&wheel":function(t){return e.handleWhell.apply(null,arguments)},mousedown:function(t){return t.stopPropagation(),e.startDrag(t)},dragover:e.handleDragover,drop:e.handleDrop}},[t("div",{staticClass:"x-axis"},[t("canvas",{ref:"xcanvas",attrs:{width:e.width,height:e.axisWidth}})]),t("div",{staticClass:"y-axis"},[t("canvas",{ref:"ycanvas",attrs:{width:e.axisWidth,height:e.height}})]),t("div",{ref:"content",staticClass:"content"},[t("div",{staticClass:"default-solt",style:e.defaultSoltStyle},[e._t("default")],2)]),t("div",{staticClass:"unscale-layer",style:e.unscaleLayerStyle},[e._t("unscale")],2)])},c=[],d=i("406e");const l=14999;let p=class extends s["f"]{constructor(){super(...arguments),this.scale=1,this.width=0,this.height=0,this.axisWidth=25,this.offsetX=50,this.offsetY=50,this.draging=!1,this.initialState=null}get axis(){return this}get defaultSoltStyle(){return{transform:`translate(${this.offsetX*this.scale}px, ${this.offsetY*this.scale}px) scale(${this.scale})`,transformOrigin:"left top"}}get unscaleLayerStyle(){const e=this.offsetX*this.scale+this.axisWidth,t=this.offsetY*this.scale+this.axisWidth;return{top:t+"px",left:e+"px"}}handleWhell(e){if(e.ctrlKey){let t=this.scale+-e.deltaY/1e3;t>8&&(t=8),t<.125&&(t=.125),this.scale=Number(t.toFixed(2))}}startDrag(e){this.dragable&&(this.draging=!0,this.initialState={offsetX:this.offsetX,offsetY:this.offsetY,clientX:e.clientX,clientY:e.clientY},document.addEventListener("mousemove",this.onMoving),document.addEventListener("mouseup",this.endDrag))}checkOffset(){this.offsetX>l&&(this.offsetX=l),this.offsetX<-l+this.width/this.scale&&(this.offsetX=-l+this.width/this.scale),this.offsetY>l&&(this.offsetY=l),this.offsetY<-l+this.height/this.scale&&(this.offsetY=-l+this.height/this.scale)}onMoving(e){const t=this.initialState,i=e.clientX-t.clientX,n=e.clientY-t.clientY;this.offsetX=Math.round(t.offsetX+i/this.scale),this.offsetY=Math.round(t.offsetY+n/this.scale),this.checkOffset()}endDrag(e){this.onMoving(e),delete this.initialState,this.draging=!1,document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.endDrag)}renderAxis(){this.$nextTick(()=>{const e=this.scale,t=this.$refs.xcanvas,i=t.getContext("2d"),n=this.$refs.ycanvas,o=n.getContext("2d");if(i&&o){i.clearRect(0,0,this.width,this.axisWidth),i.font="12px Arial",i.lineWidth=1,i.strokeStyle="#ffffff",i.fillStyle="#ffffff",i.textAlign="center",o.clearRect(0,0,this.height,this.axisWidth),o.font="12px Arial",o.lineWidth=1,o.strokeStyle="#ffffff",o.fillStyle="#ffffff",o.textAlign="center",o.setTransform(),o.translate(this.axisWidth,0),o.rotate(90*Math.PI/180);let t=100;this.scale<.5&&(t=1e3),this.scale>2&&(t=50),this.scale>3&&(t=20),this.scale>=5&&(t=10);const n=-this.offsetX,a=Math.floor(n/t)*t;let s=0;for(let o=a;s<=this.width+t;o+=t){s=(-n+o)*e+this.axisWidth,i.beginPath(),i.moveTo(s,20),i.lineTo(s,25),Math.abs(o)<l&&i.fillText(String(o),s,15);for(let n=1;n<10;n++)i.moveTo(s+n*e*t/10,23),i.lineTo(s+n*e*t/10,25);i.stroke()}let r=0;const c=-this.offsetY,d=Math.floor(c/t)*t;for(let i=d;r<=this.height+t;i+=t){r=(-c+i)*e+this.axisWidth,o.beginPath(),o.moveTo(r,0),o.lineTo(r,5),Math.abs(i)<l&&o.fillText(String(i),r,20);for(let i=1;i<10;i++)o.moveTo(r+i*e*t/10,0),o.lineTo(r+i*e*t/10,2);o.stroke()}i.clearRect(0,0,this.axisWidth,this.axisWidth),o.clearRect(0,0,this.axisWidth,this.axisWidth)}})}handleDragover(e){if(e.dataTransfer){const t=-1!==e.dataTransfer.types.indexOf("widgetdefinitionid"),i=-1!==e.dataTransfer.types.indexOf("isbasewidgetdefinition");if(this.inCombinationEditor&&!i)return;t&&e.preventDefault()}}handleDrop(e){if(e.dataTransfer){const t=e.dataTransfer.getData("widgetdefinitionid"),i="true"===e.dataTransfer.getData("isbasewidgetdefinition");if(this.inCombinationEditor&&!i)return;if(t){e.preventDefault();const n=this.$refs.content,o=n.getBoundingClientRect(),a=(e.clientX-o.x)/this.scale-this.offsetX,s=(e.clientY-o.y)/this.scale-this.offsetY;this.$emit("dropWidgetdefinition",{id:t,x:Math.round(a),y:Math.round(s),isBaseWidgetdefinition:i})}}}onResize(e){this.width=e.clientWidth,this.height=e.clientHeight}mounted(){this.onResize(this.$el),Object(d["a"])(this.$el,this.onResize)}beforeDestroy(){Object(d["b"])(this.$el,this.onResize)}};Object(a["a"])([Object(s["c"])({default:!0}),Object(a["b"])("design:type",Boolean)],p.prototype,"dragable",void 0),Object(a["a"])([Object(s["c"])({required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],p.prototype,"inCombinationEditor",void 0),Object(a["a"])([Object(s["d"])("axis"),Object(a["b"])("design:type",p),Object(a["b"])("design:paramtypes",[])],p.prototype,"axis",null),Object(a["a"])([Object(s["g"])("scale"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],p.prototype,"checkOffset",null),Object(a["a"])([Object(s["g"])("scale"),Object(s["g"])("width"),Object(s["g"])("height"),Object(s["g"])("offsetX"),Object(s["g"])("offsetY"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],p.prototype,"renderAxis",null),p=Object(a["a"])([s["a"]],p);var u,f,b,g,h=p,y=h,m=(i("2af5"),i("2877")),j=Object(m["a"])(y,r,c,!1,null,"4f4a64da",null),O=j.exports,v=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetController",class:{active:e.isSelected,move:e.move,hover:e.hover,fade:e.fade,locked:e.locked,"is-group":e.isGroup,"child-active":e.childActive},style:e.style,on:{click:function(t){return t.stopPropagation(),e.handleWidgetControllerClick.apply(null,arguments)},mouseenter:function(t){t.stopPropagation(),e.hoverWidgetConfig=e.widgetConfig},mouseleave:function(t){t.stopPropagation(),e.hoverWidgetConfig=null},mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"move")},contextmenu:function(t){return t.preventDefault(),e.handleContextmenu.apply(null,arguments)}}},[t("div",{staticClass:"inner",style:e.style3D}),e.isSelected||e.hover||e.childActive?t("div",[t("div",{staticClass:"position",class:{"anchor-right-top":"right-top"===e.baseConfig.anchor,"anchor-center":"center"===e.baseConfig.anchor,"anchor-right-bottom":"right-bottom"===e.baseConfig.anchor,"anchor-left-bottom":"left-bottom"===e.baseConfig.anchor,"anchor-center-top":"center-top"===e.baseConfig.anchor,"anchor-center-bottom":"center-bottom"===e.baseConfig.anchor,"anchor-left-center":"left-center"===e.baseConfig.anchor,"anchor-right-center":"right-center"===e.baseConfig.anchor}},[e.isGroup?t("div",{staticClass:"drag-handler"}):e._e(),t("div",{staticClass:"x-line",style:{height:e.yLength+"px"}},[t("div",{staticClass:"value",style:{top:"5px"}},[e._v("X："+e._s(e.baseConfig.x))])]),t("div",{staticClass:"y-line",style:{width:e.xLength+"px"}},[t("div",{staticClass:"value",style:{left:"5px"}},[e._v("Y："+e._s(e.baseConfig.y))])])]),e.canSetSize?[t("span",{staticClass:"control-point top",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-top")}}}),t("span",{staticClass:"control-point left",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-left")}}}),t("span",{staticClass:"control-point right",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-right")}}}),t("span",{staticClass:"control-point bottom",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-bottom")}}}),t("span",{staticClass:"control-point top left",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-top-left")}}}),t("span",{staticClass:"control-point top right",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-top-right")}}}),t("span",{staticClass:"control-point bottom left",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-bottom-left")}}}),t("span",{staticClass:"control-point bottom right",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t,"resize-bottom-right")}}})]:e._e()],2):e._e(),t("div",{staticClass:"children"},e._l(e.children,(function(i,n){return t("WidgetController",{key:n,ref:"controllers",refInFor:!0,staticClass:"child",attrs:{inGroup:!0,widgetConfig:i},nativeOn:{contextmenu:function(t){return t.preventDefault(),e.handleChildContextmenu.apply(null,arguments)}}})})),1)])},C=[],x=(i("14d9"),i("7fe8")),w=i("9e0a");let S=class extends s["f"]{constructor(){super(...arguments),this.move=!1,this.initialState=null,this.dragModel="",this.isHandleChildContextmenu=!1}get baseConfig(){return this.widgetConfig.base}get widgetDefinition(){return this.context.getWidgetDefinition(this.widgetConfig.widgetDefinitionId)}get locked(){return this.baseConfig.locked}get isGroup(){return this.widgetConfig.isGroup}get fixation(){var e;return null===(e=this.widgetDefinition)||void 0===e?void 0:e.fixation}get autoSize(){var e;return null===(e=this.widgetDefinition)||void 0===e?void 0:e.autoSize}get children(){const e=this.widgetConfig.children||[],t=[];for(let i=e.length-1;i>=0;i--)t.push(e[i]);return t}get xLength(){const e=this.axis.scale;if(this.inGroup){const t=this.baseConfig,i=t.anchor;return"center"===i||"center-top"===i||"center-bottom"===i?(t.x-t.width/2)*e:"right-top"===i||"right-bottom"===i||"right-center"===i?(t.x-t.width)*e:t.x*e}return(this.baseConfig.x+this.axis.offsetX)*e}get yLength(){const e=this.axis.scale;if(this.inGroup){const t=this.baseConfig,i=t.anchor;return"center"===i||"left-center"===i||"right-center"===i?(t.y-t.height/2)*e:"left-bottom"===i||"right-bottom"===i||"center-bottom"===i?(t.y-t.height)*e:t.y*e}return(this.baseConfig.y+this.axis.offsetY)*e}get style(){var e;const t=this.axis.scale,i=this.baseConfig;let n=i.width,o=i.height;null!==(e=this.widgetDefinition)&&void 0!==e&&e.fixation&&(n=this.widgetDefinition.width||0,o=this.widgetDefinition.height||0),n*=t,o*=t;const a={width:n+1+"px",height:o+1+"px",left:Math.round(i.x)*t-.5+"px",top:Math.round(i.y)*t-.5+"px",marginLeft:"",marginTop:""};return"right-top"===i.anchor&&(a.marginLeft=`-${n}px`),"center"===i.anchor&&(a.marginLeft=`-${n/2}px`,a.marginTop=`-${o/2}px`),"left-bottom"===i.anchor&&(a.marginTop=`-${o}px`),"right-bottom"===i.anchor&&(a.marginLeft=`-${n}px`,a.marginTop=`-${o}px`),"center-top"===i.anchor&&(a.marginLeft=`-${n/2}px`),"center-bottom"===i.anchor&&(a.marginLeft=`-${n/2}px`,a.marginTop=`-${o}px`),"left-center"===i.anchor&&(a.marginTop=`-${o/2}px`),"right-center"===i.anchor&&(a.marginLeft=`-${n}px`,a.marginTop=`-${o/2}px`),a}get style3D(){var e;const t=this.axis.scale,i=this.baseConfig;let n=i.width,o=i.height;null!==(e=this.widgetDefinition)&&void 0!==e&&e.fixation&&(n=this.widgetDefinition.width||0,o=this.widgetDefinition.height||0),n*=t,o*=t;const a=`\n      skew(${i.skewX}deg, ${i.skewY}deg)\n      rotateX(${i.rotateX}deg)\n      rotateY(${i.rotateY}deg)\n      rotateZ(${i.rotateZ}deg)\n    `;return{width:n+1+"px",height:o+1+"px","perspective-origin":"50% 50%","-ms-transform":a,"-webkit-transform":a,transform:a}}get selectedWidgetConfig(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.selectedWidgetConfig}set selectedWidgetConfig(e){this.pageEditor&&this.pageEditor.$emit("update:selectedWidgetConfig",e)}get isSelected(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.isSelectedWidgetConfig(this.widgetConfig)}get hover(){return this.widgetConfig===this.hoverWidgetConfig&&!this.locked}get fade(){const e=this.inGroup?this.$parent:null,t=e&&e.widgetConfig,i=this.selectedWidgetConfig&&this.widgetConfig!==this.selectedWidgetConfig&&t!==this.selectedWidgetConfig;return i}get childActive(){return!!this.selectedWidgetConfig&&this.children.indexOf(this.selectedWidgetConfig)>-1}get hoverWidgetConfig(){var e;return null===(e=this.pageEditor)||void 0===e?void 0:e.hoverWidgetConfig}set hoverWidgetConfig(e){this.pageEditor&&void 0!==e&&(this.pageEditor.hoverWidgetConfig=e)}get canSetSize(){return this.widgetDefinition&&this.isSelected&&!this.isGroup&&!this.fixation&&!this.autoSize}startDrag(e,t,i){var n;if(this.isSelected)if(null===(n=this.pageEditor)||void 0===n||!n.isMultipleSelected||i)"move"===t&&e.stopPropagation(),this.dragModel=t,this.initialState={x:this.widgetConfig.base.x,y:this.widgetConfig.base.y,width:this.widgetConfig.base.width,height:this.widgetConfig.base.height,clientX:e.clientX,clientY:e.clientY},document.addEventListener("mousemove",this.onMoving,{passive:!0}),document.addEventListener("mouseup",this.endDrag,{passive:!0});else{const i=this.axis.$parent.$refs.controllers;for(const n of i)n.startDrag(e,t,!0)}}endDrag(e){this.onMoving(e),this.initialState=null,this.dragModel="",window.setTimeout(()=>{this.move=!1},0),document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.endDrag)}onMoving(e){const t=this.initialState,i=this.axis.scale,n=this.baseConfig;let o=e.clientX-t.clientX,a=e.clientY-t.clientY,s="top",r="left";"right-top"===n.anchor&&(r="right"),"center"===n.anchor&&(s="center",r="center"),"left-bottom"===n.anchor&&(s="bottom"),"right-bottom"===n.anchor&&(r="right",s="bottom"),"center-top"===n.anchor&&(r="center",s="top"),"center-bottom"===n.anchor&&(r="center",s="bottom"),"left-center"===n.anchor&&(r="left",s="center"),"right-center"===n.anchor&&(r="right",s="center"),this.move=0!==o||0!==a,"move"===this.dragModel&&(this.widgetConfig.base.x=Number((t.x+o/i).toFixed()),this.widgetConfig.base.y=Number((t.y+a/i).toFixed())),"resize-top"!==this.dragModel&&"resize-top-left"!==this.dragModel&&"resize-top-right"!==this.dragModel||(a>=t.height*i&&(a=t.height*i),"top"===s&&(this.widgetConfig.base.y=Number((t.y+a/i).toFixed())),this.widgetConfig.base.height=Number((t.height-a/i).toFixed())),"resize-bottom"!==this.dragModel&&"resize-bottom-left"!==this.dragModel&&"resize-bottom-right"!==this.dragModel||(a<-t.height*i&&(a=-t.height*i),"bottom"===s&&(this.widgetConfig.base.y=Number((t.y+a/i).toFixed())),this.widgetConfig.base.height=Number((t.height+a/i).toFixed())),"resize-left"!==this.dragModel&&"resize-top-left"!==this.dragModel&&"resize-bottom-left"!==this.dragModel||(o>=t.width*i&&(o=t.width*i),"left"===r&&(this.widgetConfig.base.x=Number((t.x+o/i).toFixed())),this.widgetConfig.base.width=Number((t.width-o/i).toFixed())),"resize-right"!==this.dragModel&&"resize-top-right"!==this.dragModel&&"resize-bottom-right"!==this.dragModel||(o<-t.width*i&&(o=-t.width*i),"right"===r&&(this.widgetConfig.base.x=Number((t.x+o/i).toFixed())),this.widgetConfig.base.width=Number((t.width+o/i).toFixed()))}groupRecomputation(){const e=this.initialState;if(this.inGroup){const t=this.$parent,i=t.baseConfig.x,n=t.baseConfig.y;t.recomputation();const o=t.baseConfig.x-i,a=t.baseConfig.y-n;e&&(e.x-=o,e.y-=a)}}recomputation(){if(this.isGroup){const e=this.children,t=e=>"right-top"===e.base.anchor||"right-center"===e.base.anchor||"right-bottom"===e.base.anchor?e.base.x-e.base.width:"center-top"===e.base.anchor||"center"===e.base.anchor||"center-bottom"===e.base.anchor?e.base.x-e.base.width/2:e.base.x,i=e=>"left-bottom"===e.base.anchor||"center-bottom"===e.base.anchor||"right-bottom"===e.base.anchor?e.base.y-e.base.height:"left-center"===e.base.anchor||"center"===e.base.anchor||"right-center"===e.base.anchor?e.base.y-e.base.height/2:e.base.y;let n=Math.min(...e.map(t)),o=Math.min(...e.map(i));this.widgetConfig.base.x+=n,this.widgetConfig.base.y+=o;for(const r of e)r.base.x-=n,r.base.y-=o;n=Math.min(...e.map(t)),o=Math.min(...e.map(i));const a=Math.max(...e.map(e=>{const i=this.context.getWidgetDefinition(e.id);let n=e.base.width;return null!==i&&void 0!==i&&i.fixation&&(n=i.width||0),t(e)+n})),s=Math.max(...e.map(e=>{const t=this.context.getWidgetDefinition(e.id);let n=e.base.height;return null!==t&&void 0!==t&&t.fixation&&(n=t.height||0),i(e)+n}));this.widgetConfig.base.width=a-n,this.widgetConfig.base.height=s-o}}childrenChange(){this.isGroup&&0===this.children.length||this.recomputation()}handleWidgetControllerClick(){this.move||this.locked||this.pageEditor&&this.pageEditor.selectWidgetConfig(this.widgetConfig)}handleContextmenu(){!0!==this.isHandleChildContextmenu?this.move||this.locked||this.pageEditor&&!this.isSelected&&this.pageEditor.selectWidgetConfig(this.widgetConfig):this.isHandleChildContextmenu=!1}handleChildContextmenu(){this.isHandleChildContextmenu=!0}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(u="undefined"!==typeof w["a"]&&w["a"])?u:Object)],S.prototype,"context",void 0),Object(a["a"])([Object(s["b"])("axis"),Object(a["b"])("design:type","function"===typeof(f="undefined"!==typeof O&&O)?f:Object)],S.prototype,"axis",void 0),Object(a["a"])([Object(s["b"])({default:null}),Object(a["b"])("design:type",Object)],S.prototype,"pageEditor",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type","function"===typeof(b="undefined"!==typeof x["a"]&&x["a"])?b:Object)],S.prototype,"widgetConfig",void 0),Object(a["a"])([Object(s["c"])({required:!1,default:!1}),Object(a["b"])("design:type","function"===typeof(g="undefined"!==typeof x["a"]&&x["a"])?g:Object)],S.prototype,"inGroup",void 0),Object(a["a"])([Object(s["g"])("widgetConfig.base."),Object(s["g"])("widgetConfig.base.x"),Object(s["g"])("widgetConfig.base.y"),Object(s["g"])("widgetConfig.base.width"),Object(s["g"])("widgetConfig.base.height"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],S.prototype,"groupRecomputation",null),Object(a["a"])([Object(s["g"])("children"),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],S.prototype,"recomputation",null),Object(a["a"])([Object(s["g"])("children.length",{deep:!0}),Object(a["b"])("design:type",Function),Object(a["b"])("design:paramtypes",[]),Object(a["b"])("design:returntype",void 0)],S.prototype,"childrenChange",null),S=Object(a["a"])([Object(s["a"])({name:"WidgetController"})],S);var _,A=S,D=A,W=(i("9ceb"),Object(m["a"])(D,v,C,!1,null,"fff2a0d2",null)),E=W.exports,k=i("c0e9"),T=i.n(k),I=i("ec26");let N=class extends s["f"]{get widgetConfigsReverse(){return[...this.widgetConfigs].reverse()}async getScreenshot(){const e=this.$refs.axis,t=e.scale;e.scale=1,await this.$nextTick();try{const i=await T()(this.$refs.main,{backgroundColor:"rgba(0,0,0,0)",useCORS:!0}),n=await new Promise((e,t)=>{i.toBlob(i=>{i?e(i):t()})}),o=new File([n],Object(I["a"])()+".png",{type:"image/png",lastModified:Date.now()}),{url:a}=await this.context.uploadFile(o);return e.scale=t,this.context.baseURL+a}catch(i){return console.log(i),""}}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(_="undefined"!==typeof w["a"]&&w["a"])?_:Object)],N.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({default:!0}),Object(a["b"])("design:type",Boolean)],N.prototype,"dragable",void 0),Object(a["a"])([Object(s["c"])(),Object(a["b"])("design:type",Array)],N.prototype,"widgetConfigs",void 0),Object(a["a"])([Object(s["c"])({required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],N.prototype,"inCombinationEditor",void 0),N=Object(a["a"])([Object(s["a"])({components:{OperatingSpaceAxis:O,WidgetController:E}})],N);var P=N,M=P,B=(i("ec70"),Object(m["a"])(M,n,o,!1,null,"f34c5cee",null));t["a"]=B.exports},b4fd:function(e,t,i){"use strict";i("5d05")},b718:function(e,t,i){"use strict";i("15a7")},b905:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetDefinitionGroupFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fab","uncharted"]}}),t("span",[e._v(e._s(e.name))])],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get object(){return this.treeContext.data.object}get name(){return this.object.displayName}get node(){return this.treeContext.node}get expanded(){return this.node.expanded}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("75cd"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"15c1e6df",null);t["default"]=f.exports},b967:function(e,t,i){},b9e4:function(e,t,i){"use strict";i("fdf5")},ba22:function(e,t,i){"use strict";i("7efa")},ba67:function(e,t,i){"use strict";i("ab12")},ba85:function(e,t,i){},ba98:function(e,t,i){"use strict";i("24c3")},baee:function(e,t,i){"use strict";i("faa0")},bb04:function(e,t,i){"use strict";i("7485")},bb93:function(e,t,i){},bc2d:function(e,t,i){},bc55:function(e,t,i){},bed3:function(e,t,i){},bedf:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetDefinitionFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fab","uncharted"]}}),t("span",[e._v("组件")])],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("4b64"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"6eb35536",null);t["default"]=f.exports},c02c:function(e,t,i){"use strict";i("5b54")},c2d2:function(e,t,i){"use strict";i("7e0c")},c303:function(e,t,i){"use strict";i("9099")},c32d:function(e,t,i){"use strict";i("56b9")},c5e6:function(e,t,i){"use strict";i("6cc7")},c706:function(e,t,i){"use strict";i("8217")},ca51:function(e,t,i){"use strict";i("0279")},cb7e:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"VariableSizeZone",style:e.style},[e._t("default"),e.leftController?t("div",{staticClass:"controller-left",on:{mousedown:function(t){return e.startDrag(t,"left")}}}):e._e(),e.rightController?t("div",{staticClass:"controller-right",on:{mousedown:function(t){return e.startDrag(t,"right")}}}):e._e(),e.bottomController?t("div",{staticClass:"controller-bottom",on:{mousedown:function(t){return e.startDrag(t,"bottom")}}}):e._e()],2)},o=[],a=i("9ab4"),s=i("60a3");let r=class extends s["f"]{constructor(){super(...arguments),this.widthValue=0,this.heightValue=0,this.$dragModel="",this.$initialState={clientX:0,clientY:0,widthValue:0,heightValue:0}}get style(){if(!this.disabled)return{width:this.rightController||this.leftController?this.widthValue+"px":"",height:this.bottomController?this.heightValue+"px":"",maxWidth:this.maxWidth?this.maxWidth+"px":"",minWidth:this.minWidth?this.minWidth+"px":"",minHeight:this.minHeight?this.minHeight+"px":"",maxHeight:this.maxHeight?this.maxHeight+"px":""}}created(){this.widthValue=this.width,this.heightValue=this.height}startDrag(e,t){this.$dragModel=t,this.$initialState={widthValue:this.widthValue,heightValue:this.heightValue,clientX:e.clientX,clientY:e.clientY},document.addEventListener("mousemove",this.onMoving),document.addEventListener("mouseup",this.endDrag)}onMoving(e){const t=this.$initialState;if("left"===this.$dragModel){const i=t.clientX-e.clientX;this.widthValue=t.widthValue+i}if("right"===this.$dragModel){const i=e.clientX-t.clientX;this.widthValue=t.widthValue+i}if("bottom"===this.$dragModel){const i=e.clientY-t.clientY;this.heightValue=t.heightValue+i}this.widthValue>this.maxWidth&&(this.widthValue=this.maxWidth),this.widthValue<this.minWidth&&(this.widthValue=this.minWidth),this.heightValue>this.maxHeight&&(this.heightValue=this.maxHeight),this.heightValue<this.minHeight&&(this.heightValue=this.minHeight),this.$emit("size-change",{w:this.rightController||this.leftController?this.widthValue:void 0,h:this.bottomController?this.heightValue:void 0})}endDrag(){this.$initialState={clientX:0,clientY:0,widthValue:0,heightValue:0},this.$dragModel="",document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.endDrag)}};Object(a["a"])([Object(s["c"])({type:Number,required:!1,default:300}),Object(a["b"])("design:type",Number)],r.prototype,"width",void 0),Object(a["a"])([Object(s["c"])({type:Number,required:!1,default:0}),Object(a["b"])("design:type",Number)],r.prototype,"minWidth",void 0),Object(a["a"])([Object(s["c"])({type:Number,required:!1,default:1/0}),Object(a["b"])("design:type",Number)],r.prototype,"maxWidth",void 0),Object(a["a"])([Object(s["c"])({type:Number,required:!1}),Object(a["b"])("design:type",Number)],r.prototype,"height",void 0),Object(a["a"])([Object(s["c"])({type:Number,required:!1}),Object(a["b"])("design:type",Number)],r.prototype,"minHeight",void 0),Object(a["a"])([Object(s["c"])({type:Number,required:!1}),Object(a["b"])("design:type",Number)],r.prototype,"maxHeight",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],r.prototype,"leftController",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],r.prototype,"rightController",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],r.prototype,"bottomController",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,required:!1,default:!1}),Object(a["b"])("design:type",Boolean)],r.prototype,"disabled",void 0),r=Object(a["a"])([s["a"]],r);var c=r,d=c,l=(i("89f3"),i("2877")),p=Object(l["a"])(d,n,o,!1,null,"f8d0d262",null);t["a"]=p.exports},ccaf:function(e,t,i){"use strict";i("5b3b")},cd22:function(e,t,i){},cd8f:function(e,t,i){},cf22:function(e,t,i){"use strict";i("5e9d")},d21a:function(e,t,i){},d374:function(e,t,i){"use strict";i("711f")},d47e:function(e,t,i){},d60e:function(e,t,i){},d64a:function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CustomWidgetDefinitionTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fab","vuejs"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名自定义组件",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get customWidgetDefinition(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.customWidgetDefinition)}handleClick(){this.editor.previewNimObj(this.customWidgetDefinition)}handleDbClick(){this.editor.openNimObj(this.customWidgetDefinition)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个自定义组件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteCustomWidgetDefinition(this.customWidgetDefinition)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("1a20"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"0c5c5d7c",null);t["default"]=g.exports},d872:function(e,t,i){"use strict";i("ba85")},da6d:function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c");let a=class{constructor(){this.displayName="",this.async=!1,this.fixation=!1,this.locked=!1,this.canInteract=!1,this.hidden=!1,this.transparent=0,this.anchor="left-top",this.cursor="default",this.x=0,this.y=0,this.width=300,this.height=300,this.skewX=0,this.skewY=0,this.rotateX=0,this.rotateY=0,this.rotateZ=0,this.attrGroups={}}};Object(n["a"])([Object(o["c"])("displayName",String,!0),Object(n["b"])("design:type",Object)],a.prototype,"displayName",void 0),Object(n["a"])([Object(o["c"])("async",Boolean,!0),Object(n["b"])("design:type",Object)],a.prototype,"async",void 0),Object(n["a"])([Object(o["c"])("fixation",Boolean,!0),Object(n["b"])("design:type",Object)],a.prototype,"fixation",void 0),Object(n["a"])([Object(o["c"])("locked",Boolean,!0),Object(n["b"])("design:type",Object)],a.prototype,"locked",void 0),Object(n["a"])([Object(o["c"])("canInteract",Boolean,!0),Object(n["b"])("design:type",Object)],a.prototype,"canInteract",void 0),Object(n["a"])([Object(o["c"])("hidden",Boolean,!0),Object(n["b"])("design:type",Object)],a.prototype,"hidden",void 0),Object(n["a"])([Object(o["c"])("transparent",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"transparent",void 0),Object(n["a"])([Object(o["c"])("anchor",String,!0),Object(n["b"])("design:type",Object)],a.prototype,"anchor",void 0),Object(n["a"])([Object(o["c"])("cursor",String,!0),Object(n["b"])("design:type",Object)],a.prototype,"cursor",void 0),Object(n["a"])([Object(o["c"])("x",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"x",void 0),Object(n["a"])([Object(o["c"])("y",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"y",void 0),Object(n["a"])([Object(o["c"])("width",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"width",void 0),Object(n["a"])([Object(o["c"])("height",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"height",void 0),Object(n["a"])([Object(o["c"])("skewX",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"skewX",void 0),Object(n["a"])([Object(o["c"])("skewY",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"skewY",void 0),Object(n["a"])([Object(o["c"])("rotateX",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"rotateX",void 0),Object(n["a"])([Object(o["c"])("rotateY",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"rotateY",void 0),Object(n["a"])([Object(o["c"])("rotateZ",Number,!0),Object(n["b"])("design:type",Object)],a.prototype,"rotateZ",void 0),Object(n["a"])([Object(o["c"])("attrGroups",Object,!0),Object(n["b"])("design:type",Object)],a.prototype,"attrGroups",void 0),a=Object(n["a"])([Object(o["b"])("WidgetBaseConfig")],a),t["a"]=a},dd9e:function(e,t,i){e.exports=i.p+"img/icon.880bc68f.png"},de6c:function(e,t,i){"use strict";i("790a")},e4b7:function(e,t,i){"use strict";i("2204")},e58b:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(e.componentName,e._b({tag:"component",staticClass:"AttrItem",nativeOn:{keydown:function(e){e.stopPropagation()}}},"component",{...e.$props,...e.$attrs},!1))},o=[],a=i("9ab4"),s=i("60a3"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"StringAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-input",{attrs:{size:"mini",type:e.type,spellcheck:"false"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)])},c=[];let d=class extends s["f"]{get value(){const e=this.object,t=e[this.prop];return t}set value(e){const t=this.object;t[this.prop]=e}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],d.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],d.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],d.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:String,default:"text"}),Object(a["b"])("design:type",String)],d.prototype,"type",void 0),d=Object(a["a"])([s["a"]],d);var l=d,p=l,u=(i("8188"),i("2877")),f=Object(u["a"])(p,r,c,!1,null,"f807b590",null),b=f.exports,g=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ScreenshotAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"input-group"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleGetScreenshotButtonClick}},[e._v("截取封面并上传")]),t("br"),t("br"),t("img",{staticStyle:{height:"100px"},attrs:{src:e.object[e.prop],alt:"",srcset:""}})],1)])},h=[];let y=class extends s["f"]{constructor(){super(...arguments),this.loading=!1}async handleGetScreenshotButtonClick(){this.loading=!0;const e=await this.getScreenshot();this.$set(this.object,this.prop,e),this.loading=!1}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],y.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],y.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],y.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:String,default:"text"}),Object(a["b"])("design:type",String)],y.prototype,"type",void 0),Object(a["a"])([Object(s["c"])({required:!0}),Object(a["b"])("design:type",Function)],y.prototype,"getScreenshot",void 0),y=Object(a["a"])([s["a"]],y);var m=y,j=m,O=(i("3d11"),Object(u["a"])(j,g,h,!1,null,"04021684",null)),v=O.exports,C=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"SelectAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-select",{attrs:{size:"mini"},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])},x=[];let w=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],w.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],w.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],w.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:Array,default(){return[]}}),Object(a["b"])("design:type",Array)],w.prototype,"options",void 0),w=Object(a["a"])([s["a"]],w);var S=w,_=S,A=(i("542b"),Object(u["a"])(_,C,x,!1,null,"9ae63eaa",null)),D=A.exports,W=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"NumberSliderAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-slider",{attrs:{min:e.min,max:e.max,step:e.step},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)])},E=[];let k=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],k.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],k.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],k.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:0}),Object(a["b"])("design:type",Number)],k.prototype,"min",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:100}),Object(a["b"])("design:type",Number)],k.prototype,"max",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:1}),Object(a["b"])("design:type",Number)],k.prototype,"step",void 0),k=Object(a["a"])([s["a"]],k);var T=k,I=T,N=(i("ed6b"),Object(u["a"])(I,W,E,!1,null,"fe46c73e",null)),P=N.exports,M=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"NumberAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-input-number",{attrs:{size:"mini",min:e.min,max:e.max,step:e.step},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)])},B=[];let L=class extends s["f"]{get value(){const e=this.object,t=e[this.prop];return t}set value(e){const t=this.object;t[this.prop]=e}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],L.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],L.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],L.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:0}),Object(a["b"])("design:type",Number)],L.prototype,"min",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:100}),Object(a["b"])("design:type",Number)],L.prototype,"max",void 0),Object(a["a"])([Object(s["c"])({type:Number,default:1}),Object(a["b"])("design:type",Number)],L.prototype,"step",void 0),L=Object(a["a"])([s["a"]],L);var R=L,F=R,$=(i("fd09"),Object(u["a"])(F,M,B,!1,null,"616fbbd1",null)),z=$.exports,G=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"SizeAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini",min:1,disabled:e.disable},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.width,callback:function(t){e.$set(e.object,"width",e._n(t))},expression:"object.width"}})],1),t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini",min:1,disabled:e.disable},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.height,callback:function(t){e.$set(e.object,"height",e._n(t))},expression:"object.height"}})],1)],1),t("el-row",{staticClass:"captions",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[e._v("宽度")]),t("el-col",{attrs:{span:12}},[e._v("高度")])],1)],1)])},V=[];let q=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String,default:"尺寸"}),Object(a["b"])("design:type",String)],q.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],q.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],q.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:Boolean,default:!1}),Object(a["b"])("design:type",Boolean)],q.prototype,"disable",void 0),q=Object(a["a"])([s["a"]],q);var J=q,U=J,X=(i("387f1"),Object(u["a"])(U,G,V,!1,null,"6764f9c2",null)),Y=X.exports,H=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PositionAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.x,callback:function(t){e.$set(e.object,"x",e._n(t))},expression:"object.x"}})],1),t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.y,callback:function(t){e.$set(e.object,"y",e._n(t))},expression:"object.y"}})],1)],1),t("el-row",{staticClass:"captions",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[e._v("X轴坐标")]),t("el-col",{attrs:{span:12}},[e._v("Y轴坐标")])],1)],1)])},Z=[];let Q=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String,default:"位置"}),Object(a["b"])("design:type",String)],Q.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],Q.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],Q.prototype,"prop",void 0),Q=Object(a["a"])([s["a"]],Q);var K=Q,ee=K,te=(i("4c59"),Object(u["a"])(ee,H,Z,!1,null,"7d670456",null)),ie=te.exports,ne=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ColorAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-input",{attrs:{size:"mini"},on:{blur:e.handleBlur},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}}),t("el-color-picker",{staticClass:"picker",attrs:{size:"mini","show-alpha":""},on:{change:e.handleBlur},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)])},oe=[],ae=i("cf2e"),se=i.n(ae);let re=class extends s["f"]{handleBlur(){const e=this.prop,t=this.object;se()(t&&t[e])||(t[e]="rgba(0,0,0,0)")}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],re.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],re.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],re.prototype,"prop",void 0),re=Object(a["a"])([s["a"]],re);var ce=re,de=ce,le=(i("f3a8"),Object(u["a"])(de,ne,oe,!1,null,"16955875",null)),pe=le.exports,ue=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CheckboxAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-checkbox",{model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)])},fe=[];let be=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],be.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],be.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],be.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:String,default:"text"}),Object(a["b"])("design:type",String)],be.prototype,"type",void 0),be=Object(a["a"])([s["a"]],be);var ge,he,ye=be,me=ye,je=(i("79769"),Object(u["a"])(me,ue,fe,!1,null,"28840e63",null)),Oe=je.exports,ve=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ImageAssetAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("div",{staticClass:"image-input",class:{hasValue:e.hasValue,noValue:!e.hasValue},style:e.style},[t("div",{staticClass:"inner"},[e.hasValue?[t("span",{staticClass:"text-button",on:{click:e.deleteFile}},[e._v("删除")]),t("span",{staticClass:"image-info"},[e._v(e._s(e.imageAsset.width)+" × "+e._s(e.imageAsset.height))])]:[t("span",{staticClass:"text-button",on:{click:e.selectFile}},[e._v("上传")]),t("span",{staticClass:"separator"},[e._v(" / ")]),t("span",{staticClass:"text-button",on:{click:e.openImageAssets}},[e._v("从资源库选择")]),t("br")]],2)]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg,image/bmp"},on:{change:e.handleChange}})])])},Ce=[],xe=i("1cdf"),we=i("9e0a"),Se=i("58fb");let _e=class extends s["f"]{get value(){return this.object[this.prop]}set value(e){this.object[this.prop]=e}get style(){const e={backgroundImage:"",backgroundSize:""},t=this.value;return t&&(e.backgroundImage=`url('${t.isBuiltIn?"":this.context.baseURL}${t.url}')`,e.backgroundSize="100% 100%"),e}get imageAsset(){return this.object&&this.object[this.prop]}get hasValue(){const e=this.object&&this.object[this.prop];return null!==e&&void 0!==e}selectFile(){const e=this.$refs.fileInput;e.value="",e.click()}deleteFile(){this.object[this.prop]=null}async handleChange(e){const t=e.target;if(t.files&&t.files.length)try{const e=t.files[0],i=await Object(Se["a"])(e);let n=await this.context.uploadFile(e);n={...n,...i},this.value=n}catch(i){}}async openImageAssets(){const e=await this.editor.openImageAssetDialog();this.$set(this.object,this.prop,e)}};Object(a["a"])([Object(s["b"])("nim-app-editor"),Object(a["b"])("design:type","function"===typeof(ge="undefined"!==typeof xe["a"]&&xe["a"])?ge:Object)],_e.prototype,"editor",void 0),Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(he="undefined"!==typeof we["a"]&&we["a"])?he:Object)],_e.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],_e.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],_e.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],_e.prototype,"prop",void 0),_e=Object(a["a"])([s["a"]],_e);var Ae,De=_e,We=De,Ee=(i("6534"),Object(u["a"])(We,ve,Ce,!1,null,"3f60c159",null)),ke=Ee.exports,Te=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ThemeAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-select",{attrs:{size:"mini"},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"custom"===e.object[e.prop]?t("div",{staticClass:"custom-colors"},e._l(e.customColors,(function(i,n){return t("el-color-picker",{key:n,staticClass:"color-picker",attrs:{size:"mini","show-alpha":"",value:i},on:{change:function(t){return e.setCustomColors(n,t)}}})})),1):e._e()],1)])},Ie=[];i("14d9");let Ne=class extends s["f"]{get options(){const e=this.context.applicationConfig.colorThemes.map(e=>({value:e.id,label:e.name}));return e.push({value:"custom",label:"自定义"}),e}get customColors(){const e=this.prop,t=this.object;return t[e+"CustomColors"]}setCustomColors(e,t){t&&se()(t)?this.$set(this.customColors,e,t):(this.customColors.splice(e,1),this.customColors.push("rgba(0,0,0,0)"))}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(Ae="undefined"!==typeof we["a"]&&we["a"])?Ae:Object)],Ne.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],Ne.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],Ne.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],Ne.prototype,"prop",void 0),Ne=Object(a["a"])([s["a"]],Ne);var Pe=Ne,Me=Pe,Be=(i("c303"),Object(u["a"])(Me,Te,Ie,!1,null,"eee145fc",null)),Le=Be.exports,Re=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"SkewAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini",min:-45,max:45},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.skewX,callback:function(t){e.$set(e.object,"skewX",e._n(t))},expression:"object.skewX"}})],1),t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{size:"mini",min:-45,max:45},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.object.skewY,callback:function(t){e.$set(e.object,"skewY",e._n(t))},expression:"object.skewY"}})],1)],1),t("el-row",{staticClass:"captions",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[e._v("X轴倾斜")]),t("el-col",{attrs:{span:12}},[e._v("Y轴倾斜")])],1)],1)])},Fe=[];let $e=class extends s["f"]{};Object(a["a"])([Object(s["c"])({type:String,default:"倾斜"}),Object(a["b"])("design:type",String)],$e.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],$e.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],$e.prototype,"prop",void 0),$e=Object(a["a"])([s["a"]],$e);var ze=$e,Ge=ze,Ve=(i("8a17"),Object(u["a"])(Ge,Re,Fe,!1,null,"6fece41a",null)),qe=Ve.exports,Je=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"HtmlAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("VariableSizeZone",{attrs:{topController:!0,bottomController:!0,height:375,minHeight:150,maxHeight:800}},[t("MonacoEditor",{attrs:{language:"html"},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}})],1)],1)])},Ue=[],Xe=i("5edc"),Ye=i("cb7e");let He=class extends s["f"]{get value(){const e=this.object,t=e[this.prop];return t}set value(e){const t=this.object;t[this.prop]=e}get isVariable(){const e=this.object,t=e[this.prop];return!(!t||!t.variable)}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],He.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],He.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],He.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:String,default:"text"}),Object(a["b"])("design:type",String)],He.prototype,"type",void 0),He=Object(a["a"])([Object(s["a"])({components:{MonacoEditor:Xe["a"],VariableSizeZone:Ye["a"]}})],He);var Ze,Qe=He,Ke=Qe,et=(i("8c14"),Object(u["a"])(Ke,Je,Ue,!1,null,"60deb2fe",null)),tt=et.exports,it=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"CombinationAttrItem"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),t("span",{staticClass:"input-group"},[t("el-select",{attrs:{size:"mini"},model:{value:e.object[e.prop],callback:function(t){e.$set(e.object,e.prop,t)},expression:"object[prop]"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])},nt=[];let ot=class extends s["f"]{get options(){const e=this.context.widgetDefinitionsOfCombinations;return[{label:"不选择",value:""},...e.map(e=>({label:e.displayName,value:e.id}))]}};Object(a["a"])([Object(s["b"])("nim-app-context"),Object(a["b"])("design:type","function"===typeof(Ze="undefined"!==typeof we["a"]&&we["a"])?Ze:Object)],ot.prototype,"context",void 0),Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],ot.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],ot.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number]}),Object(a["b"])("design:type",Object)],ot.prototype,"prop",void 0),ot=Object(a["a"])([s["a"]],ot);var at=ot,st=at,rt=(i("6b91"),Object(u["a"])(st,it,nt,!1,null,"0a6a39e8",null)),ct=rt.exports;let dt=class extends s["f"]{get componentName(){let e=this.type+"AttrItem";return e=e.charAt(0).toUpperCase()+e.slice(1),e}};Object(a["a"])([Object(s["c"])({type:String}),Object(a["b"])("design:type",String)],dt.prototype,"label",void 0),Object(a["a"])([Object(s["c"])({type:Object,required:!0}),Object(a["b"])("design:type",Object)],dt.prototype,"object",void 0),Object(a["a"])([Object(s["c"])({type:[String,Number],required:!1}),Object(a["b"])("design:type",Object)],dt.prototype,"prop",void 0),Object(a["a"])([Object(s["c"])({type:String,required:!0}),Object(a["b"])("design:type",String)],dt.prototype,"type",void 0),dt=Object(a["a"])([Object(s["a"])({components:{StringAttrItem:b,ScreenshotAttrItem:v,SelectAttrItem:D,NumberSliderAttrItem:P,NumberAttrItem:z,SizeAttrItem:Y,PositionAttrItem:ie,ColorAttrItem:pe,ImageAssetAttrItem:ke,ThemeAttrItem:Le,CheckboxAttrItem:Oe,SkewAttrItem:qe,HtmlAttrItem:tt,CombinationAttrItem:ct}})],dt);var lt=dt,pt=lt,ut=(i("a3c1"),Object(u["a"])(pt,n,o,!1,null,"cc4156be",null));t["a"]=ut.exports},eb75:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"WidgetDefinitionTreeNode"},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fab","uncharted"]}}),t("el-tooltip",{attrs:{placement:"right","open-delay":100,"hide-after":3100}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"widget-definition-icon"},[t("img",{attrs:{src:e.widgetDefinition.icon,alt:""}})])]),t("span",[e._v(e._s(e.name))])])],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get object(){return this.treeContext.data.object}get widgetDefinition(){return this.object}get name(){return this.object.displayName}get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleDragStart(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move")}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("ba98"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"148dcf86",null);t["default"]=f.exports},ebde:function(e,t,i){},ec70:function(e,t,i){"use strict";i("a740")},ed6b:function(e,t,i){"use strict";i("981b")},edd5:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(){this.id=Object(a["a"])("InteractionAction"),this.executorId="",this.actionType="",this.parameters=[]}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("triggerId",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"executorId",void 0),Object(n["a"])([Object(o["c"])("actionType",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"actionType",void 0),Object(n["a"])([Object(o["c"])("parameters",[],!0),Object(n["b"])("design:type",Array)],s.prototype,"parameters",void 0),s=Object(n["a"])([Object(o["b"])("InteractionAction")],s);let r=class{constructor(){this.id=Object(a["a"])("InteractionTrigger"),this.name="触发器",this.triggerId="",this.eventType="",this.actions=[],this.running=!1}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("triggerId",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"triggerId",void 0),Object(n["a"])([Object(o["c"])("eventType",String,!0),Object(n["b"])("design:type",Object)],r.prototype,"eventType",void 0),Object(n["a"])([Object(o["c"])("actions",[s],!0),Object(n["b"])("design:type",Array)],r.prototype,"actions",void 0),r=Object(n["a"])([Object(o["b"])("InteractionTrigger")],r),t["b"]=r},ee05:function(e,t,i){},ee39:function(e,t,i){"use strict";var n=i("9ab4"),o=i("a72c"),a=i("8ff1");let s=class{constructor(){this.id=Object(a["a"])("UserScript"),this.name="脚本",this.code=""}};Object(n["a"])([Object(o["c"])("id",String,!0),Object(n["b"])("design:type",String)],s.prototype,"id",void 0),Object(n["a"])([Object(o["c"])("name",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"name",void 0),Object(n["a"])([Object(o["c"])("code",String,!0),Object(n["b"])("design:type",Object)],s.prototype,"code",void 0),s=Object(n["a"])([Object(o["b"])("UserScript")],s),t["a"]=s},ee43:function(e,t,i){"use strict";i.r(t);var n,o,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"DataSourceTreeNode",class:{opend:e.opend},on:{contextmenu:function(t){return t.stopPropagation(),t.preventDefault(),e.handleContextmenu.apply(null,arguments)},click:e.handleClick,dblclick:e.handleDbClick}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","database"]}}),t("TxtEditor",{ref:"txtEditor",staticClass:"text-editor",attrs:{title:e.object.name,editBtnTitle:"修改名称",defaultText:"未命名大屏",hiddenEditBtn:""},model:{value:e.object.name,callback:function(t){e.$set(e.object,"name",t)},expression:"object.name"}})],1)},s=[],r=i("9ab4"),c=i("60a3"),d=i("234f"),l=i("1cdf");let p=class extends c["f"]{get object(){return this.treeContext.data.object}get node(){return this.treeContext.node}get dataSourceConfig(){return this.treeContext.data.object}get expanded(){return this.node.expanded}get opend(){return-1!==this.editor.editorInfos.findIndex(e=>e.obj===this.dataSourceConfig)}handleClick(){this.editor.previewNimObj(this.dataSourceConfig)}handleDbClick(){this.editor.openNimObj(this.dataSourceConfig)}handleContextmenu(e){this.editor.openContextmenu(e.clientX,e.clientY,[{name:"打开编辑器",handler:()=>{this.editor.closeContextmenu(),this.handleDbClick()}},{name:"重命名",handler:()=>{this.editor.closeContextmenu(),this.txtEditor.startInput()}},{name:"删除",handler:async()=>{this.editor.closeContextmenu();try{await this.$confirm("是否删除选这个数据源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.editor.deleteDataSource(this.dataSourceConfig)}catch{}}}])}};Object(r["a"])([Object(c["b"])("nim-app-editor"),Object(r["b"])("design:type","function"===typeof(n="undefined"!==typeof l["a"]&&l["a"])?n:Object)],p.prototype,"editor",void 0),Object(r["a"])([Object(c["c"])(),Object(r["b"])("design:type",Object)],p.prototype,"treeContext",void 0),Object(r["a"])([Object(c["e"])(),Object(r["b"])("design:type","function"===typeof(o="undefined"!==typeof d["a"]&&d["a"])?o:Object)],p.prototype,"txtEditor",void 0),p=Object(r["a"])([Object(c["a"])({components:{TxtEditor:d["a"]}})],p);var u=p,f=u,b=(i("6106"),i("2877")),g=Object(b["a"])(f,a,s,!1,null,"4d107fc7",null);t["default"]=g.exports},ee5a:function(e,t,i){"use strict";i("680f")},f059:function(e,t,i){var n={"./ApplicationConfigTreeNode.vue":"5aee","./CombinationFolderTreeNode.vue":"891b","./CombinationTreeNode.vue":"9041","./CustomWidgetDefinitionFolderTreeNode.vue":"7e10","./CustomWidgetDefinitionTreeNode.vue":"d64a","./DataSourceFolderTreeNode.vue":"9654","./DataSourceTreeNode.vue":"ee43","./ImageFolderTreeNode.vue":"a5f3","./ImageTreeNode.vue":"0c90","./InteractionTriggerFolderTreeNode.vue":"60eb","./InteractionTriggerTreeNode.vue":"5dff","./ObjectTreeNode.vue":"a4e7","./PageConfigFolderTreeNode.vue":"f4bf","./PageConfigTreeNode.vue":"1126","./UserScriptFolderTreeNode.vue":"6c2a","./UserScriptTreeNode.vue":"20c5","./VariableTreeNode.vue":"6759","./WidgetDefinitionFolderTreeNode.vue":"bedf","./WidgetDefinitionGroupFolderTreeNode.vue":"b905","./WidgetDefinitionTreeNode.vue":"eb75"};function o(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="f059"},f154:function(e,t,i){},f3a8:function(e,t,i){"use strict";i("077d")},f4bf:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PageConfigFolderTreeNode"},[e.expanded?t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder-open"]}}):t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","folder"]}}),t("font-awesome-icon",{staticClass:"type-icon",class:{expanded:e.expanded},attrs:{icon:["fas","tv"]}}),t("span",[e._v("页面")]),t("font-awesome-icon",{staticClass:"add-icon",attrs:{title:"新建页面",icon:["fas","plus"]},on:{click:function(t){return t.stopPropagation(),e.handleAddBtnClick.apply(null,arguments)}}})],1)},a=[],s=i("9ab4"),r=i("1cdf"),c=i("60a3");let d=class extends c["f"]{get node(){return this.treeContext.node}get expanded(){return this.node.expanded}handleAddBtnClick(){this.editor.createNewPageConfig(),this.$once("hook:updated",()=>{this.$nextTick(()=>{this.treeContext.node.expanded=!0;try{const e=this.$parent.$parent.$children;if(e.length){const t=e[e.length-1],i=t.$children[0].$children[0],n=i&&i.$children[0];i&&i.handleDbClick(),n&&n.handleIconClick()}}catch(e){console.log("------ NIM ERROR START ------"),console.error(e),console.log("------- NIM ERROR END -------")}})})}};Object(s["a"])([Object(c["b"])("nim-app-editor"),Object(s["b"])("design:type","function"===typeof(n="undefined"!==typeof r["a"]&&r["a"])?n:Object)],d.prototype,"editor",void 0),Object(s["a"])([Object(c["c"])(),Object(s["b"])("design:type",Object)],d.prototype,"treeContext",void 0),d=Object(s["a"])([c["a"]],d);var l=d,p=l,u=(i("ccaf"),i("2877")),f=Object(u["a"])(p,o,a,!1,null,"39362531",null);t["default"]=f.exports},f502:function(e,t,i){},f704:function(e,t,i){},f744:function(e,t,i){"use strict";i("bed3")},f850:function(e,t){},faa0:function(e,t,i){},faca:function(e,t,i){"use strict";i("d47e")},fd09:function(e,t,i){"use strict";i("a9cf")},fdf5:function(e,t,i){},ff06:function(e,t,i){}});